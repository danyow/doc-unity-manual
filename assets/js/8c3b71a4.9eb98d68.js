"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[30327],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return u}});var s=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,s,o=function(e,t){if(null==e)return{};var n,s,o={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=s.createContext({}),m=function(e){var t=s.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=m(e.components);return s.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return s.createElement(s.Fragment,{},t)}},c=s.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=m(n),u=o,d=c["".concat(l,".").concat(u)]||c[u]||h[u]||r;return n?s.createElement(d,a(a({ref:t},p),{},{components:n})):s.createElement(d,a({ref:t},p))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,a=new Array(r);a[0]=c;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,a[1]=i;for(var m=2;m<r;m++)a[m]=n[m];return s.createElement.apply(null,a)}return s.createElement.apply(null,n)}c.displayName="MDXCreateElement"},69208:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return u},frontMatter:function(){return i},metadata:function(){return m},toc:function(){return h}});var s=n(87462),o=n(63366),r=(n(67294),n(3905)),a=["components"],i={id:"mesh-compression",title:"Compressing mesh data",slug:"/mesh/mesh-compression"},l="Compressing mesh data",m={unversionedId:"graphics/mesh/mesh-compression",id:"graphics/mesh/mesh-compression",title:"Compressing mesh data",description:"You can compress mesh data in Unity to reduce its size, which can improve performance. Unity provides two ways of compressing meshes. They work differently, and affect different aspects of performance:",source:"@site/docs/graphics/mesh/mesh-compression.md",sourceDirName:"graphics/mesh",slug:"/mesh/mesh-compression",permalink:"/docs/mesh/mesh-compression",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/graphics/mesh/mesh-compression.md",tags:[],version:"current",frontMatter:{id:"mesh-compression",title:"Compressing mesh data",slug:"/mesh/mesh-compression"},sidebar:"tutorialSidebar",previous:{title:"\u52a0\u8f7d\u7eb9\u7406\u548c\u7f51\u683c\u6570\u636e",permalink:"/docs/mesh/loading-textureand-mesh-data"},next:{title:"Meshes introduction",permalink:"/docs/mesh/mesh-introduction"}},p={},h=[{value:"Vertex Compression",id:"vertex-compression",level:2},{value:"Limitations of Vertex Compression",id:"limitations-of-vertex-compression",level:3},{value:"Configuring Vertex Compression",id:"configuring-vertex-compression",level:3},{value:"Mesh Compression",id:"mesh-compression",level:2},{value:"Limitations of Mesh Compression",id:"limitations-of-mesh-compression",level:3},{value:"Configuring Mesh Compression",id:"configuring-mesh-compression",level:3}],c={toc:h};function u(e){var t=e.components,n=(0,o.Z)(e,a);return(0,r.kt)("wrapper",(0,s.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"compressing-mesh-data"},"Compressing mesh data"),(0,r.kt)("p",null,"You can compress mesh data in Unity to reduce its size, which can improve performance. Unity provides two ways of compressing meshes. They work differently, and affect different aspects of performance:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#vertex-compression"},"Vertex Compression")," is a setting that affects every mesh in your project. It allows you to use lower precision data formats in your meshes. This reduces the size of mesh data in memory, slightly reduces file size, and might improve GPU performance. The potential downside is a loss of precision."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mesh-compression"},"Mesh Compression")," is a setting that affects individual meshes. It compresses the mesh data on disk, which reduces file size. The potential downsides are increased loading times, increased temporary memory usage when loading, and the possibility of compression artifacts.")),(0,r.kt)("p",null,"You can use both compression methods in the same project, but not on the same mesh. If you apply Mesh Compression to a mesh, Unity doesn\u2019t apply Vertex Compression to that mesh."),(0,r.kt)("p",null," ",(0,r.kt)("strong",{parentName:"p"},"Note:"),"  Unity\u2019s default settings for Vertex Compression and Mesh Compression are suitable for most projects. You should change these settings only if you have a problem, and assess the results to make sure that the changes have helped."),(0,r.kt)("h2",{id:"vertex-compression"},"Vertex Compression"),(0,r.kt)("p",null,"The Vertex Compression setting allows you to use lower precision data formats for all the meshes in your project. You do this by configuring the data type for specific data channels."),(0,r.kt)("p",null,"You can change the data type for a given channel from an FP32 (Floating Point32, a 32-bit floating point number) to an FP16 (Floating Point16, also known as a half-precision float). The FP16 format stores numbers with fewer places after the decimal point than FP32 numbers, which means that it takes up less space but offers slightly less precision."),(0,r.kt)("p",null,"Data converted from FP32 to FP16 takes up less space in memory, and slightly less space on disk. On the GPU, the data uses less memory bandwidth, which might slightly improve GPU performance."),(0,r.kt)("p",null,"The vertex compression technique compresses a mesh by a ratio that varies depending on how many vertex attributes you choose to compress. The compression ratio is usually around 1.45x when you compress normals, tangents, color, and three sets of UV coordinates."),(0,r.kt)("h3",{id:"limitations-of-vertex-compression"},"Limitations of Vertex Compression"),(0,r.kt)("p",null,"The mesh must meet the following requirements to use vertex compression:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The mesh must have its  ",(0,r.kt)("strong",{parentName:"li"},"Read/Write Enabled"),"  property disabled. You can change this property in the Model tab of the Model Import Settings window."),(0,r.kt)("li",{parentName:"ul"},"The mesh must not be a skinned mesh."),(0,r.kt)("li",{parentName:"ul"},"The target platform must support FP16 values."),(0,r.kt)("li",{parentName:"ul"},"The model that contains the mesh must have its  ",(0,r.kt)("strong",{parentName:"li"},"Mesh Compression"),"  value set to \u201cOff\u201d.")),(0,r.kt)("p",null,"If a mesh fails to meet any of these requirements, then Unity does not apply vertex compression to that mesh and all data channels on the mesh use FP32 precision numbers."),(0,r.kt)("h3",{id:"configuring-vertex-compression"},"Configuring Vertex Compression"),(0,r.kt)("p",null,"To change the Vertex Compression settings: 1. Open the Player settings (menu:  ",(0,r.kt)("strong",{parentName:"p"},"Edit"),"  ",">","  ",(0,r.kt)("strong",{parentName:"p"},"Project Settings"),"  ",">","  ",(0,r.kt)("strong",{parentName:"p"},"Player")," ). 1. Open the  ",(0,r.kt)("strong",{parentName:"p"},"Other Settings"),"  submenu and navigate to the  ",(0,r.kt)("strong",{parentName:"p"},"Optimization"),"  heading. 1. Select the  ",(0,r.kt)("strong",{parentName:"p"},"Vertex Compression"),"  dropdown and select any channel to enable or disable compression for that channel. You can also select  ",(0,r.kt)("strong",{parentName:"p"},"None"),"  to disable compression for all channels, or select  ",(0,r.kt)("strong",{parentName:"p"},"Everything"),"  to enable compression for all channels."),(0,r.kt)("p",null,"By default, Vertex Compression is set to  ",(0,r.kt)("strong",{parentName:"p"},"Mixed")," , which Unity displays when multiple selections are active in the dropdown. By default, Unity uses Vertex Compression for the following channels:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Normal"),(0,r.kt)("li",{parentName:"ul"},"Tangent"),(0,r.kt)("li",{parentName:"ul"},"Tex Coord 0"),(0,r.kt)("li",{parentName:"ul"},"Tex Coord 2"),(0,r.kt)("li",{parentName:"ul"},"Tex Coord 3")),(0,r.kt)("p",null,"Unity compresses these channels by default because in most cases this combination of settings provides a good mixture of saved memory without significant changes to how the mesh looks. Unity doesn\u2019t compress the other settings, Position and Tex Coord 1, by default because these are more likely to affect the appearance of the mesh, and do not offer significant reduction in memory use. If you intend to enable Vertex Compression for the Position and Tex Coord 1 channels, you should test the settings to ensure they don\u2019t cause artifacts in your meshes."),(0,r.kt)("h2",{id:"mesh-compression"},"Mesh Compression"),(0,r.kt)("p",null,"You can use the Mesh Compression setting to compress the mesh data for a given model asset on disk. The Mesh Compression algorithm is more aggressive than the Vertex Compression technique, which results in higher compression ratios and therefore smaller file sizes. However, it also has more downsides."),(0,r.kt)("p",null,"When you apply this setting, Unity uses an algorithm to replace the explicit values for each compression channel with a range between the maximum and minimum, where a fixed number of bits represents where each value falls in that range. This reduces the size of the mesh data on disk. When Unity loads the mesh into memory, it decompresses the data, which means it converts this range back into the original values. After this, performance isn\u2019t affected."),(0,r.kt)("p",null,"This technique can be useful if you need to reduce your final build size or the size of the AssetBundle the mesh is in as much as possible, and if the reduction in performance from the runtime decompression is acceptable."),(0,r.kt)("h3",{id:"limitations-of-mesh-compression"},"Limitations of Mesh Compression"),(0,r.kt)("p",null,"At runtime, mesh decompression uses additional CPU resources; this means that loading mesh data takes longer. Unity also uses more temporary memory when decompressing meshes."),(0,r.kt)("p",null,"Additionally, the relatively high compression ratio means that unwanted artifacts can appear when Unity decompresses the mesh. To avoid these artifacts, you should test each option for the mesh you want to compress and check that it appears correctly."),(0,r.kt)("h3",{id:"configuring-mesh-compression"},"Configuring Mesh Compression"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/mesh-compression-inspector.png",alt:"The Mesh Compression setting in the Model Import settings window"})),(0,r.kt)("p",null,"The Mesh Compression setting in the Model Import settings window"),(0,r.kt)("p",null,"To use the Mesh Compression setting:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Select a Model in your project\u2019s Assets folder to open the Model tab of the Import Settings window."),(0,r.kt)("li",{parentName:"ol"},"Navigate to the Meshes heading and find the Mesh Compression setting."),(0,r.kt)("li",{parentName:"ol"},"Select the dropdown menu to choose a level for all meshes in that Model. You can also change this setting in code with the ModelImporterMeshCompression enumeration.")),(0,r.kt)("p",null,"Available values are High, Medium, Low, or Off. The following table shows typical compression ratios for each of these settings:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"\u503c")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Vertices")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Normals")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Tangents")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"UVs")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Color")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Off")),(0,r.kt)("td",{parentName:"tr",align:null},"1.0"),(0,r.kt)("td",{parentName:"tr",align:null},"1.0"),(0,r.kt)("td",{parentName:"tr",align:null},"1.0"),(0,r.kt)("td",{parentName:"tr",align:null},"1.0"),(0,r.kt)("td",{parentName:"tr",align:null},"1.0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Low")),(0,r.kt)("td",{parentName:"tr",align:null},"1.6"),(0,r.kt)("td",{parentName:"tr",align:null},"4.6"),(0,r.kt)("td",{parentName:"tr",align:null},"4.4"),(0,r.kt)("td",{parentName:"tr",align:null},"2.0"),(0,r.kt)("td",{parentName:"tr",align:null},"1.0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Medium")),(0,r.kt)("td",{parentName:"tr",align:null},"2.0"),(0,r.kt)("td",{parentName:"tr",align:null},"5.6"),(0,r.kt)("td",{parentName:"tr",align:null},"5.3"),(0,r.kt)("td",{parentName:"tr",align:null},"3.2"),(0,r.kt)("td",{parentName:"tr",align:null},"1.3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"High")),(0,r.kt)("td",{parentName:"tr",align:null},"3.2"),(0,r.kt)("td",{parentName:"tr",align:null},"7.4"),(0,r.kt)("td",{parentName:"tr",align:null},"6.7"),(0,r.kt)("td",{parentName:"tr",align:null},"4.0"),(0,r.kt)("td",{parentName:"tr",align:null},"2.0")))),(0,r.kt)("p",null,"Compression ratios for the mesh compression technique"),(0,r.kt)("p",null,"Note: The \u201cColor\u201d column in the above table shows ratios for a mesh that uses the UNorm8 format. For a mesh that uses the FP32 format for vertex colors, the ratios are 4.0 on the Low setting, 5.3 on the Medium setting, and 8.0 on the High setting."))}u.isMDXComponent=!0}}]);