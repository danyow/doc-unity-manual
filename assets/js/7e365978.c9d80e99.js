"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[75499],{3905:function(n,e,t){t.d(e,{Zo:function(){return d},kt:function(){return m}});var a=t(67294);function r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function l(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,a)}return t}function o(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?l(Object(t),!0).forEach((function(e){r(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function i(n,e){if(null==n)return{};var t,a,r=function(n,e){if(null==n)return{};var t,a,r={},l=Object.keys(n);for(a=0;a<l.length;a++)t=l[a],e.indexOf(t)>=0||(r[t]=n[t]);return r}(n,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)t=l[a],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}var s=a.createContext({}),p=function(n){var e=a.useContext(s),t=e;return n&&(t="function"==typeof n?n(e):o(o({},e),n)),t},d=function(n){var e=p(n.components);return a.createElement(s.Provider,{value:e},n.children)},c={inlineCode:"code",wrapper:function(n){var e=n.children;return a.createElement(a.Fragment,{},e)}},u=a.forwardRef((function(n,e){var t=n.components,r=n.mdxType,l=n.originalType,s=n.parentName,d=i(n,["components","mdxType","originalType","parentName"]),u=p(t),m=r,f=u["".concat(s,".").concat(m)]||u[m]||c[m]||l;return t?a.createElement(f,o(o({ref:e},d),{},{components:t})):a.createElement(f,o({ref:e},d))}));function m(n,e){var t=arguments,r=e&&e.mdxType;if("string"==typeof n||r){var l=t.length,o=new Array(l);o[0]=u;var i={};for(var s in e)hasOwnProperty.call(e,s)&&(i[s]=e[s]);i.originalType=n,i.mdxType="string"==typeof n?n:r,o[1]=i;for(var p=2;p<l;p++)o[p]=t[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},72215:function(n,e,t){t.r(e),t.d(e,{assets:function(){return d},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return c}});var a=t(87462),r=t(63366),l=(t(67294),t(3905)),o=["components"],i={id:"SL-VertexFragmentShaderExamples",title:"\u81ea\u5b9a\u4e49\u7740\u8272\u5668\u57fa\u7840",slug:"/built-in-shader-examples/sl-vertex-fragment-shader-examples"},s="\u81ea\u5b9a\u4e49\u7740\u8272\u5668\u57fa\u7840",p={unversionedId:"graphics/render-pipelines/built-in-render-pipeline/built-in-shader-examples/SL-VertexFragmentShaderExamples",id:"graphics/render-pipelines/built-in-render-pipeline/built-in-shader-examples/SL-VertexFragmentShaderExamples",title:"\u81ea\u5b9a\u4e49\u7740\u8272\u5668\u57fa\u7840",description:"\u8fd9\u4e9b\u5185\u7f6e\u6e32\u67d3\u7ba1\u7ebf\u7684\u7740\u8272\u5668\u793a\u4f8b\u6f14\u793a\u4e86\u7f16\u5199\u81ea\u5b9a\u4e49\u7740\u8272\u5668\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u5e76\u6db5\u76d6\u4e86\u5e38\u89c1\u7684\u7528\u4f8b\u3002",source:"@site/docs/graphics/render-pipelines/built-in-render-pipeline/built-in-shader-examples/sl-vertex-fragment-shader-examples.md",sourceDirName:"graphics/render-pipelines/built-in-render-pipeline/built-in-shader-examples",slug:"/built-in-shader-examples/sl-vertex-fragment-shader-examples",permalink:"/doc-unity-manual/docs/built-in-shader-examples/sl-vertex-fragment-shader-examples",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/graphics/render-pipelines/built-in-render-pipeline/built-in-shader-examples/sl-vertex-fragment-shader-examples.md",tags:[],version:"current",frontMatter:{id:"SL-VertexFragmentShaderExamples",title:"\u81ea\u5b9a\u4e49\u7740\u8272\u5668\u57fa\u7840",slug:"/built-in-shader-examples/sl-vertex-fragment-shader-examples"},sidebar:"tutorialSidebar",previous:{title:"\u53ef\u89c6\u5316\u9876\u70b9\u6570\u636e",permalink:"/doc-unity-manual/docs/built-in-shader-examples/built-in-shader-examples-vertex-data"},next:{title:"\u4f7f\u7528 CommandBuffer \u6765\u6269\u5c55\u5185\u7f6e\u6e32\u67d3\u7ba1\u7ebf",permalink:"/doc-unity-manual/docs/built-in-render-pipeline/graphics-command-buffers"}},d={},c=[{value:"\u8bbe\u7f6e\u573a\u666f",id:"\u8bbe\u7f6e\u573a\u666f",level:3},{value:"\u521b\u5efa\u7740\u8272\u5668",id:"\u521b\u5efa\u7740\u8272\u5668",level:3},{value:"\u94fe\u63a5\u7f51\u683c\u3001\u6750\u8d28\u548c\u7740\u8272\u5668",id:"\u94fe\u63a5\u7f51\u683c\u6750\u8d28\u548c\u7740\u8272\u5668",level:3},{value:"\u7740\u8272\u5668\u7684\u4e3b\u8981\u90e8\u5206",id:"\u7740\u8272\u5668\u7684\u4e3b\u8981\u90e8\u5206",level:2},{value:"\u7b80\u5355\u7684\u65e0\u5149\u7167\u7740\u8272\u5668",id:"\u7b80\u5355\u7684\u65e0\u5149\u7167\u7740\u8272\u5668",level:2}],u={toc:c};function m(n){var e=n.components,t=(0,r.Z)(n,o);return(0,l.kt)("wrapper",(0,a.Z)({},u,t,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"\u81ea\u5b9a\u4e49\u7740\u8272\u5668\u57fa\u7840"},"\u81ea\u5b9a\u4e49\u7740\u8272\u5668\u57fa\u7840"),(0,l.kt)("p",null,"\u8fd9\u4e9b\u5185\u7f6e\u6e32\u67d3\u7ba1\u7ebf\u7684\u7740\u8272\u5668\u793a\u4f8b\u6f14\u793a\u4e86\u7f16\u5199\u81ea\u5b9a\u4e49\u7740\u8272\u5668\u7684\u57fa\u7840\u77e5\u8bc6\uff0c\u5e76\u6db5\u76d6\u4e86\u5e38\u89c1\u7684\u7528\u4f8b\u3002"),(0,l.kt)("p",null,"\u6709\u5173\u7f16\u5199\u7740\u8272\u5668\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605","[\u7f16\u5199\u7740\u8272\u5668][1]","\u3002"),(0,l.kt)("h3",{id:"\u8bbe\u7f6e\u573a\u666f"},"\u8bbe\u7f6e\u573a\u666f"),(0,l.kt)("p",null,"\u7b2c\u4e00\u6b65\u662f\u521b\u5efa\u4e00\u4e9b\u7528\u4e8e\u6d4b\u8bd5\u7740\u8272\u5668\u7684\u5bf9\u8c61\u3002\u5728\u4e3b\u83dc\u5355\u4e2d\u9009\u62e9  ",(0,l.kt)("strong",{parentName:"p"},"Game Object"),"  ",">","  ",(0,l.kt)("strong",{parentName:"p"},"3D Object"),"  ",">","  ",(0,l.kt)("strong",{parentName:"p"},"Capsule")," \u3002\u7136\u540e\uff0c\u8c03\u6574\u6444\u50cf\u673a\u4f4d\u7f6e\uff0c\u4f7f\u5176\u663e\u793a\u80f6\u56ca\u4f53\u3002\u5728 Hierarchy \u89c6\u56fe\u4e2d\u53cc\u51fb\u80f6\u56ca\u4f53 (Capsule) \u4ee5\u5c06 Scene \u89c6\u56fe\u805a\u7126\u5728\u8be5\u80f6\u56ca\u4f53\u4e0a\uff0c\u7136\u540e\u9009\u62e9\u4e3b\u6444\u50cf\u673a (Main Camera) \u5bf9\u8c61\uff0c\u5e76\u5355\u51fb\u4e3b\u83dc\u5355\u4e2d\u7684  ",(0,l.kt)("strong",{parentName:"p"},"Game object"),"  ",">","  ",(0,l.kt)("strong",{parentName:"p"},"Align with View")," \u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/SL-CapsuleSetup.png",alt:"SL-CapsuleSetup.png"})),(0,l.kt)("p",null,"\u5728 Project \u89c6\u56fe\u4e2d\uff0c\u4ece\u83dc\u5355\u4e2d\u9009\u62e9  ",(0,l.kt)("strong",{parentName:"p"},"Create"),"  ",">"," ","_",(0,l.kt)("em",{parentName:"p"},"Material **\uff0c\u521b\u5efa\u65b0\u7684","[\u6750\u8d28][2]","\u3002Project \u89c6\u56fe\u4e2d\u5c06\u663e\u793a\u4e00\u4e2a\u540d\u4e3a")," New Material","_"," \u7684\u65b0\u6750\u8d28\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/SL-NewMaterial.png",alt:"SL-NewMaterial.png"})),(0,l.kt)("h3",{id:"\u521b\u5efa\u7740\u8272\u5668"},"\u521b\u5efa\u7740\u8272\u5668"),(0,l.kt)("p",null,"\u73b0\u5728\u4ee5\u7c7b\u4f3c\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a\u65b0\u7684","[\u7740\u8272\u5668][3]","\u8d44\u6e90\u3002\u5728 Project \u89c6\u56fe\u4e2d\uff0c\u4ece\u83dc\u5355\u4e2d\u9009\u62e9",(0,l.kt)("strong",{parentName:"p"}," Create "),">",(0,l.kt)("strong",{parentName:"p"}," Shader "),">",(0,l.kt)("strong",{parentName:"p"}," Unlit Shader "),"\u3002 \u968f\u540e\u5c06\u521b\u5efa\u4e00\u4e2a\u57fa\u672c\u7740\u8272\u5668\uff0c\u8be5\u7740\u8272\u5668\u4ec5\u663e\u793a\u4e00\u4e2a\u7eb9\u7406\uff0c\u65e0\u4efb\u4f55\u5149\u7167\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/SL-NewShader.png",alt:"SL-NewShader.png"}),(0,l.kt)("strong",{parentName:"p"}," Create "),">",(0,l.kt)("strong",{parentName:"p"}," Shader "),"\u83dc\u5355\u4e2d\u7684\u5176\u4ed6\u6761\u76ee\u5c06\u521b\u5efa\u57fa\u672c\u8981\u7d20\u7740\u8272\u5668 \u6216\u5176\u4ed6\u7c7b\u578b\uff0c\u4f8b\u5982\uff0c\u57fa\u672c","[\u8868\u9762\u7740\u8272\u5668][4]","\u3002"),(0,l.kt)("h3",{id:"\u94fe\u63a5\u7f51\u683c\u6750\u8d28\u548c\u7740\u8272\u5668"},"\u94fe\u63a5\u7f51\u683c\u3001\u6750\u8d28\u548c\u7740\u8272\u5668"),(0,l.kt)("p",null,"\u901a\u8fc7\u6750\u8d28\u7684\u68c0\u89c6\u9762\u677f\u4f7f\u6750\u8d28\u4f7f\u7528\u7740\u8272\u5668\uff0c\u6216\u8005\u5728 Project \u89c6\u56fe\u4e2d\u5c06\u7740\u8272\u5668\u8d44\u6e90\u62d6\u52a8\u5230\u6750\u8d28\u8d44\u6e90\u4e0a\u3002\u6750\u8d28\u68c0\u89c6\u9762\u677f\u5728\u4f7f\u7528\u6b64\u7740\u8272\u5668\u65f6\u5c06\u663e\u793a\u767d\u8272\u7403\u4f53\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/SL-SelectShaderMenu.png",alt:"SL-SelectShaderMenu.png"})),(0,l.kt)("p",null,"\u73b0\u5728\u5c06\u6750\u8d28\u62d6\u52a8\u5230 Scene \u6216 Hierarchy \u89c6\u56fe\u4e2d\u7684\u7f51\u683c\u5bf9\u8c61\u4e0a\u3002\u6216\u8005\uff0c\u9009\u62e9\u5bf9\u8c61\uff0c\u5e76\u5728\u68c0\u89c6\u9762\u677f\u4e2d\u4f7f\u5176\u4f7f\u7528","[\u7f51\u683c\u6e32\u67d3\u5668 (Mesh Renderer)][5]"," \u7ec4\u4ef6\u7684 Materials \u5b57\u6bb5\u4e2d\u7684\u6750\u8d28\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/SL-WhiteCapsuleUnlitShader.png",alt:"SL-WhiteCapsuleUnlitShader.png"})),(0,l.kt)("p",null,"\u5b8c\u6574\u8fd9\u4e9b\u8bbe\u7f6e\u540e\uff0c\u73b0\u5728\u53ef\u4ee5\u5f00\u59cb\u67e5\u770b\u7740\u8272\u5668\u4ee3\u7801\uff0c\u5e76\u4f1a\u5728 Scene \u89c6\u56fe\u4e2d\u770b\u5230\u5bf9\u80f6\u56ca\u4f53\u4e0a\u7740\u8272\u5668\u6240\u505a\u7684\u66f4\u6539\u7684\u7ed3\u679c\u3002"),(0,l.kt)("h2",{id:"\u7740\u8272\u5668\u7684\u4e3b\u8981\u90e8\u5206"},"\u7740\u8272\u5668\u7684\u4e3b\u8981\u90e8\u5206"),(0,l.kt)("p",null,"\u8981\u5f00\u59cb\u68c0\u67e5\u7740\u8272\u5668\u7684\u4ee3\u7801\uff0c\u8bf7\u5728 Project \u89c6\u56fe\u4e2d\u53cc\u51fb\u7740\u8272\u5668\u8d44\u6e90\u3002\u7740\u8272\u5668\u4ee3\u7801\u5c06\u5728\u811a\u672c\u7f16\u8f91\u5668\uff08MonoDevelop \u6216 Visual Studio\uff09\u4e2d\u6253\u5f00\u3002"),(0,l.kt)("p",null,"\u7740\u8272\u5668\u6700\u5f00\u59cb\u7684\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'Shader "Unlit/NewUnlitShader"\n{\n    Properties\n    {\n        _MainTex ("Texture", 2D) = "white" {}\n    }\n    SubShader\n    {\n        Tags { "RenderType"="Opaque" }\n        LOD 100\n\n        Pass\n        {\n            CGPROGRAM\n            #pragma vertex vert\n            #pragma fragment frag\n            // \u4f7f\u96fe\u751f\u6548\n            #pragma multi_compile_fog\n            \n            #include "UnityCG.cginc"\n\n            struct appdata\n            {\n                float4 vertex : POSITION;\n                float2 uv : TEXCOORD0;\n            };\n\n            struct v2f\n            {\n                float2 uv : TEXCOORD0;\n                UNITY_FOG_COORDS(1)\n                float4 vertex : SV_POSITION;\n            };\n\n            sampler2D _MainTex;\n            float4 _MainTex_ST;\n            \n            v2f vert (appdata v)\n            {\n                v2f o;\n                o.vertex = UnityObjectToClipPos(v.vertex);\n                o.uv = TRANSFORM_TEX(v.uv, _MainTex);\n                UNITY_TRANSFER_FOG(o,o.vertex);\n                return o;\n            }\n            \n            fixed4 frag (v2f i) : SV_Target\n            {\n                // \u5bf9\u7eb9\u7406\u8fdb\u884c\u91c7\u6837\n                fixed4 col = tex2D(_MainTex, i.uv);\n                // \u5e94\u7528\u96fe\n                UNITY_APPLY_FOG(i.fogCoord, col);\n                return col;\n            }\n            ENDCG\n        }\n    }\n}\n')),(0,l.kt)("p",null,"\u8fd9\u4e2a\u521d\u59cb\u7740\u8272\u5668\u770b\u4e0a\u53bb\u4e0d\u662f\u90a3\u4e48\u7b80\u5355\uff01\u4f46\u4e0d\u8981\u62c5\u5fc3\uff0c \u6211\u4eec\u5c06\u9010\u6b65\u4ecb\u7ecd\u6bcf\u4e2a\u90e8\u5206\u3002"),(0,l.kt)("p",null,"\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u4e2a\u7b80\u5355\u7740\u8272\u5668\u7684\u4e3b\u8981\u90e8\u5206\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Shader\n")),(0,l.kt)("p",null,"[Shader][6]"," \u547d\u4ee4\u5305\u542b\u4e00\u4e2a\u5e26\u6709 \u7740\u8272\u5668\u540d\u79f0\u7684\u5b57\u7b26\u4e32\u3002\u5728","[\u6750\u8d28][7]","\u68c0\u89c6\u9762\u677f\u4e2d\u9009\u62e9\u7740\u8272\u5668\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b63\u659c\u6760\u5b57\u7b26\u201c/\u201d\u5c06\u7740\u8272\u5668\u653e\u7f6e\u5728\u5b50\u83dc\u5355\u4e2d\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\u5c5e\u6027\n")),(0,l.kt)("p",null,"[Properties][8]"," \u4ee3\u7801\u5757\u5305\u542b\u7740\u8272\u5668\u53d8\u91cf \uff08\u7eb9\u7406\u3001\u989c\u8272\u7b49\uff09\uff0c\u8fd9\u4e9b\u53d8\u91cf\u5c06\u4fdd\u5b58\u4e3a\u6750\u8d28\u7684\u4e00\u90e8\u5206\uff0c \u5e76\u663e\u793a\u5728\u6750\u8d28\u68c0\u89c6\u9762\u677f\u4e2d\u3002\u5728\u6211\u4eec\u7684\u65e0\u5149\u7167\u7740\u8272\u5668\u6a21\u677f\u4e2d\uff0c \u58f0\u660e\u4e86\u5355\u4e2a\u7eb9\u7406\u5c5e\u6027\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"SubShader\n")),(0,l.kt)("p",null,"\u4e00\u4e2a\u7740\u8272\u5668 (Shader) \u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a","[\u5b50\u7740\u8272\u5668 (SubShader)][9]","\uff0c\u4e3b\u8981 \u7528\u4e8e\u5b9e\u73b0\u4e0d\u540c GPU \u529f\u80fd\u7684\u7740\u8272\u5668\u3002 \u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u6211\u4eec\u5e76\u4e0d\u592a\u5173\u5fc3\u8fd9\u4e00\u70b9\uff0c\u6240\u4ee5\u6211\u4eec \u6240\u6709\u7684\u7740\u8272\u5668\u90fd\u53ea\u5305\u542b\u4e00\u4e2a\u5b50\u7740\u8272\u5668\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Pass\n")),(0,l.kt)("p",null,"\u6bcf\u4e2a\u5b50\u7740\u8272\u5668\u7531\u591a\u4e2a","[\u901a\u9053][10]","\u7ec4\u6210\uff0c\u6bcf\u4e2a\u901a\u9053\u4ee3\u8868 \u4e3a\u4f7f\u7528\u7740\u8272\u5668\u6750\u8d28\u6e32\u67d3\u7684\u540c\u4e00\u5bf9\u8c61\u6267\u884c \u9876\u70b9\u548c\u7247\u5143\u4ee3\u7801\u3002 \u8bb8\u591a\u7b80\u5355\u7684\u7740\u8272\u5668\u53ea\u4f7f\u7528\u4e00\u4e2a\u901a\u9053\uff0c\u4f46\u4e0e\u5149\u7167\u4ea4\u4e92\u7684 \u7740\u8272\u5668\u53ef\u80fd\u9700\u8981\u66f4\u591a\u901a\u9053\uff08\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ","[\u5149\u7167\u7ba1\u7ebf][11]","\uff09\u3002\u901a\u9053\u5185\u90e8\u7684 \u547d\u4ee4\u901a\u5e38\u8bbe\u7f6e\u56fa\u5b9a\u51fd\u6570\u72b6\u6001\uff0c\u4f8b\u5982 \u6df7\u5408\u6a21\u5f0f\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"CGPROGRAM ..ENDCG\n")),(0,l.kt)("p",null,"\u8fd9\u4e9b\u5173\u952e\u5b57\u5305\u88f9\u7740\u9876\u70b9\u548c\u7247\u5143\u7740\u8272\u5668\u4e2d\u7684 HLSL \u4ee3\u7801 \u90e8\u5206\u3002\u901a\u5e38\uff0c\u5927\u591a\u6570\u76f8\u5173\u4ee3\u7801\u90fd\u5305\u542b\u5728\u8fd9\u91cc\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ","[\u9876\u70b9\u548c\u7247\u5143\u7740\u8272\u5668][12]","\u3002"),(0,l.kt)("h2",{id:"\u7b80\u5355\u7684\u65e0\u5149\u7167\u7740\u8272\u5668"},"\u7b80\u5355\u7684\u65e0\u5149\u7167\u7740\u8272\u5668"),(0,l.kt)("p",null,"\u65e0\u5149\u7167\u7740\u8272\u5668\u6a21\u677f\u6bd4\u663e\u793a\u5e26\u7eb9\u7406\u7684\u5bf9\u8c61 \u7edd\u5bf9\u9700\u8981\u66f4\u591a\u7684\u4ee3\u7801\u3002\u4f8b\u5982\uff0c \u5b83\u652f\u6301\u96fe\u6548\uff0c\u4ee5\u53ca\u6750\u8d28\u4e2d\u7684\u7eb9\u7406\u5e73\u94fa/\u504f\u79fb\u5b57\u6bb5\u3002 \u8ba9\u6211\u4eec\u6700\u5927\u7a0b\u5ea6\u7b80\u5316\u7740\u8272\u5668\uff0c\u5e76\u6dfb\u52a0\u66f4\u591a\u6ce8\u91ca\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'Shader "Unlit/SimpleUnlitTexturedShader"\n{\n    Properties\n    {\n        // \u6211\u4eec\u5df2\u5220\u9664\u5bf9\u7eb9\u7406\u5e73\u94fa/\u504f\u79fb\u7684\u652f\u6301\uff0c\n        // \u56e0\u6b64\u8bf7\u8ba9\u5b83\u4eec\u4e0d\u8981\u663e\u793a\u5728\u6750\u8d28\u68c0\u89c6\u9762\u677f\u4e2d\n        [NoScaleOffset] _MainTex ("Texture", 2D) = "white" {}\n    }\n    SubShader\n    {\n        Pass\n        {\n            CGPROGRAM\n            // \u4f7f\u7528 "vert" \u51fd\u6570\u4f5c\u4e3a\u9876\u70b9\u7740\u8272\u5668\n            #pragma vertex vert\n            // \u4f7f\u7528 "frag" \u51fd\u6570\u4f5c\u4e3a\u50cf\u7d20\uff08\u7247\u5143\uff09\u7740\u8272\u5668\n            #pragma fragment frag\n\n            // \u9876\u70b9\u7740\u8272\u5668\u8f93\u5165\n            struct appdata\n            {\n                float4 vertex : POSITION; // \u9876\u70b9\u4f4d\u7f6e\n                float2 uv : TEXCOORD0; // \u7eb9\u7406\u5750\u6807\n            };\n\n            // \u9876\u70b9\u7740\u8272\u5668\u8f93\u51fa\uff08"\u9876\u70b9\u5230\u7247\u5143"\uff09\n            struct v2f\n            {\n                float2 uv : TEXCOORD0; // \u7eb9\u7406\u5750\u6807\n                float4 vertex : SV_POSITION; // \u88c1\u526a\u7a7a\u95f4\u4f4d\u7f6e\n            };\n\n            // \u9876\u70b9\u7740\u8272\u5668\n            v2f vert (appdata v)\n            {\n                v2f o;\n                // \u5c06\u4f4d\u7f6e\u8f6c\u6362\u4e3a\u88c1\u526a\u7a7a\u95f4\n                //\uff08\u4e58\u4ee5\u6a21\u578b*\u89c6\u56fe*\u6295\u5f71\u77e9\u9635\uff09\n                o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);\n                // \u4ec5\u4f20\u9012\u7eb9\u7406\u5750\u6807\n                o.uv = v.uv;\n                return o;\n            }\n            \n            // \u6211\u4eec\u5c06\u8fdb\u884c\u91c7\u6837\u7684\u7eb9\u7406\n            sampler2D _MainTex;\n\n            // \u50cf\u7d20\u7740\u8272\u5668\uff1b\u8fd4\u56de\u4f4e\u7cbe\u5ea6\uff08"fixed4" \u7c7b\u578b\uff09\n            // \u989c\u8272\uff08"SV_Target" \u8bed\u4e49\uff09\n            fixed4 frag (v2f i) : SV_Target\n            {\n                // \u5bf9\u7eb9\u7406\u8fdb\u884c\u91c7\u6837\u5e76\u5c06\u5176\u8fd4\u56de\n                fixed4 col = tex2D(_MainTex, i.uv);\n                return col;\n            }\n            ENDCG\n        }\n    }\n}\n```** \u9876\u70b9\u7740\u8272\u5668 **\u662f\u5bf9 3D \u6a21\u578b\u7684\u6bcf\u4e2a\u9876\u70b9\u8fd0\u884c\u7684\u7a0b\u5e8f\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5b83\u5e76\u4e0d\u505a\u4efb\u4f55\u7279\u522b\u6709\u8da3\u7684\u4e8b\u60c5\u3002\u8fd9\u91cc\u6211\u4eec\u53ea\u662f\u5c06\u9876\u70b9\u4f4d\u7f6e\u4ece\u5bf9\u8c61\u7a7a\u95f4\u8f6c\u6362\u4e3a\u6240\u8c13\u7684\u201c\u88c1\u526a\u7a7a\u95f4\u201d\uff08\u7531 GPU \u7528\u4e8e\u6805\u683c\u5316\u5c4f\u5e55\u4e0a\u7684\u5bf9\u8c61\uff09\u3002\u6211\u4eec\u8fd8\u4f20\u9012\u672a\u4fee\u6539\u7684\u8f93\u5165\u7eb9\u7406\u5750\u6807\uff1b\u6211\u4eec\u9700\u8981\u8be5\u5750\u6807\u6765\u5bf9\u7247\u5143\u7740\u8272\u5668\u4e2d\u7684\u7eb9\u7406\u8fdb\u884c\u91c7\u6837\u3002** \u7247\u5143\u7740\u8272\u5668 **\u662f\u5bf9\u5c4f\u5e55\u4e0a\u5bf9\u8c61\u5360\u636e\u7684\u6bcf\u4e2a\u50cf\u7d20\u8fd0\u884c\u7684\u7a0b\u5e8f\uff0c\u901a\u5e38\u7528\u4e8e\u8ba1\u7b97\u548c\u8f93\u51fa\u6bcf\u4e2a\u50cf\u7d20\u7684\u989c\u8272\u3002\u901a\u5e38\uff0c\u5c4f\u5e55\u4e0a\u6709\u6570\u767e\u4e07\u4e2a\u50cf\u7d20\uff0c\u5e76\u4e14\u7247\u5143\u7740\u8272\u5668\u5c06 \u9488\u5bf9\u6240\u6709\u50cf\u7d20\u6267\u884c\uff01\u4f18\u5316\u7247\u5143\u7740\u8272\u5668\u662f\u6574\u4f53\u6e38\u620f\u6027\u80fd\u4f18\u5316\u5de5\u4f5c\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\u3002\n\n\u4e00\u4e9b\u53d8\u91cf\u6216\u51fd\u6570\u5b9a\u4e49\u540e\u8ddf\u4e00\u4e2a** \u8bed\u4e49\u6307\u793a\u7b26 **\uff0c\u4f8b\u5982** : POSITION **\u6216** : SV\\_Target **\u3002\u8fd9\u4e9b\u8bed\u4e49\u6307\u793a\u7b26\u5c06\u8fd9\u4e9b\u53d8\u91cf\u7684\u201c\u542b\u4e49\u201d\u4f20\u8fbe\u7ed9 GPU\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605[\u7740\u8272\u5668\u8bed\u4e49][13]\u9875\u9762\u3002\n\n\u7528\u4e8e\u5177\u6709\u826f\u597d\u7eb9\u7406\u7684\u826f\u597d\u6a21\u578b\u65f6\uff0c\u6211\u4eec\u7684\u7b80\u5355\u7740\u8272\u5668\u770b\u8d77\u6765\u975e\u5e38\u597d\uff01\n\n![ExampleUnlitTextured.png](https://docs.unity3d.com/cn/2022.1/uploads/SL/ExampleUnlitTextured.png)\n\n## \u66f4\u7b80\u5355\u7684\u5355\u8272\u7740\u8272\u5668\n\n\u8ba9\u6211\u4eec\u8fdb\u4e00\u6b65\u7b80\u5316\u7740\u8272\u5668\uff1a\u6211\u4eec\u5c06\u5236\u4f5c\u4e00\u4e2a\u7528\u5355\u4e00\u989c\u8272\u7ed8\u5236\u6574\u4e2a\u5bf9\u8c61\u7684 \u7740\u8272\u5668\u3002\u8fd9\u5e76\u4e0d\u662f\u5f88\u6709\u7528\uff0c\u4f46\u522b\u5fd8\u4e86\uff0c\u6211\u4eec\u662f\u5728\u5b66\u4e60\u3002\n\n')),(0,l.kt)("p",null,'Shader "Unlit/SingleColor"\n{\nProperties\n{\n// \u6750\u8d28\u68c0\u89c6\u9762\u677f\u7684\u989c\u8272\u5c5e\u6027\uff0c\u9ed8\u8ba4\u4e3a\u767d\u8272\n_Color ("Main Color", Color) = (1,1,1,1)\n}\nSubShader\n{\nPass\n{\nCGPROGRAM\n#pragma vertex vert\n#pragma fragment frag'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'        // \u9876\u70b9\u7740\u8272\u5668\n        // \u8fd9\u6b21\u4e0d\u4f7f\u7528 "appdata" \u7ed3\u6784\uff0c\u4ec5\u624b\u52a8\u62fc\u5199\u8f93\u5165\uff0c\n        // \u5e76\u4e14\u4e0d\u8fd4\u56de v2f \u7ed3\u6784\uff0c\u540c\u6837\u4ec5\u8fd4\u56de\u5355\u4e2a\u8f93\u51fa\n        // float4 \u88c1\u526a\u4f4d\u7f6e\n        float4 vert (float4 vertex : POSITION) : SV_POSITION\n        {\n            return mul(UNITY_MATRIX_MVP, vertex);\n        }\n        \n        // \u6765\u81ea\u6750\u8d28\u7684\u989c\u8272\n        fixed4 _Color;\n\n        // \u50cf\u7d20\u7740\u8272\u5668\uff0c\u65e0\u9700\u8f93\u5165\n        fixed4 frag () : SV_Target\n        {\n            return _Color; // \u4ec5\u5c06\u5176\u8fd4\u56de\n        }\n        ENDCG\n    }\n}\n')),(0,l.kt)("p",null,"}"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n\u8fd9\u6b21\uff0c\u7740\u8272\u5668\u51fd\u6570\u53ea\u662f\u624b\u52a8\u62fc\u51fa\u8f93\u5165\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u8f93\u5165\u7ed3\u6784 (** appdata **) \u548c\u8f93\u51fa\u7ed3\u6784 (** v2f **)\u3002\u4e24\u79cd\u65b9\u5f0f\u90fd\u6709\u6548\uff0c\u9009\u62e9\u4f7f\u7528\u54ea\u79cd\u65b9\u5f0f\u53d6\u51b3\u4e8e\u60a8\u7f16\u5199\u4ee3\u7801\u7684\u98ce\u683c\u548c\u504f\u597d\u3002\n\n![ExampleSingleColor.png](https://docs.unity3d.com/cn/2022.1/uploads/SL/ExampleSingleColor.png)\n\n## \u4f7f\u7528\u7f51\u683c\u6cd5\u7ebf\uff0c\u8f7b\u677e\u83b7\u5229\n\n\u8ba9\u6211\u4eec\u7ee7\u7eed\u4e86\u89e3\u5728\u4e16\u754c\u7a7a\u95f4\u4e2d\u663e\u793a\u7f51\u683c\u6cd5\u7ebf\u7684\u7740\u8272\u5668\u3002\u8a00\u5f52\u6b63\u4f20\uff1a\n\n")),(0,l.kt)("p",null,'Shader "Unlit/WorldSpaceNormals"\n{\n// \u8fd9\u6b21\u6ca1\u6709 Properties \u4ee3\u7801\u5757\uff01\nSubShader\n{\nPass\n{\nCGPROGRAM\n#pragma vertex vert\n#pragma fragment frag\n// \u5305\u542b UnityObjectToWorldNormal helper \u51fd\u6570\u7684 include \u6587\u4ef6\n#include "UnityCG.cginc"'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'        struct v2f {\n            // \u6211\u4eec\u5c06\u8f93\u51fa\u4e16\u754c\u7a7a\u95f4\u6cd5\u7ebf\u4f5c\u4e3a\u5e38\u89c4 ("texcoord") \u63d2\u503c\u5668\u4e4b\u4e00\n            half3 worldNormal : TEXCOORD0;\n            float4 pos : SV_POSITION;\n        };\n\n        // \u9876\u70b9\u7740\u8272\u5668\uff1a\u5c06\u5bf9\u8c61\u7a7a\u95f4\u6cd5\u7ebf\u4e5f\u4f5c\u4e3a\u8f93\u5165\n        v2f vert (float4 vertex : POSITION, float3 normal : NORMAL)\n        {\n            v2f o;\n            o.pos = UnityObjectToClipPos(vertex);\n            // UnityCG.cginc \u6587\u4ef6\u5305\u542b\u5c06\u6cd5\u7ebf\u4ece\u5bf9\u8c61\u53d8\u6362\u5230\n            // \u4e16\u754c\u7a7a\u95f4\u7684\u51fd\u6570\uff0c\u8bf7\u4f7f\u7528\u8be5\u51fd\u6570\n            o.worldNormal = UnityObjectToWorldNormal(normal);\n            return o;\n        }\n        \n        fixed4 frag (v2f i) : SV_Target\n        {\n            fixed4 c = 0;\n            // \u6cd5\u7ebf\u662f\u5177\u6709 xyz \u5206\u91cf\u7684 3D \u77e2\u91cf\uff1b\u5904\u4e8e -1..1\n            // \u8303\u56f4\u3002\u8981\u5c06\u5176\u663e\u793a\u4e3a\u989c\u8272\uff0c\u8bf7\u5c06\u6b64\u8303\u56f4\u8bbe\u7f6e\u4e3a 0..1\n            // \u5e76\u653e\u5165\u7ea2\u8272\u3001\u7eff\u8272\u3001\u84dd\u8272\u5206\u91cf\n            c.rgb = i.worldNormal*0.5+0.5;\n            return c;\n        }\n        ENDCG\n    }\n}\n')),(0,l.kt)("p",null,"}"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n![ExampleWorldSpaceNormals.png](https://docs.unity3d.com/cn/2022.1/uploads/SL/ExampleWorldSpaceNormals.png)\n\n\u9664\u4e86\u4ea7\u751f\u6f02\u4eae\u7684\u989c\u8272\u5916\uff0c\u6cd5\u7ebf\u8fd8\u7528\u4e8e\u5404\u79cd\u56fe\u5f62\u6548\u679c\uff1a\u5149\u7167\u3001\u53cd\u5c04\u3001\u8f6e\u5ed3\u7b49\u3002\n\n\u5728\u4e0a\u9762\u7684\u7740\u8272\u5668\u4e2d\uff0c\u6211\u4eec\u5f00\u59cb\u4f7f\u7528 Unity \u7684\u5185\u7f6e[\u7740\u8272\u5668 include \u6587\u4ef6][14]\u4e4b\u4e00\u3002 \u8fd9\u91cc\u4f7f\u7528\u7684** UnityCG.cginc **\u5305\u542b\u4e00\u4e2a\u65b9\u4fbf\u7684\u51fd\u6570** UnityObjectToWorldNormal **\u3002\u6211\u4eec\u8fd8\u4f7f\u7528\u4e86\u5b9e\u7528\u51fd\u6570** UnityObjectToClipPos **\uff0c\u8be5\u51fd\u6570\u5c06\u9876\u70b9\u4ece\u5bf9\u8c61\u7a7a\u95f4\u8f6c\u6362\u4e3a\u5c4f\u5e55\u3002\u8fd9\u4f7f\u5f97\u4ee3\u7801\u66f4\u6613\u4e8e\u9605\u8bfb\uff0c\u5e76\u4e14\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u66f4\u6709\u6548\u3002\n\n\u5728\u6240\u8c13\u7684\u201c\u63d2\u503c\u5668\u201d\uff08\u6709\u65f6\u79f0\u4e3a\u201c\u53d8\u5316\u201d\uff09\u4e2d\uff0c\u6211\u4eec\u5df2\u7ecf\u770b\u5230\u6570\u636e\u53ef\u4ece\u9876\u70b9\u4f20\u5165\u7247\u5143\u7740\u8272\u5668\u3002\u5728 HLSL \u7740\u8272\u8bed\u8a00\u4e2d\uff0c\u5b83\u4eec\u901a\u5e38\u7528** TEXCOORDn **\u8bed\u4e49\u8fdb\u884c\u6807\u8bb0\uff0c\u5176\u4e2d\u6bcf\u4e00\u4e2a\u6700\u591a\u53ef\u4ee5\u662f\u4e00\u4e2a 4 \u5206\u91cf\u77e2\u91cf\uff08\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605[\u8bed\u4e49][15]\u9875\u9762\uff09\u3002\n\n\u6b64\u5916\uff0c\u6211\u4eec\u5b66\u4e60\u4e86\u5982\u4f55\u4f7f\u7528\u4e00\u79cd\u7b80\u5355\u7684\u6280\u672f\u5c06\u6807\u51c6\u5316\u77e2\u91cf\uff08\u5728 \u20131.0 \u5230 +1.0 \u8303\u56f4\u5185\uff09\u53ef\u89c6\u5316\u4e3a\u989c\u8272\uff1a\u53ea\u9700\u5c06\u5b83\u4eec\u4e58\u4ee5\u4e8c\u5206\u4e4b\u4e00\u5e76\u52a0\u4e8c\u5206\u4e4b\u4e00\u3002\u6709\u5173\u66f4\u591a\u9876\u70b9\u6570\u636e\u53ef\u89c6\u5316\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605[\u53ef\u89c6\u5316\u9876\u70b9\u6570\u636e][16]\u3002\n\n#### \u4f7f\u7528\u4e16\u754c\u7a7a\u95f4\u6cd5\u7ebf\u7684\u73af\u5883\u53cd\u5c04\n\n\u5982\u679c\u5728\u573a\u666f\u4e2d\u4f7f\u7528[\u5929\u7a7a\u76d2][17]\u4f5c\u4e3a\u53cd\u5c04\u6e90\uff08\u8bf7\u53c2\u9605 [Lighting \u7a97\u53e3][18]\uff09\uff0c \u57fa\u672c\u4e0a\u4f1a\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u5929\u7a7a\u76d2\u6570\u636e\u7684\u201c\u9ed8\u8ba4\u201d[\u53cd\u5c04\u63a2\u9488][19]\u3002 \u53cd\u5c04\u63a2\u9488\u5185\u90e8\u662f[\u7acb\u65b9\u4f53\u8d34\u56fe][20]\u7eb9\u7406\uff1b\u6211\u4eec\u5c06\u6269\u5c55\u4e0a\u9762\u7684\u4e16\u754c\u7a7a\u95f4\u6cd5\u7ebf\u7740\u8272\u5668\u6765\u5bf9\u5176\u8fdb\u884c\u6df1\u5165\u4e86\u89e3\u3002\n\n\u4ee3\u7801\u73b0\u5728\u5f00\u59cb\u53d8\u5f97\u6709\u70b9\u590d\u6742\u3002\u5f53\u7136\uff0c\u5982\u679c\u60a8\u5e0c\u671b\u7740\u8272\u5668\u80fd\u591f\u81ea\u52a8\u5904\u7406\u5149\u6e90\u3001\u9634\u5f71\u3001\u53cd\u5c04\u4ee5\u53ca\u5149\u7167\u7cfb\u7edf\u7684\u5176\u4f59\u90e8\u5206\uff0c\u4f7f\u7528[\u8868\u9762\u7740\u8272\u5668][21]\u4f1a\u5bb9\u6613\u5f97\u591a\u3002\u6b64\u793a\u4f8b\u65e8\u5728\u5411\u60a8\u5c55\u793a\u5982\u4f55\u4ee5\u201c\u624b\u52a8\u201d\u65b9\u5f0f\u4f7f\u7528\u5149\u7167\u7cfb\u7edf\u7684\u5404\u4e2a\u90e8\u5206\u3002\n\n")),(0,l.kt)("p",null,'Shader "Unlit/SkyReflection"\n{\nSubShader\n{\nPass\n{\nCGPROGRAM\n#pragma vertex vert\n#pragma fragment frag\n#include "UnityCG.cginc"'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"        struct v2f {\n            half3 worldRefl : TEXCOORD0;\n            float4 pos : SV_POSITION;\n        };\n\n        v2f vert (float4 vertex : POSITION, float3 normal : NORMAL)\n        {\n            v2f o;\n            o.pos = UnityObjectToClipPos(vertex);\n            // \u8ba1\u7b97\u9876\u70b9\u7684\u4e16\u754c\u7a7a\u95f4\u4f4d\u7f6e\n            float3 worldPos = mul(_Object2World, vertex).xyz;\n            // \u8ba1\u7b97\u4e16\u754c\u7a7a\u95f4\u89c6\u56fe\u65b9\u5411\n            float3 worldViewDir = normalize(UnityWorldSpaceViewDir(worldPos));\n            // \u4e16\u754c\u7a7a\u95f4\u6cd5\u7ebf\n            float3 worldNormal = UnityObjectToWorldNormal(normal);\n            // \u4e16\u754c\u7a7a\u95f4\u53cd\u5c04\u77e2\u91cf\n            o.worldRefl = reflect(-worldViewDir, worldNormal);\n            return o;\n        }\n    \n        fixed4 frag (v2f i) : SV_Target\n        {\n            // \u4f7f\u7528\u53cd\u5c04\u77e2\u91cf\u5bf9\u9ed8\u8ba4\u53cd\u5c04\u7acb\u65b9\u4f53\u8d34\u56fe\u8fdb\u884c\u91c7\u6837\n            half4 skyData = UNITY_SAMPLE_TEXCUBE(unity_SpecCube0, i.worldRefl);\n            // \u5c06\u7acb\u65b9\u4f53\u8d34\u56fe\u6570\u636e\u89e3\u7801\u4e3a\u5b9e\u9645\u989c\u8272\n            half3 skyColor = DecodeHDR (skyData, unity_SpecCube0_HDR);\n            // \u5c06\u5176\u8f93\u51fa\uff01\n            fixed4 c = 0;\n            c.rgb = skyColor;\n            return c;\n        }\n        ENDCG\n    }\n}\n")),(0,l.kt)("p",null,"}"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n![ExampleSkyReflection.png](https://docs.unity3d.com/cn/2022.1/uploads/SL/ExampleSkyReflection.png)\n\n\u4ee5\u4e0a\u793a\u4f8b\u4f7f\u7528\u4e86\u5185\u7f6e[\u7740\u8272\u5668 include \u6587\u4ef6][22]\u4e2d\u7684\u90e8\u5206\u5185\u5bb9\uff1a\n\n-   \u6765\u81ea[\u5185\u7f6e\u7740\u8272\u5668\u53d8\u91cf][23]\u7684** unity\\_SpecCube0 **\u3001** unity\\_SpecCube0\\_HDR **\u3001** Object2World **\u548c** UNITY\\_MATRIX\\_MVP **\u3002** unity\\_SpecCube0 **\u5305\u542b\u6fc0\u6d3b\u7684\u53cd\u5c04\u63a2\u9488\u7684\u6570\u636e\u3002\n-** UNITY\\_SAMPLE\\_TEXCUBE **\u662f\u4e00\u4e2a\u7528\u4e8e\u91c7\u6837\u7acb\u65b9\u4f53\u8d34\u56fe\u7684[\u5185\u7f6e\u5b8f][24]\u3002\u901a\u5e38\u4f7f\u7528\u6807\u51c6 HLSL \u8bed\u6cd5\u58f0\u660e\u548c \u4f7f\u7528\u5927\u591a\u6570\u5e38\u89c4\u7acb\u65b9\u4f53\u8d34\u56fe\uff08** samplerCUBE **\u548c** texCUBE **\uff09\uff0c\u4f46 Unity \u4e2d\u7684\u53cd\u5c04\u63a2\u9488\u7acb\u65b9\u4f53\u8d34\u56fe\u4ee5\u7279\u6b8a\u65b9\u5f0f\u58f0\u660e\u4ee5\u8282\u7701\u91c7\u6837\u5668\u5b57\u6bb5\u3002\u5982\u679c\u60a8\u4e0d\u77e5\u9053\u8fd9\u662f\u4ec0\u4e48\uff0c\u8bf7\u4e0d\u8981\u62c5\u5fc3\uff0c\u53ea\u9700\u8981\u77e5\u9053\uff1a\u8981\u4f7f\u7528**  unity\\_SpecCube0 **\u7acb\u65b9\u4f53\u8d34\u56fe\uff0c\u5fc5\u987b\u4f7f\u7528** UNITY\\_SAMPLE\\_TEXCUBE **\u5b8f\u3002\n-** UnityCG.cginc **\u4e2d\u7684** UnityWorldSpaceViewDir **\u51fd\u6570\u4ee5\u53ca\u6765\u81ea\u540c\u4e00\u6587\u4ef6\u7684** DecodeHDR **\u51fd\u6570\u3002\u540e\u8005\u7528\u4e8e\u4ece\u53cd\u5c04\u63a2\u9488\u6570\u636e\u4e2d\u83b7\u53d6\u5b9e\u9645\u989c\u8272\uff08\u56e0\u4e3a Unity \u4ee5\u7279\u6b8a\u7f16\u7801\u65b9\u5f0f\u5b58\u50a8\u53cd\u5c04\u63a2\u9488\u7acb\u65b9\u4f53\u8d34\u56fe\uff09\u3002\n-** reflect **\u53ea\u662f\u4e00\u4e2a\u5185\u7f6e\u7684 HLSL \u51fd\u6570\uff0c\u7528\u4e8e\u8ba1\u7b97\u7ed9\u5b9a\u6cd5\u7ebf\u5468\u56f4\u7684\u77e2\u91cf\u53cd\u5c04\u3002\n\n#### \u4f7f\u7528\u6cd5\u7ebf\u8d34\u56fe\u7684\u73af\u5883\u53cd\u5c04\n\n\u901a\u5e38\uff0c** \u6cd5\u7ebf\u8d34\u56fe **\u7528\u4e8e\u5728\u5bf9\u8c61\u4e0a\u521b\u5efa\u5176\u4ed6\u7ec6\u8282\uff0c\u800c\u65e0\u9700\u521b\u5efa\u5176\u4ed6\u51e0\u4f55\u4f53\u3002\u8ba9\u6211\u4eec\u770b\u770b\u5982\u4f55\u4f7f\u7528\u6cd5\u7ebf\u8d34\u56fe\u7eb9\u7406\u5236\u4f5c\u53d1\u5c04\u73af\u5883\u7684\u7740\u8272\u5668\u3002\n\n\u73b0\u5728\u5f00\u59cb*\u771f\u6b63\u6d89\u53ca\u5230\u4e86*\u6570\u5b66\u77e5\u8bc6\uff0c\u6240\u4ee5\u6211\u4eec\u5c06\u5206\u51e0\u6b65\u5b8c\u6210\u3002\u5728\u4e0a\u9762\u7684\u7740\u8272\u5668\u4e2d\uff0c\u53cd\u5c04 \u65b9\u5411\u662f\u6309\u6bcf\u4e2a\u9876\u70b9\u8ba1\u7b97\u7684\uff08\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\uff09\uff0c\u7247\u5143\u7740\u8272\u5668\u4ec5\u6267\u884c\u53cd\u5c04\u63a2\u9488 \u7acb\u65b9\u4f53\u8d34\u56fe\u67e5\u627e\u3002\u7136\u800c\uff0c\u4e00\u65e6\u6211\u4eec\u5f00\u59cb\u4f7f\u7528\u6cd5\u7ebf\u8d34\u56fe\uff0c\u8868\u9762\u6cd5\u7ebf\u672c\u8eab\u9700\u8981\u6309\u6bcf\u4e2a\u50cf\u7d20\u8ba1\u7b97\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u8fd8\u5fc5\u987b\u6309\u6bcf\u4e2a\u50cf\u7d20\u8ba1\u7b97\u73af\u5883\u7684\u53cd\u5c04\u65b9\u5f0f\uff01\n\n\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u91cd\u5199\u4e0a\u9762\u7684\u7740\u8272\u5668\u6765\u5b9e\u73b0\u76f8\u540c\u6548\u679c\uff0c\u53ea\u662f\u6211\u4eec\u5c06\u4e00\u4e9b\u8ba1\u7b97\u79fb\u5230\u7247\u5143\u7740\u8272\u5668\uff0c\u4ece\u800c\u6309\u6bcf\u4e2a\u50cf\u7d20\u8fdb\u884c\u8ba1\u7b97\uff1a\n\n")),(0,l.kt)("p",null,'Shader "Unlit/SkyReflection Per Pixel"\n{\nSubShader\n{\nPass\n{\nCGPROGRAM\n#pragma vertex vert\n#pragma fragment frag\n#include "UnityCG.cginc"'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"        struct v2f {\n            float3 worldPos : TEXCOORD0;\n            half3 worldNormal : TEXCOORD1;\n            float4 pos : SV_POSITION;\n        };\n\n        v2f vert (float4 vertex : POSITION, float3 normal : NORMAL)\n        {\n            v2f o;\n            o.pos = UnityObjectToClipPos(vertex);\n            o.worldPos = mul(_Object2World, vertex).xyz;\n            o.worldNormal = UnityObjectToWorldNormal(normal);\n            return o;\n        }\n    \n        fixed4 frag (v2f i) : SV_Target\n        {\n            // \u8ba1\u7b97\u89c6\u56fe\u65b9\u5411\u548c\u53cd\u5c04\u77e2\u91cf\n            // \u6b64\u5904\u4e3a\u6bcf\u50cf\u7d20\u8ba1\u7b97\n            half3 worldViewDir = normalize(UnityWorldSpaceViewDir(i.worldPos));\n            half3 worldRefl = reflect(-worldViewDir, i.worldNormal);\n\n            // \u4e0e\u5728\u5148\u524d\u7684\u7740\u8272\u5668\u4e2d\u76f8\u540c\n            half4 skyData = UNITY_SAMPLE_TEXCUBE(unity_SpecCube0, worldRefl);\n            half3 skyColor = DecodeHDR (skyData, unity_SpecCube0_HDR);\n            fixed4 c = 0;\n            c.rgb = skyColor;\n            return c;\n        }\n        ENDCG\n    }\n}\n")),(0,l.kt)("p",null,"}"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n\u8fd9\u91cc\u5e76\u6ca1\u6709\u5e26\u7ed9\u6211\u4eec\u592a\u591a\u4e0d\u540c\uff1a\u7740\u8272\u5668\u770b\u8d77\u6765\u5b8c\u5168\u76f8\u540c\uff0c\u53ea\u662f\u5b83\u73b0\u5728\u8fd0\u884c\u5f97\u66f4\u6162\uff0c\u56e0\u4e3a\u5b83\u5bf9\u5c4f\u5e55\u4e0a\u7684\u6bcf\u4e2a\u50cf\u7d20\u8fdb\u884c\u66f4\u591a\u7684\u8ba1\u7b97\uff0c\u800c\u4e0d\u662f\u4ec5\u5bf9\u6bcf\u4e2a\u6a21\u578b\u7684\u9876\u70b9\u8fdb\u884c\u8ba1\u7b97\u3002\u4f46\u662f\uff0c\u6211\u4eec\u5f88\u5feb\u5c31\u4f1a\u771f\u6b63\u9700\u8981\u8fd9\u4e9b\u8ba1\u7b97\u3002\u66f4\u9ad8\u7684\u56fe\u5f62\u4fdd\u771f\u5ea6\u901a\u5e38\u9700\u8981\u66f4\u590d\u6742\u7684\u7740\u8272\u5668\u3002\n\n\u6211\u4eec\u73b0\u5728\u4e5f\u8981\u5b66\u4e60\u65b0\u4e1c\u897f\uff0c\u5373\u6240\u8c13\u7684\u201c\u5207\u7ebf\u7a7a\u95f4\u201d\u3002\u6cd5\u7ebf\u8d34\u56fe\u7eb9\u7406\u901a\u5e38\u5728\u5750\u6807\u7a7a\u95f4\u4e2d\u8868\u793a\uff0c\u53ef\u5c06\u5176\u89c6\u4e3a\u201c\u8ddf\u968f\u6a21\u578b\u8868\u9762\u201d\u3002\u5728\u6211\u4eec\u7684\u7740\u8272\u5668\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u77e5\u9053\u5207\u7ebf\u7a7a\u95f4\u57fa\u77e2\u91cf\uff0c\u4ece\u7eb9\u7406\u4e2d\u8bfb\u53d6\u6cd5\u7ebf\u77e2\u91cf\uff0c\u5c06\u5176\u8f6c\u6362\u4e3a\u4e16\u754c\u7a7a\u95f4\uff0c\u7136\u540e\u901a\u8fc7\u4e0a\u9762\u7684\u7740\u8272\u5668 \u8fdb\u884c\u6240\u6709\u6570\u5b66\u8fd0\u7b97\u3002\u6211\u4eec\u884c\u52a8\u5427\uff01\n\n")),(0,l.kt)("p",null,'Shader "Unlit/SkyReflection Per Pixel"\n{\nProperties {\n// \u6750\u8d28\u4e0a\u7684\u6cd5\u7ebf\u8d34\u56fe\u7eb9\u7406\uff0c\n// \u9ed8\u8ba4\u4e3a\u865a\u62df\u7684 "\u5e73\u9762\u8868\u9762" \u6cd5\u7ebf\u8d34\u56fe\n_BumpMap("Normal Map", 2D) = "bump" {}\n}\nSubShader\n{\nPass\n{\nCGPROGRAM\n#pragma vertex vert\n#pragma fragment frag\n#include "UnityCG.cginc"'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"        struct v2f {\n            float3 worldPos : TEXCOORD0;\n            // \u8fd9\u4e09\u4e2a\u77e2\u91cf\u5c06\u4fdd\u6301\u4e00\u4e2a 3x3 \u65cb\u8f6c\u77e9\u9635\uff0c\n            // \u6b64\u77e9\u9635\u8fdb\u884c\u4ece\u5207\u7ebf\u5230\u4e16\u754c\u7a7a\u95f4\u7684\u8f6c\u6362\n            half3 tspace0 : TEXCOORD1; // tangent.x, bitangent.x, normal.x\n            half3 tspace1 : TEXCOORD2; // tangent.y, bitangent.y, normal.y\n            half3 tspace2 : TEXCOORD3; // tangent.z, bitangent.z, normal.z\n            // \u6cd5\u7ebf\u8d34\u56fe\u7684\u7eb9\u7406\u5750\u6807\n            float2 uv : TEXCOORD4;\n            float4 pos : SV_POSITION;\n        };\n\n        // \u9876\u70b9\u7740\u8272\u5668\u73b0\u5728\u8fd8\u9700\u8981\u6bcf\u9876\u70b9\u5207\u7ebf\u77e2\u91cf\u3002\n        // \u5728 Unity \u4e2d\uff0c\u5207\u7ebf\u4e3a 4D \u77e2\u91cf\uff0c\u5176\u4e2d\u4f7f\u7528 .w \u5206\u91cf\n        // \u6307\u793a\u53cc\u5207\u7ebf\u77e2\u91cf\u7684\u65b9\u5411\u3002\n        // \u6211\u4eec\u8fd8\u9700\u8981\u7eb9\u7406\u5750\u6807\u3002\n        v2f vert (float4 vertex : POSITION, float3 normal : NORMAL, float4 tangent : TANGENT, float2 uv : TEXCOORD0)\n        {\n            v2f o;\n            o.pos = UnityObjectToClipPos(vertex);\n            o.worldPos = mul(_Object2World, vertex).xyz;\n            half3 wNormal = UnityObjectToWorldNormal(normal);\n            half3 wTangent = UnityObjectToWorldDir(tangent.xyz);\n            // \u4ece\u6cd5\u7ebf\u548c\u5207\u7ebf\u7684\u4ea4\u53c9\u79ef\u8ba1\u7b97\u53cc\u5207\u7ebf\n            half tangentSign = tangent.w * unity_WorldTransformParams.w;\n            half3 wBitangent = cross(wNormal, wTangent) * tangentSign;\n            // \u8f93\u51fa\u5207\u7ebf\u7a7a\u95f4\u77e9\u9635\n            o.tspace0 = half3(wTangent.x, wBitangent.x, wNormal.x);\n            o.tspace1 = half3(wTangent.y, wBitangent.y, wNormal.y);\n            o.tspace2 = half3(wTangent.z, wBitangent.z, wNormal.z);\n            o.uv = uv;\n            return o;\n        }\n\n        // \u6765\u81ea\u7740\u8272\u5668\u5c5e\u6027\u7684\u6cd5\u7ebf\u8d34\u56fe\u7eb9\u7406\n        sampler2D _BumpMap;\n    \n        fixed4 frag (v2f i) : SV_Target\n        {\n            // \u5bf9\u6cd5\u7ebf\u8d34\u56fe\u8fdb\u884c\u91c7\u6837\uff0c\u5e76\u6839\u636e Unity \u7f16\u7801\u8fdb\u884c\u89e3\u7801\n            half3 tnormal = UnpackNormal(tex2D(_BumpMap, i.uv));\n            // \u5c06\u6cd5\u7ebf\u4ece\u5207\u7ebf\u53d8\u6362\u5230\u4e16\u754c\u7a7a\u95f4\n            half3 worldNormal;\n            worldNormal.x = dot(i.tspace0, tnormal);\n            worldNormal.y = dot(i.tspace1, tnormal);\n            worldNormal.z = dot(i.tspace2, tnormal);\n\n            // \u4e0e\u5728\u5148\u524d\u7684\u7740\u8272\u5668\u4e2d\u5904\u4e8e\u76f8\u540c\u7684\u4f4d\u7f6e\n            half3 worldViewDir = normalize(UnityWorldSpaceViewDir(i.worldPos));\n            half3 worldRefl = reflect(-worldViewDir, worldNormal);\n            half4 skyData = UNITY_SAMPLE_TEXCUBE(unity_SpecCube0, worldRefl);\n            half3 skyColor = DecodeHDR (skyData, unity_SpecCube0_HDR);\n            fixed4 c = 0;\n            c.rgb = skyColor;\n            return c;\n        }\n        ENDCG\n    }\n}\n")),(0,l.kt)("p",null,"}"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n\u54ce\u5466\uff0c\u8fd9\u4e2a\u975e\u5e38\u590d\u6742\u3002\u4f46\u662f\uff0c\u770b\u770b\u6cd5\u7ebf\u8d34\u56fe\u53cd\u5c04\uff01\n\n![ExampleSkyReflectionNormalmap.png](https://docs.unity3d.com/cn/2022.1/uploads/SL/ExampleSkyReflectionNormalmap.png)\n\n## \u6dfb\u52a0\u66f4\u591a\u7eb9\u7406\n\n\u8ba9\u6211\u4eec\u4e3a\u4e0a\u9762\u7684\u6cd5\u7ebf\u8d34\u56fe\u3001\u5929\u7a7a\u53cd\u5c04\u7740\u8272\u5668\u6dfb\u52a0\u66f4\u591a\u7eb9\u7406\u3002\u6211\u4eec\u5c06\u6dfb\u52a0\u57fa\u7840\u989c\u8272\u7eb9\u7406\uff08\u5982\u7b2c\u4e00\u4e2a\u65e0\u5149\u7167\u7684\u793a\u4f8b\u4e2d\u6240\u793a\uff09\u548c\u906e\u6321\u8d34\u56fe\u6765\u4f7f\u6d1e\u7a74\u53d8\u6697\u3002\n\n")),(0,l.kt)("p",null,'Shader "Unlit/More Textures"\n{\nProperties {\n// \u6211\u4eec\u5c06\u5728\u6750\u8d28\u4e2d\u4f7f\u7528\u4e09\u79cd\u7eb9\u7406\n_MainTex("Base texture", 2D) = "white" {}\n_OcclusionMap("Occlusion", 2D) = "white" {}\n_BumpMap("Normal Map", 2D) = "bump" {}\n}\nSubShader\n{\nPass\n{\nCGPROGRAM\n#pragma vertex vert\n#pragma fragment frag\n#include "UnityCG.cginc"'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"        // \u4e0e\u5728\u5148\u524d\u7684\u7740\u8272\u5668\u4e2d\u5b8c\u5168\u76f8\u540c\n        struct v2f {\n            float3 worldPos : TEXCOORD0;\n            half3 tspace0 : TEXCOORD1;\n            half3 tspace1 : TEXCOORD2;\n            half3 tspace2 : TEXCOORD3;\n            float2 uv : TEXCOORD4;\n            float4 pos : SV_POSITION;\n        };\n        v2f vert (float4 vertex : POSITION, float3 normal : NORMAL, float4 tangent : TANGENT, float2 uv : TEXCOORD0)\n        {\n            v2f o;\n            o.pos = UnityObjectToClipPos(vertex);\n            o.worldPos = mul(_Object2World, vertex).xyz;\n            half3 wNormal = UnityObjectToWorldNormal(normal);\n            half3 wTangent = UnityObjectToWorldDir(tangent.xyz);\n            half tangentSign = tangent.w * unity_WorldTransformParams.w;\n            half3 wBitangent = cross(wNormal, wTangent) * tangentSign;\n            o.tspace0 = half3(wTangent.x, wBitangent.x, wNormal.x);\n            o.tspace1 = half3(wTangent.y, wBitangent.y, wNormal.y);\n            o.tspace2 = half3(wTangent.z, wBitangent.z, wNormal.z);\n            o.uv = uv;\n            return o;\n        }\n\n        // \u6765\u81ea\u7740\u8272\u5668\u5c5e\u6027\u7684\u7eb9\u7406\n        sampler2D _MainTex;\n        sampler2D _OcclusionMap;\n        sampler2D _BumpMap;\n    \n        fixed4 frag (v2f i) : SV_Target\n        {\n            // \u4e0e\u5728\u5148\u524d\u7684\u7740\u8272\u5668\u4e2d\u76f8\u540c...\n            half3 tnormal = UnpackNormal(tex2D(_BumpMap, i.uv));\n            half3 worldNormal;\n            worldNormal.x = dot(i.tspace0, tnormal);\n            worldNormal.y = dot(i.tspace1, tnormal);\n            worldNormal.z = dot(i.tspace2, tnormal);\n            half3 worldViewDir = normalize(UnityWorldSpaceViewDir(i.worldPos));\n            half3 worldRefl = reflect(-worldViewDir, worldNormal);\n            half4 skyData = UNITY_SAMPLE_TEXCUBE(unity_SpecCube0, worldRefl);\n            half3 skyColor = DecodeHDR (skyData, unity_SpecCube0_HDR);                \n            fixed4 c = 0;\n            c.rgb = skyColor;\n\n            // \u4f7f\u7528\u57fa\u672c\u7eb9\u7406\u548c\u906e\u6321\u8d34\u56fe\u8c03\u5236\u5929\u7a7a\u989c\u8272\n            fixed3 baseColor = tex2D(_MainTex, i.uv).rgb;\n            fixed occlusion = tex2D(_OcclusionMap, i.uv).r;\n            c.rgb *= baseColor;\n            c.rgb *= occlusion;\n\n            return c;\n        }\n        ENDCG\n    }\n}\n")),(0,l.kt)("p",null,"}"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n\u6c14\u7403\u732b\u770b\u8d77\u6765\u5f88\u4e0d\u9519\uff01\n\n![ExampleMoreTextures.png](https://docs.unity3d.com/cn/2022.1/uploads/SL/ExampleMoreTextures.png)\n\n## \u7eb9\u7406\u5316\u7740\u8272\u5668\u793a\u4f8b\n\n#### \u7a0b\u5e8f\u5316\u68cb\u76d8\u56fe\u6848\n\n\u4e0b\u9762\u7684\u7740\u8272\u5668\u6839\u636e\u7f51\u683c\u7684\u7eb9\u7406\u5750\u6807\u8f93\u51fa\u68cb\u76d8\u56fe\u6848\uff1a\n\n")),(0,l.kt)("p",null,'Shader "Unlit/Checkerboard"\n{\nProperties\n{\n_Density ("Density", Range(2,50)) = 30\n}\nSubShader\n{\nPass\n{\nCGPROGRAM\n#pragma vertex vert\n#pragma fragment frag\n#include "UnityCG.cginc"'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"        struct v2f\n        {\n            float2 uv : TEXCOORD0;\n            float4 vertex : SV_POSITION;\n        };\n\n        float _Density;\n\n        v2f vert (float4 pos : POSITION, float2 uv : TEXCOORD0)\n        {\n            v2f o;\n            o.vertex = UnityObjectToClipPos(pos);\n            o.uv = uv * _Density;\n            return o;\n        }\n        \n        fixed4 frag (v2f i) : SV_Target\n        {\n            float2 c = i.uv;\n            c = floor(c) / 2;\n            float checker = frac(c.x + c.y) * 2;\n            return checker;\n        }\n        ENDCG\n    }\n}\n")),(0,l.kt)("p",null,"}"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n[Properties][25] \u4ee3\u7801\u5757\u4e2d\u7684\u5bc6\u5ea6\u6ed1\u52a8\u6761\u63a7\u5236\u68cb\u76d8\u7684\u5bc6\u96c6\u7a0b\u5ea6\u3002\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\uff0c\u7f51\u683c UV \u4e0e\u5bc6\u5ea6\u503c\u76f8\u4e58\uff0c\u4f7f\u5b83\u4eec\u4ece 0 \u5230 1 \u7684\u8303\u56f4\u53d8\u4e3a 0 \u5230\u5bc6\u5ea6\u7684\u8303\u56f4\u3002\u5047\u8bbe\u5bc6\u5ea6\u8bbe\u7f6e\u4e3a 30\uff0c\u8fd9\u5c06\u4f7f\u7247\u5143\u7740\u8272\u5668\u4e2d\u7684** i.uv **\u8f93\u5165\u5305\u542b 0 \u5230 30 \u7684\u6d6e\u70b9\u503c\uff0c\u5bf9\u5e94\u4e8e\u6b63\u5728\u6e32\u67d3\u7684\u7f51\u683c\u7684\u5404\u4e2a\u4f4d\u7f6e\u3002\n\n\u7136\u540e\uff0c\u7247\u5143\u7740\u8272\u5668\u4ee3\u7801\u4ec5\u4f7f\u7528 HLSL \u7684\u5185\u7f6e** floor **\u51fd\u6570\u83b7\u53d6\u8f93\u5165\u5750\u6807\u7684\u6574\u6570\u90e8\u5206\uff0c\u5e76\u5c06\u5176\u9664\u4ee5 2\u3002\u56de\u60f3\u4e00\u4e0b\uff0c\u8f93\u5165\u5750\u6807\u662f\u4ece 0 \u5230 30 \u7684\u6570\u5b57\uff1b\u8fd9\u4f7f\u5f97\u5b83\u4eec\u90fd\u88ab\u201c\u91cf\u5316\u201d\u4e3a 0\u30010.5\u30011\u30011.5\u30012\u30012.5 \u7b49\u7b49\u7684\u503c\u3002\u8f93\u5165\u5750\u6807\u7684 x \u548c y \u5206\u91cf\u90fd\u5b8c\u6210\u4e86\u6b64\u64cd\u4f5c\u3002\n\n\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u8fd9\u4e9b x \u548c y \u5750\u6807\u76f8\u52a0\uff08\u6bcf\u4e2a\u5750\u6807\u7684\u53ef\u80fd\u503c\u53ea\u6709 0\u30010.5\u30011\u30011.5 \u7b49\u7b49\uff09\uff0c\u5e76\u4e14\u53ea\u4f7f\u7528\u53e6\u4e00\u4e2a\u5185\u7f6e\u7684 HLSL \u51fd\u6570** frac **\u6765\u83b7\u53d6\u5c0f\u6570\u90e8\u5206\u3002\u7ed3\u679c\u53ea\u80fd\u662f 0.0 \u6216 0.5\u3002\u7136\u540e\uff0c\u6211\u4eec\u5c06\u5b83\u4e58\u4ee5 2 \u4f7f\u5176\u4e3a 0.0 \u6216 1.0\uff0c\u5e76\u8f93\u51fa\u4e3a\u989c\u8272\uff08\u8fd9\u5206\u522b\u4ea7\u751f\u9ed1\u8272\u6216\u767d\u8272\uff09\u3002\n\n![ExampleCheckerboard.png](https://docs.unity3d.com/cn/2022.1/uploads/SL/ExampleCheckerboard.png)\n\n#### \u4e09\u9762\u7eb9\u7406\n\n\u5bf9\u4e8e\u590d\u6742\u7f51\u683c\u6216\u7a0b\u5e8f\u5316\u7f51\u683c\uff0c\u4e0d\u4f7f\u7528\u5e38\u89c4 UV \u5750\u6807\u5bf9\u5b83\u4eec\u8fdb\u884c\u7eb9\u7406\u5316\uff0c\u6709\u65f6\u53ea\u9700\u5728\u4e09\u4e2a\u4e3b\u65b9\u5411\u5c06\u7eb9\u7406\u201c\u6295\u5f71\u201d\u5230\u5bf9\u8c61\u4e0a\u5373\u53ef\u3002\u8fd9\u79f0\u4e3a\u201c\u4e09\u9762\u201d\u7eb9\u7406\u3002\u8fd9\u4e2a\u60f3\u6cd5\u662f\u4f7f\u7528\u8868\u9762\u6cd5\u7ebf\u6765\u52a0\u6743\u4e09\u4e2a\u7eb9\u7406\u65b9\u5411\u3002\u4e0b\u9762\u662f\u7740\u8272\u5668\uff1a\n\n")),(0,l.kt)("p",null,'Shader "Unlit/Triplanar"\n{\nProperties\n{\n_MainTex ("Texture", 2D) = "white" {}\n_Tiling ("Tiling", Float) = 1.0\n_OcclusionMap("Occlusion", 2D) = "white" {}\n}\nSubShader\n{\nPass\n{\nCGPROGRAM\n#pragma vertex vert\n#pragma fragment frag\n#include "UnityCG.cginc"'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"        struct v2f\n        {\n            half3 objNormal : TEXCOORD0;\n            float3 coords : TEXCOORD1;\n            float2 uv : TEXCOORD2;\n            float4 pos : SV_POSITION;\n        };\n\n        float _Tiling;\n\n        v2f vert (float4 pos : POSITION, float3 normal : NORMAL, float2 uv : TEXCOORD0)\n        {\n            v2f o;\n            o.pos = UnityObjectToClipPos(pos);\n            o.coords = pos.xyz * _Tiling;\n            o.objNormal = normal;\n            o.uv = uv;\n            return o;\n        }\n\n        sampler2D _MainTex;\n        sampler2D _OcclusionMap;\n        \n        fixed4 frag (v2f i) : SV_Target\n        {\n            // \u4f7f\u7528\u6cd5\u7ebf\u7684\u7edd\u5bf9\u503c\u4f5c\u4e3a\u7eb9\u7406\u6743\u91cd\n            half3 blend = abs(i.objNormal);\n            // \u786e\u4fdd\u6743\u91cd\u4e4b\u548c\u4e3a 1\uff08\u9664\u4ee5 x+y+z \u4e4b\u548c\uff09\n            blend /= dot(blend,1.0);\n            // \u9488\u5bf9 x\u3001y\u3001z \u8f74\u8bfb\u53d6\u4e09\u4e2a\u7eb9\u7406\u6295\u5f71\n            fixed4 cx = tex2D(_MainTex, i.coords.yz);\n            fixed4 cy = tex2D(_MainTex, i.coords.xz);\n            fixed4 cz = tex2D(_MainTex, i.coords.xy);\n            // \u6839\u636e\u6743\u91cd\u6df7\u5408\u7eb9\u7406\n            fixed4 c = cx * blend.x + cy * blend.y + cz * blend.z;\n            // \u6839\u636e\u5e38\u89c4\u906e\u6321\u8d34\u56fe\u8fdb\u884c\u8c03\u5236\n            c *= tex2D(_OcclusionMap, i.uv);\n            return c;\n        }\n        ENDCG\n    }\n}\n")),(0,l.kt)("p",null,"}"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n![ExampleTriPlanar.png](https://docs.unity3d.com/cn/2022.1/uploads/SL/ExampleTriPlanar.png)\n\n## \u5149\u7167\u8ba1\u7b97\n\n\u901a\u5e38\uff0c\u5f53\u60a8\u9700\u8981\u9002\u7528\u4e8e Unity \u5149\u7167\u7ba1\u7ebf\u7684\u7740\u8272\u5668\u65f6\uff0c \u53ef\u4ee5\u7f16\u5199[\u8868\u9762\u7740\u8272\u5668][26]\u3002\u8fd9\u6837\u4f1a\u4e3a\u60a8\u5b8c\u6210\u5927\u90e8\u5206\u201c\u7e41\u91cd\u7684\u5de5\u4f5c\u201d\uff0c \u60a8\u7684\u7740\u8272\u5668\u4ee3\u7801\u53ea\u9700\u8981\u5b9a\u4e49\u8868\u9762\u5c5e\u6027\u3002\n\n\u4f46\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u60a8\u5e0c\u671b\u7ed5\u8fc7\u6807\u51c6\u8868\u9762\u7740\u8272\u5668\u8def\u5f84\uff1b \u6216\u8005\u662f\u51fa\u4e8e\u6027\u80fd\u539f\u56e0\uff0c\u60a8\u53ea\u60f3\u652f\u6301\u6574\u4e2a\u5149\u7167\u7ba1\u7ebf\u7684\u67d0\u4e2a\u6709\u9650\u5b50\u96c6\uff0c \u6216\u8005\u60a8\u60f3\u8981\u8fdb\u884c\u201c\u6807\u51c6\u5149\u7167\u201d\u4ee5\u5916\u7684\u81ea\u5b9a\u4e49\u3002\u4ee5\u4e0b\u793a\u4f8b \u5c06\u8bf4\u660e\u5982\u4f55\u4ece\u624b\u52a8\u7f16\u5199\u7684\u9876\u70b9\u548c\u7247\u5143\u7740\u8272\u5668\u83b7\u53d6\u5149\u7167\u6570\u636e\u3002 \u67e5\u770b\u8868\u9762\u7740\u8272\u5668\u751f\u6210\u7684\u4ee3\u7801\uff08\u901a\u8fc7[\u7740\u8272\u5668\u68c0\u89c6\u9762\u677f][27]\uff09\u4e5f\u662f\u4e00\u79cd \u5f88\u597d\u7684\u5b66\u4e60\u8d44\u6e90\u3002\n\n#### \u7b80\u5355\u7684\u6f2b\u5c04\u5149\u7167\n\n\u6211\u4eec\u9700\u8981\u505a\u7684\u7b2c\u4e00\u4ef6\u4e8b\u5c31\u662f\u6307\u51fa\u6211\u4eec\u7684\u7740\u8272\u5668\u786e\u5b9e\u9700\u8981\u4f20\u9012\u7ed9\u5b83\u7684\u5149\u7167\u4fe1\u606f\u3002Unity \u7684[\u6e32\u67d3\u7ba1\u7ebf][28]\u652f\u6301\u5404\u79cd\u6e32\u67d3\u65b9\u5f0f\uff1b\u8fd9\u91cc\u6211\u4eec\u5c06\u4f7f\u7528\u9ed8\u8ba4\u7684[\u524d\u5411\u6e32\u67d3][29]\u3002\n\n\u6211\u4eec\u9996\u5148\u53ea\u652f\u6301\u4e00\u4e2a\u65b9\u5411\u5149\u3002Unity \u4e2d\u7684\u524d\u5411\u6e32\u67d3\u7684\u5de5\u4f5c\u65b9\u5f0f\u662f\u5728\u4e00\u4e2a\u540d\u4e3a** ForwardBase **\u7684\u5355\u4e2a\u901a\u9053\u4e2d\u6e32\u67d3\u4e3b\u65b9\u5411\u5149\u3001\u73af\u5883\u5149\u3001\u5149\u7167\u8d34\u56fe\u548c\u53cd\u5c04\u3002\u5728\u7740\u8272\u5668\u4e2d\uff0c\u901a\u8fc7\u6dfb\u52a0\u4ee5\u4e0b[\u901a\u9053\u6807\u7b7e][30]\u6765\u6307\u793a\u8fd9\u4e00\u60c5\u51b5\uff1a** Tags {\u201cLightMode\u201d=\u201cForwardBase\u201d} **\u3002\u8fd9\u5c06\u4f7f\u65b9\u5411\u5149\u6570\u636e\u901a\u8fc7\u4e00\u4e9b[\u5185\u7f6e\u53d8\u91cf][31]\u4f20\u5165\u7740\u8272\u5668\u3002\n\n\u4ee5\u4e0b\u7740\u8272\u5668\u4e3a\u6bcf\u4e2a\u9876\u70b9\u8ba1\u7b97\u7b80\u5355\u6f2b\u5c04\u5149\u7167\uff0c\u5e76\u4f7f\u7528\u5355\u4e2a\u4e3b\u7eb9\u7406\uff1a\n\n")),(0,l.kt)("p",null,'Shader "Lit/Simple Diffuse"\n{\nProperties\n{\n',"[NoScaleOffset]",' _MainTex ("Texture", 2D) = "white" {}\n}\nSubShader\n{\nPass\n{\n// \u6307\u793a\u6211\u4eec\u7684\u901a\u9053\u662f\u524d\u5411\u6e32\u67d3\u7ba1\u7ebf\u4e2d\u7684\n// "\u57fa\u7840" \u901a\u9053\u3002\u5b83\u53ef\u8bbe\u7f6e\u73af\u5883\u5149\u548c\u4e3b\n// \u65b9\u5411\u5149\u6570\u636e\uff1b\u5149\u7ebf\u65b9\u5411\u4e3a _WorldSpaceLightPos0\n// \u800c\u989c\u8272\u4e3a _LightColor0\nTags {"LightMode"="ForwardBase"}'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'        CGPROGRAM\n        #pragma vertex vert\n        #pragma fragment frag\n        #include "UnityCG.cginc" // \u5bf9\u4e8e UnityObjectToWorldNormal\n        #include "UnityLightingCommon.cginc" // \u5bf9\u4e8e _LightColor0\n\n        struct v2f\n        {\n            float2 uv : TEXCOORD0;\n            fixed4 diff : COLOR0; // \u6f2b\u5c04\u5149\u7167\u989c\u8272\n            float4 vertex : SV_POSITION;\n        };\n\n        v2f vert (appdata_base v)\n        {\n            v2f o;\n            o.vertex = UnityObjectToClipPos(v.vertex);\n            o.uv = v.texcoord;\n            // \u5728\u4e16\u754c\u7a7a\u95f4\u4e2d\u83b7\u53d6\u9876\u70b9\u6cd5\u7ebf\n            half3 worldNormal = UnityObjectToWorldNormal(v.normal);\n            // \u6807\u51c6\u6f2b\u5c04\uff08\u5170\u4f2f\u7279\uff09\u5149\u7167\u7684\u6cd5\u7ebf\u548c\n            // \u5149\u7ebf\u65b9\u5411\u4e4b\u95f4\u7684\u70b9\u79ef\n            half nl = max(0, dot(worldNormal, _WorldSpaceLightPos0.xyz));\n            // \u8003\u8651\u6d45\u8272\u56e0\u7d20\n            o.diff = nl * _LightColor0;\n            return o;\n        }\n        \n        sampler2D _MainTex;\n\n        fixed4 frag (v2f i) : SV_Target\n        {\n            // \u6837\u672c\u7eb9\u7406\n            fixed4 col = tex2D(_MainTex, i.uv);\n            // \u4e58\u4ee5\u5149\u7167\n            col *= i.diff;\n            return col;\n        }\n        ENDCG\n    }\n}\n')),(0,l.kt)("p",null,"}"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n\u8fd9\u4f7f\u5f97\u5bf9\u8c61\u5bf9\u5149\u7ebf\u65b9\u5411\u4f5c\u51fa\u53cd\u5e94\uff1a\u9762\u5411\u5149\u6e90\u7684\u90e8\u5206\u83b7\u5f97\u5149\u7167\uff0c\u800c\u80cc\u5411\u7684\u90e8\u5206\u5b8c\u5168\u6ca1\u6709\u5149\u7167\u3002\n\n![ExampleDiffuseLighting.png](https://docs.unity3d.com/cn/2022.1/uploads/SL/ExampleDiffuseLighting.png)\n\n#### \u5e26\u73af\u5883\u5149\u7684\u6f2b\u5c04\u5149\u7167\n\n\u4e0a\u9762\u7684\u793a\u4f8b\u4e0d\u8003\u8651\u4efb\u4f55\u73af\u5883\u5149\u7167\u6216\u5149\u7167\u63a2\u9488\u3002\u6211\u4eec\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff01 \u4e8b\u5b9e\u8bc1\u660e\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u4e00\u884c\u4ee3\u7801\u6765\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\u3002\u73af\u5883\u5149\u548c[\u5149\u7167\u63a2\u9488][32]\u6570\u636e\u90fd\u4ee5\u7403\u8c10\u51fd\u6570\u5f62\u5f0f\u4f20\u9012\u7ed9\u7740\u8272\u5668\uff0c** UnityCG.cginc **[include \u6587\u4ef6][33] \u4e2d\u7684** ShadeSH9 **\u51fd\u6570\u5728\u7ed9\u5b9a\u4e16\u754c\u7a7a\u95f4\u6cd5\u7ebf\u7684\u60c5\u51b5\u4e0b\u5b8c\u6210\u6240\u6709\u4f30\u7b97\u5de5\u4f5c\u3002\n\n")),(0,l.kt)("p",null,'Shader "Lit/Diffuse With Ambient"\n{\nProperties\n{\n',"[NoScaleOffset]",' _MainTex ("Texture", 2D) = "white" {}\n}\nSubShader\n{\nPass\n{\nTags {"LightMode"="ForwardBase"}'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'        CGPROGRAM\n        #pragma vertex vert\n        #pragma fragment frag\n        #include "UnityCG.cginc"\n        #include "UnityLightingCommon.cginc"\n\n        struct v2f\n        {\n            float2 uv : TEXCOORD0;\n            fixed4 diff : COLOR0;\n            float4 vertex : SV_POSITION;\n        };\n\n        v2f vert (appdata_base v)\n        {\n            v2f o;\n            o.vertex = UnityObjectToClipPos(v.vertex);\n            o.uv = v.texcoord;\n            half3 worldNormal = UnityObjectToWorldNormal(v.normal);\n            half nl = max(0, dot(worldNormal, _WorldSpaceLightPos0.xyz));\n            o.diff = nl * _LightColor0;\n\n            // \u4e0e\u5148\u524d\u7740\u8272\u5668\u7684\u552f\u4e00\u533a\u522b\uff1a\n            // \u9664\u4e86\u6765\u81ea\u4e3b\u5149\u6e90\u7684\u6f2b\u5c04\u5149\u7167\uff0c\n            // \u8fd8\u53ef\u6dfb\u52a0\u6765\u81ea\u73af\u5883\u6216\u5149\u7167\u63a2\u9488\u7684\u5149\u7167\n            // \u6765\u81ea UnityCG.cginc \u7684 ShadeSH9 \u51fd\u6570\u4f7f\u7528\u4e16\u754c\u7a7a\u95f4\u6cd5\u7ebf\n            // \u5bf9\u5176\u8fdb\u884c\u4f30\u7b97\n            o.diff.rgb += ShadeSH9(half4(worldNormal,1));\n            return o;\n        }\n        \n        sampler2D _MainTex;\n\n        fixed4 frag (v2f i) : SV_Target\n        {\n            fixed4 col = tex2D(_MainTex, i.uv);\n            col *= i.diff;\n            return col;\n        }\n        ENDCG\n    }\n}\n')),(0,l.kt)("p",null,"}"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n\u4e8b\u5b9e\u4e0a\uff0c\u8fd9\u4e2a\u7740\u8272\u5668\u5f00\u59cb\u770b\u8d77\u6765\u975e\u5e38\u7c7b\u4f3c\u4e8e\u5185\u7f6e\u7684[\u65e7\u7248\u6f2b\u5c04][34]\u7740\u8272\u5668\uff01\n\n![ExampleDiffuseAmbientLighting.png](https://docs.unity3d.com/cn/2022.1/uploads/SL/ExampleDiffuseAmbientLighting.png)\n\n#### \u5b9e\u73b0\u9634\u5f71\u6295\u5c04\n\n\u6211\u4eec\u7684\u7740\u8272\u5668\u76ee\u524d\u65e2\u4e0d\u80fd\u63a5\u53d7\u4e5f\u4e0d\u80fd\u6295\u5c04\u9634\u5f71\u3002\u8ba9\u6211\u4eec\u5148\u5b9e\u73b0\u9634\u5f71\u6295\u5c04\u3002\n\n\u4e3a\u4e86\u6295\u5c04\u9634\u5f71\uff0c\u7740\u8272\u5668\u5fc5\u987b\u5728\u5176\u4efb\u4f55[\u5b50\u7740\u8272\u5668][35]\u6216\u4efb\u4f55[\u56de\u9000][36]\u4e2d\u5177\u6709** ShadowCaster **[\u901a\u9053\u7c7b\u578b][37]\u3002ShadowCaster \u901a\u9053\u7528\u4e8e\u5c06\u5bf9\u8c61\u6e32\u67d3\u5230\u9634\u5f71\u8d34\u56fe\u4e2d\uff0c\u901a\u5e38\u5b83\u975e\u5e38\u7b80\u5355\uff1a\u9876\u70b9\u7740\u8272\u5668\u53ea\u9700\u8981\u4f30\u7b97\u9876\u70b9\u4f4d\u7f6e\uff0c\u7247\u5143\u7740\u8272\u5668\u51e0\u4e4e\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\u3002\u9634\u5f71\u8d34\u56fe\u53ea\u662f\u6df1\u5ea6\u7f13\u51b2\u533a\uff0c\u56e0\u6b64\u5373\u4f7f\u662f\u7247\u5143\u7740\u8272\u5668\u8f93\u51fa\u7684\u989c\u8272\u4e5f\u65e0\u5173\u7d27\u8981\u3002\n\n\u8fd9\u610f\u5473\u7740\u5bf9\u4e8e\u8bb8\u591a\u7740\u8272\u5668\uff0c\u9634\u5f71\u6295\u5c04\u7269\u901a\u9053\u51e0\u4e4e\u5b8c\u5168\u76f8\u540c\uff08\u9664\u975e\u5bf9\u8c61\u5177\u6709\u57fa\u4e8e\u81ea\u5b9a\u4e49\u9876\u70b9\u7740\u8272\u5668\u7684\u53d8\u5f62\uff0c\u6216\u8005\u5177\u6709 Alpha \u9542\u7a7a/\u534a\u900f\u660e\u90e8\u5206\uff09\u3002\u6700\u7b80\u5355\u7684\u6355\u6349\u65b9\u6cd5\u662f\u4f7f\u7528\u7740\u8272\u5668\u547d\u4ee4 [UsePass][38]\uff1a\n\n")),(0,l.kt)("p",null,'Pass\n{\n// \u5e38\u89c4\u5149\u7167\u901a\u9053\n}\n// \u901a\u8fc7 VertexLit \u5185\u7f6e\u7740\u8272\u5668\u6355\u6349\u9634\u5f71\u6295\u5c04\u7269\nUsePass "Legacy Shaders/VertexLit/SHADOWCASTER"'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n\u4f46\u6211\u4eec\u5728\u8fd9\u91cc\u662f\u4e3a\u4e86\u5b66\u4e60\uff0c\u6240\u4ee5\u8ba9\u6211\u4eec\u901a\u8fc7\u201c\u624b\u52a8\u201d\u65b9\u5f0f\u5b9e\u73b0\u76f8\u540c\u6548\u679c\u3002\u4e3a\u4e86\u7f29\u77ed\u4ee3\u7801\u957f\u5ea6\uff0c \u6211\u4eec\u5df2\u7ecf\u5c06\u5149\u7167\u901a\u9053 (\u201cForwardBase\u201d) \u66ff\u6362\u4e3a\u4ec5\u6267\u884c\u65e0\u7eb9\u7406\u73af\u5883\u5149\u7684\u4ee3\u7801\u3002\u5728\u5b83\u4e0b\u9762\uff0c\u6709\u4e00\u4e2a\u201cShadowCaster\u201d\u901a\u9053\uff0c\u8ba9\u5bf9\u8c61\u80fd\u591f\u652f\u6301\u9634\u5f71\u6295\u5c04\u3002\n\n")),(0,l.kt)("p",null,'Shader "Lit/Shadow Casting"\n{\nSubShader\n{\n// \u975e\u5e38\u7b80\u5355\u7684\u5149\u7167\u901a\u9053\uff0c\u4ec5\u5904\u7406\u975e\u7eb9\u7406\u73af\u5883\nPass\n{\nTags {"LightMode"="ForwardBase"}\nCGPROGRAM\n#pragma vertex vert\n#pragma fragment frag\n#include "UnityCG.cginc"\nstruct v2f\n{\nfixed4 diff : COLOR0;\nfloat4 vertex : SV_POSITION;\n};\nv2f vert (appdata_base v)\n{\nv2f o;\no.vertex = UnityObjectToClipPos(v.vertex);\nhalf3 worldNormal = UnityObjectToWorldNormal(v.normal);\n// \u4ec5\u4f30\u7b97\u73af\u5883\u5149\no.diff.rgb = ShadeSH9(half4(worldNormal,1));\no.diff.a = 1;\nreturn o;\n}\nfixed4 frag (v2f i) : SV_Target\n{\nreturn i.diff;\n}\nENDCG\n}'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'    // \u9634\u5f71\u6295\u5c04\u7269\u6e32\u67d3\u901a\u9053\uff0c\n    // \u4f7f\u7528 UnityCG.cginc \u4e2d\u7684\u5b8f\u624b\u52a8\u5b9e\u73b0\n    Pass\n    {\n        Tags {"LightMode"="ShadowCaster"}\n\n        CGPROGRAM\n        #pragma vertex vert\n        #pragma fragment frag\n        #pragma multi_compile_shadowcaster\n        #include "UnityCG.cginc"\n\n        struct v2f { \n            V2F_SHADOW_CASTER;\n        };\n\n        v2f vert(appdata_base v)\n        {\n            v2f o;\n            TRANSFER_SHADOW_CASTER_NORMALOFFSET(o)\n            return o;\n        }\n\n        float4 frag(v2f i) : SV_Target\n        {\n            SHADOW_CASTER_FRAGMENT(i)\n        }\n        ENDCG\n    }\n}\n')),(0,l.kt)("p",null,"}"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n\u73b0\u5728\u4e0b\u65b9\u6709\u4e00\u4e2a\u5e73\u9762\uff0c\u4f7f\u7528\u5e38\u89c4\u7684\u5185\u7f6e\u6f2b\u5c04\u7740\u8272\u5668\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u770b\u5230 \u6211\u4eec\u7684\u9634\u5f71\u751f\u6548\uff08\u8bf7\u8bb0\u4f4f\uff0c\u6211\u4eec\u5f53\u524d\u7684\u7740\u8272\u5668\u8fd8\u4e0d\u652f\u6301\\_\u63a5\u53d7\\_\u9634\u5f71\uff01\uff09\u3002\n\n![ExampleShadowCasting.png](https://docs.unity3d.com/cn/2022.1/uploads/SL/ExampleShadowCasting.png)\n\n\u6211\u4eec\u4f7f\u7528\u4e86** #pragma multi\\_compile\\_shadowcaster **\u6307\u4ee4\u3002\u8fd9\u4f1a\u5bfc\u81f4\u7740\u8272\u5668\u88ab\u7f16\u8bd1\u4e3a\u591a\u4e2a\u53d8\u4f53\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u53d8\u4f53\u5b9a\u4e49\u4e86\u4e0d\u540c\u7684\u9884\u5904\u7406\u5668\u5b8f\uff08\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 [\u591a\u4e2a\u7740\u8272\u5668\u53d8\u4f53][39]\u9875\u9762\uff09\u3002\u6e32\u67d3\u5230\u9634\u5f71\u8d34\u56fe\u65f6\uff0c\u70b9\u5149\u6e90\u4e0e\u5176\u4ed6\u5149\u6e90\u7c7b\u578b\u9700\u8981\u7740\u8272\u5668\u4ee3\u7801\u7565\u6709\u4e0d\u540c\uff0c\u8fd9\u5c31\u662f\u9700\u8981\u6b64\u6307\u4ee4\u7684\u539f\u56e0\u3002\n\n#### \u63a5\u53d7\u9634\u5f71\n\nImplementing support for receiving shadows will require compiling the base lighting pass into several variants, to handle cases of \u201cdirectional light without shadows\u201d and \u201cdirectional light with shadows\u201d properly.** #pragma multi\\_compile\\_fwdbase **directive does this (see [multiple shader variants][40] for details). In fact it does a lot more: it also compiles variants for the different lightmap types, Enlighten Realtime Global Illumination being on or off etc. Currently we don\u2019t need all that, so we\u2019ll explicitly skip these variants.\n\n\u7136\u540e\uff0c\u4e3a\u4e86\u83b7\u5f97\u5b9e\u9645\u7684\u9634\u5f71\u8ba1\u7b97\uff0c\u6211\u4eec\u5c06** #include \u201cAutoLight.cginc\u201d** \u7740\u8272\u5668\u7684 [include \u6587\u4ef6][41] \u5e76\u4f7f\u7528\u8be5\u6587\u4ef6\u4e2d\u7684 SHADOW\\_COORDS\u3001TRANSFER\\_SHADOW \u548c SHADOW\\_ATTENUATION \u5b8f\u3002\n\n\u4e0b\u9762\u662f\u7740\u8272\u5668\uff1a\n\n")),(0,l.kt)("p",null,'Shader "Lit/Diffuse With Shadows"\n{\nProperties\n{\n',"[NoScaleOffset]",' _MainTex ("Texture", 2D) = "white" {}\n}\nSubShader\n{\nPass\n{\nTags {"LightMode"="ForwardBase"}\nCGPROGRAM\n#pragma vertex vert\n#pragma fragment frag\n#include "UnityCG.cginc"\n#include "Lighting.cginc"'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'        // \u5c06\u7740\u8272\u5668\u7f16\u8bd1\u6210\u591a\u4e2a\u6709\u9634\u5f71\u548c\u6ca1\u6709\u9634\u5f71\u7684\u53d8\u4f53\n        //\uff08\u6211\u4eec\u8fd8\u4e0d\u5173\u5fc3\u4efb\u4f55\u5149\u7167\u8d34\u56fe\uff0c\u6240\u4ee5\u8df3\u8fc7\u8fd9\u4e9b\u53d8\u4f53\uff09\n        #pragma multi_compile_fwdbase nolightmap nodirlightmap nodynlightmap novertexlight\n        // \u9634\u5f71 helper \u51fd\u6570\u548c\u5b8f\n        #include "AutoLight.cginc"\n\n        struct v2f\n        {\n            float2 uv : TEXCOORD0;\n            SHADOW_COORDS(1) // \u5c06\u9634\u5f71\u6570\u636e\u653e\u5165 TEXCOORD1\n            fixed3 diff : COLOR0;\n            fixed3 ambient : COLOR1;\n            float4 pos : SV_POSITION;\n        };\n        v2f vert (appdata_base v)\n        {\n            v2f o;\n            o.pos = UnityObjectToClipPos(v.vertex);\n            o.uv = v.texcoord;\n            half3 worldNormal = UnityObjectToWorldNormal(v.normal);\n            half nl = max(0, dot(worldNormal, _WorldSpaceLightPos0.xyz));\n            o.diff = nl * _LightColor0.rgb;\n            o.ambient = ShadeSH9(half4(worldNormal,1));\n            // \u8ba1\u7b97\u9634\u5f71\u6570\u636e\n            TRANSFER_SHADOW(o)\n            return o;\n        }\n\n        sampler2D _MainTex;\n\n        fixed4 frag (v2f i) : SV_Target\n        {\n            fixed4 col = tex2D(_MainTex, i.uv);\n            // \u8ba1\u7b97\u9634\u5f71\u8870\u51cf\uff081.0 = \u5b8c\u5168\u7167\u4eae\uff0c0.0 = \u5b8c\u5168\u9634\u5f71\uff09\n            fixed shadow = SHADOW_ATTENUATION(i);\n            // \u7528\u9634\u5f71\u4f7f\u5149\u7167\u53d8\u6697\uff0c\u4fdd\u6301\u73af\u5883\u4e0d\u53d8\n            fixed3 lighting = i.diff * shadow + i.ambient;\n            col.rgb *= lighting;\n            return col;\n        }\n        ENDCG\n    }\n\n    // \u9634\u5f71\u6295\u5c04\u652f\u6301\n    UsePass "Legacy Shaders/VertexLit/SHADOWCASTER"\n}\n')),(0,l.kt)("p",null,"}"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n\u770b\u770b\uff0c\u73b0\u5728\u6211\u4eec\u5b9e\u73b0\u4e86\u9634\u5f71\uff01\n\n![ExampleShadowReceiving.png](https://docs.unity3d.com/cn/2022.1/uploads/SL/ExampleShadowReceiving.png)\n\n## \u5176\u4ed6\u7740\u8272\u5668\u793a\u4f8b\n\n### Fog\n\n")),(0,l.kt)("p",null,'Shader "Custom/TextureCoordinates/Fog" {\nSubShader {\nPass {\nCGPROGRAM\n#pragma vertex vert\n#pragma fragment frag'),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'        //\u7f16\u8bd1\u96fe\u6548\u53d8\u5316\u65f6\u9700\u8981\u3002\n        #pragma multi_compile_fog\n\n        #include "UnityCG.cginc"\n\n        struct vertexInput {\n            float4 vertex : POSITION;\n            float4 texcoord0 : TEXCOORD0;\n        };\n\n        struct fragmentInput{\n            float4 position : SV_POSITION;\n            float4 texcoord0 : TEXCOORD0;\n            \n            //\u7528\u4e8e\u4f20\u9012\u96fe\u91cf\uff0c\u6570\u5b57\u5e94\u4e3a\u81ea\u7531\u7eb9\u7406\u5750\u6807\u503c\u3002\n            UNITY_FOG_COORDS(1)\n        };\n\n        fragmentInput vert(vertexInput i){\n            fragmentInput o;\n            o.position = UnityObjectToClipPos(i.vertex);\n            o.texcoord0 = i.texcoord0;\n            \n            //\u4ece\u88c1\u526a\u7a7a\u95f4\u4f4d\u7f6e\u8ba1\u7b97\u96fe\u91cf\u3002\n            UNITY_TRANSFER_FOG(o,o.position);\n            return o;\n        }\n\n        fixed4 frag(fragmentInput i) : SV_Target {\n            fixed4 color = fixed4(i.texcoord0.xy,0,0);\n            \n            //\u5e94\u7528\u96fe\u6548\uff08\u81ea\u52a8\u5904\u7406\u9644\u52a0\u901a\u9053\uff09\n            UNITY_APPLY_FOG(i.fogCoord, color); \n            \n            //\u5904\u7406\u53ef\u80fd\u7684\u53e6\u4e00\u79cd\u81ea\u5b9a\u4e49\u96fe\u6548\u989c\u8272\u9009\u9879\n            //#ifdef UNITY_PASS_FORWARDADD\n            //  UNITY_APPLY_FOG_COLOR(i.fogCoord, color, float4(0,0,0,0));\n            //#else\n            //  fixed4 myCustomColor = fixed4(0,0,1,0);\n            //  UNITY_APPLY_FOG_COLOR(i.fogCoord, color, myCustomColor);\n            //#endif\n            \n            return color;\n        }\n        ENDCG\n    }\n}\n')),(0,l.kt)("p",null,"}"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n[1]: /doc-unity-manual/docs/shader-writing\n[2]: /doc-unity-manual/docs/materials\n[3]: /doc-unity-manual/docs/shaders\n[4]: /doc-unity-manual/docs/sl-surface-shaders\n[5]: /doc-unity-manual/docs/comp-mesh-group/class-mesh-renderer\n[6]: /doc-unity-manual/docs/sl-shader\n[7]: /doc-unity-manual/docs/materials/class-material\n[8]: /doc-unity-manual/docs/sl-shader/sl-properties\n[9]: /doc-unity-manual/docs/sl-sub-shader\n[10]: /doc-unity-manual/docs/sl-pass\n[11]: /doc-unity-manual/docs/sl-surface-shaders/sl-render-pipeline\n[12]: /doc-unity-manual/docs/sl-shader-programs\n[13]: /doc-unity-manual/docs/sl-shader-programs/sl-shader-semantics\n[14]: /doc-unity-manual/docs/sl-shader-programs/sl-builtin-includes\n[15]: /doc-unity-manual/docs/sl-shader-programs/sl-shader-semantics\n[16]: /doc-unity-manual/docs/built-in-shader-examples/built-in-shader-examples-vertex-data\n[17]: /doc-unity-manual/docs/sky/class-skybox\n[18]: /doc-unity-manual/docs/lighting-overview/lighting-window\n[19]: /doc-unity-manual/docs/reflection-probes/class-reflection-probe\n[20]: /doc-unity-manual/docs/textures/class-cubemap\n[21]: /doc-unity-manual/docs/sl-surface-shaders\n[22]: /doc-unity-manual/docs/sl-shader-programs/sl-builtin-includes\n[23]: /doc-unity-manual/docs/sl-shader-programs/sl-unity-shader-variables\n[24]: /doc-unity-manual/docs/sl-shader-programs/sl-builtin-macros\n[25]: /doc-unity-manual/docs/sl-shader/sl-properties\n[26]: /doc-unity-manual/docs/sl-surface-shaders\n[27]: /doc-unity-manual/docs/shaders-overview/class-shader\n[28]: /doc-unity-manual/docs/sl-surface-shaders/sl-render-pipeline\n[29]: /doc-unity-manual/docs/rendering-paths/render-tech-forward-rendering\n[30]: /doc-unity-manual/docs/sl-pass/sl-pass-tags\n[31]: /doc-unity-manual/docs/sl-shader-programs/sl-unity-shader-variables\n[32]: /doc-unity-manual/docs/light-probes\n[33]: /doc-unity-manual/docs/sl-shader-programs/sl-builtin-includes\n[34]: /doc-unity-manual/docs/shader-normal-family/shader-normal-diffuse\n[35]: /doc-unity-manual/docs/sl-sub-shader\n[36]: /doc-unity-manual/docs/sl-shader/sl-fallback\n[37]: /doc-unity-manual/docs/sl-pass/sl-pass-tags\n[38]: /doc-unity-manual/docs/shader-shaderlab-commands/sl-use-pass\n[39]: /doc-unity-manual/docs/shader-preprocessor-directives/sl-multiple-program-variants\n[40]: /doc-unity-manual/docs/shader-preprocessor-directives/sl-multiple-program-variants\n[41]: /doc-unity-manual/docs/sl-shader-programs/sl-builtin-includes\n")))}m.isMDXComponent=!0}}]);