"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[28278],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return h}});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),m=p(a),h=r,d=m["".concat(l,".").concat(h)]||m[h]||c[h]||s;return a?n.createElement(d,i(i({ref:t},u),{},{components:a})):n.createElement(d,i({ref:t},u))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=a.length,i=new Array(s);i[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var p=2;p<s;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2013:function(e,t,a){a.r(t),a.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return c}});var n=a(87462),r=a(63366),s=(a(67294),a(3905)),i=["components"],o={id:"search-expressions",title:"Search expressions",slug:"/search-expressions"},l="Search expressions",p={unversionedId:"search-overview/search-expressions/search-expressions",id:"search-overview/search-expressions/search-expressions",title:"Search expressions",description:"Search expressions allow you to add to the search query language to express complex queries that cross-reference multiple providers, for example, to search for all objects in a scene that use a shader that doesn\u2019t compile.",source:"@site/docs/search-overview/search-expressions/search-expressions.md",sourceDirName:"search-overview/search-expressions",slug:"/search-expressions",permalink:"/doc-unity-manual/docs/search-expressions",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/search-overview/search-expressions/search-expressions.md",tags:[],version:"current",frontMatter:{id:"search-expressions",title:"Search expressions",slug:"/search-expressions"},sidebar:"tutorialSidebar",previous:{title:"Performing a search",permalink:"/doc-unity-manual/docs/api/api-searching"},next:{title:"Functions reference",permalink:"/doc-unity-manual/docs/search-expressions/search-expression-functions-ref"}},u={},c=[{value:"How to use search expressions",id:"how-to-use-search-expressions",level:2},{value:"Create a search expression",id:"create-a-search-expression",level:2},{value:"Functions",id:"functions",level:2},{value:"Literals in search expressions",id:"literals-in-search-expressions",level:2},{value:"Number",id:"number",level:3},{value:"Set",id:"set",level:3},{value:"String",id:"string",level:3},{value:"Property selectors and search item values",id:"property-selectors-and-search-item-values",level:2},{value:"Name search expressions (alias)",id:"name-search-expressions-alias",level:2},{value:"Expand operator",id:"expand-operator",level:2},{value:"Search expression examples",id:"search-expression-examples",level:2},{value:"Expression evaluation",id:"expression-evaluation",level:2}],m={toc:c};function h(e){var t=e.components,a=(0,r.Z)(e,i);return(0,s.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"search-expressions"},"Search expressions"),(0,s.kt)("p",null,"Search expressions allow you to add to the search query language to express complex queries that cross-reference multiple providers, for example, to search for all objects in a scene that use a shader that doesn\u2019t compile."),(0,s.kt)("p",null,"Search expressions can be chained together to transform or perform set manipulations on Search Items."),(0,s.kt)("h2",{id:"how-to-use-search-expressions"},"How to use search expressions"),(0,s.kt)("p",null,"Enter a search expression in the  ",(0,s.kt)("strong",{parentName:"p"},"Search"),"  window to return a result:"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/search-expression-tab.png",alt:"search-expression-tab.png"})),(0,s.kt)("h2",{id:"create-a-search-expression"},"Create a search expression"),(0,s.kt)("p",null,"A search expression starts with a root expression that can contain inner expressions."),(0,s.kt)("p",null,"A simple query like ",(0,s.kt)("inlineCode",{parentName:"p"},"t:shader")," is an expression. It returns all of the Search Items corresponding to shaders in your project."),(0,s.kt)("p",null,"Use the search expression language to combine ",(0,s.kt)("em",{parentName:"p"},"multiple queries")," into a single expression to create more flexible searches."),(0,s.kt)("p",null,"Search expressions support the following: - query: ",(0,s.kt)("inlineCode",{parentName:"p"},"t:shader")," - query with a nested expression: ",(0,s.kt)("inlineCode",{parentName:"p"},"t:prefab ref={t:texture}")," - function: ",(0,s.kt)("inlineCode",{parentName:"p"},"count{t:shader}")," - literal: ",(0,s.kt)("inlineCode",{parentName:"p"},"3")," or ",(0,s.kt)("inlineCode",{parentName:"p"},'"this is a string literal"')," - property selector: ",(0,s.kt)("inlineCode",{parentName:"p"},"@path or @mesh")," (any identifier beginning with ",(0,s.kt)("inlineCode",{parentName:"p"},"@")," is assumed to be a selector that extracts a value from a Search Item. Selectors can find properties of an Object or be used to compute results dynamically)"),(0,s.kt)("p",null,"All search expressions return a set of Search Items (",(0,s.kt)("inlineCode",{parentName:"p"},"IEnumerable&lt;SearchItem&gt;"),"). As a general guideline, the search expression language uses curly braces ",(0,s.kt)("inlineCode",{parentName:"p"},"{}")," to denote a set of items. Even literal expressions such as ",(0,s.kt)("inlineCode",{parentName:"p"},"3")," are evaluated internally as a set : ",(0,s.kt)("inlineCode",{parentName:"p"},"{3}"),"."),(0,s.kt)("p",null,"Search expressions can be chained together to make more complex queries:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"t:prefab ref={t:texture}"),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"The ",(0,s.kt)("inlineCode",{parentName:"li"},"t:texture")," part of the query finds all textures in your project"),(0,s.kt)("li",{parentName:"ul"},"The ",(0,s.kt)("inlineCode",{parentName:"li"},"t:prefab ref=")," part of the query runs a query for each texture returned in the t:texture set to see which prefabs refer to this texture."))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"t:prefab ref={t:texture size&gt;4000}"),": finds all prefabs in a project with texture size larger than 4000 bytes.")),(0,s.kt)("p",null,"This is the equivalent to:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Running ",(0,s.kt)("inlineCode",{parentName:"li"},"t:texture size&gt;4000"),"to return a list of all 4K textures in the project (for example, ",(0,s.kt)("inlineCode",{parentName:"li"},"armor.png"),", ",(0,s.kt)("inlineCode",{parentName:"li"},"treasure.png"),")."),(0,s.kt)("li",{parentName:"ul"},"Running ",(0,s.kt)("inlineCode",{parentName:"li"},"t:prefab ref=&lt;one of the 4K textures&gt;")," (for example, ",(0,s.kt)("inlineCode",{parentName:"li"},"t:prefab ref=armor.png")," and then ",(0,s.kt)("inlineCode",{parentName:"li"},"t:prefab ref=treasure.png"),")."),(0,s.kt)("li",{parentName:"ul"},"Aggregating all results and returning this as a single list of Search Items."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"t:[shader, material, texture]"),": finds all objects whose types are ",(0,s.kt)("inlineCode",{parentName:"li"},"shader"),", ",(0,s.kt)("inlineCode",{parentName:"li"},"material"),", or ",(0,s.kt)("inlineCode",{parentName:"li"},"texture"),". Using a normal query it could be expressed as:"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"t:shader or t:material or t:texture"))),(0,s.kt)("h2",{id:"functions"},"Functions"),(0,s.kt)("p",null,"Unity has a library of search expression functions to manipulate and transform sets of Search Items. Each of these functions can take multiple arguments and returns a set of items. Unity Search Expressions use curly braces to denote function calls."),(0,s.kt)("p",null,"The complete list of all functions is ",(0,s.kt)("a",{parentName:"p",href:"/doc-unity-manual/docs/search-expressions/search-expression-functions-ref"},"here"),"."),(0,s.kt)("p",null,"Example: The function ",(0,s.kt)("a",{parentName:"p",href:"/doc-unity-manual/docs/search-expressions/search-expression-functions-ref"},"count")," counts the items of each set passed as parameters and returns a number."),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"count{t:shader}")," : returns a set containing the number of shaders in the project. Example: ",(0,s.kt)("inlineCode",{parentName:"li"},"{34}"),"."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"count{t:shader, t:texture}")," : returns a set containing the number of shaders and textures in the project. Example: ",(0,s.kt)("inlineCode",{parentName:"li"},"{34, 2048}"),".")),(0,s.kt)("p",null,"Functions can be chained together, similar to ",(0,s.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/S-expression"},"s-expression")," used in the ",(0,s.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Lisp_(programming_language)"},"LISP")," programming language."),(0,s.kt)("p",null,">","  ",(0,s.kt)("strong",{parentName:"p"},"Note:"),"  There can only be a single root expression."),(0,s.kt)("p",null,"Example of a chain of functions being evaluated, in order of operation:"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},'print{"path=@path", first{10, sort{t:texture, @size}}}'),": ",(0,s.kt)("a",{parentName:"p",href:"/doc-unity-manual/docs/search-expressions/search-expression-functions-ref"},"print")," the path of the 10 largest textures in the project"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("inlineCode",{parentName:"li"},"t:texture"),": finds all texture in the project and then selects the size property."),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("inlineCode",{parentName:"li"},"sort{ t:texture, @size}"),": sorts all these textures according to their size property."),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("inlineCode",{parentName:"li"},"first{10"),": selects the first 10 sorted textures."),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("inlineCode",{parentName:"li"},'print{ "path=@path"'),": prints this list in the console according to a format string where Unity Search extracts the path property of each resulting item ",(0,s.kt)("inlineCode",{parentName:"li"},"path=@path"),".")),(0,s.kt)("p",null,"Functions can have multiple signatures (name of the method and the type and kind (value, reference, or output) of each of its formal parameters, similar to C#) and can support  ",(0,s.kt)("strong",{parentName:"p"},"optional"),"  (parameters that don\u2019t need to be passed to the function) and ",(0,s.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/params"},"variadic")," (parameters that can take a variable number of arguments) parameters."),(0,s.kt)("h2",{id:"literals-in-search-expressions"},"Literals in search expressions"),(0,s.kt)("p",null,"Literals are actual words or numbers that you would like to search for or number amounts you want to retrieve, as opposed to the query string. For example, t:texture searches for Assets with texture in the type name (e.g.,Texture2D), but adding quotation marks to make it a literal, \u201ct:texture\u201d searches for an Asset named t:texture."),(0,s.kt)("table",null,(0,s.kt)("thead",{parentName:"table"},(0,s.kt)("tr",{parentName:"thead"},(0,s.kt)("th",{parentName:"tr",align:null},"Expression"),(0,s.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),(0,s.kt)("tbody",{parentName:"table"},(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("a",{parentName:"td",href:"#number"}," ",(0,s.kt)("strong",{parentName:"a"},"Number")," ")),(0,s.kt)("td",{parentName:"tr",align:null},"A literal number (",(0,s.kt)("inlineCode",{parentName:"td"},"1,2,3, and so on"),")")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("a",{parentName:"td",href:"#set"}," ",(0,s.kt)("strong",{parentName:"a"},"Set")," ")),(0,s.kt)("td",{parentName:"tr",align:null},"Square brackets (",(0,s.kt)("inlineCode",{parentName:"td"},"[ ]"),")")),(0,s.kt)("tr",{parentName:"tbody"},(0,s.kt)("td",{parentName:"tr",align:null},(0,s.kt)("a",{parentName:"td",href:"#string"}," ",(0,s.kt)("strong",{parentName:"a"},"String")," ")),(0,s.kt)("td",{parentName:"tr",align:null},"Single or double quotes (",(0,s.kt)("inlineCode",{parentName:"td"},"''")," or ",(0,s.kt)("inlineCode",{parentName:"td"},'""'),")")))),(0,s.kt)("h3",{id:"number"},"Number"),(0,s.kt)("p",null,"Number literals can used as parameters to functions (such as ",(0,s.kt)("inlineCode",{parentName:"p"},"first"),")."),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"first{10, t:shader}")," -",">"," ",(0,s.kt)("inlineCode",{parentName:"p"},"{the first 10 shaders return by the 't:shader' query}")),(0,s.kt)("h3",{id:"set"},"Set"),(0,s.kt)("p",null,"Express a set of values using square brackets ",(0,s.kt)("inlineCode",{parentName:"p"},"[]"),". A set can contain any type of expression, but the search expression parser will assume the elements of a set are literals instead of a search query."),(0,s.kt)("p",null,"\u793a\u4f8b\uff1a"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"[t:shader, hello, 3]")," -",">"," ",(0,s.kt)("inlineCode",{parentName:"p"},'["t:shader", "hello", 3]')),(0,s.kt)("p",null,"If using curly brackets (",(0,s.kt)("inlineCode",{parentName:"p"},"{}"),"), the parser would treat this as three queries:"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"{t:shader, hello, 3}")," -",">"," {","<","run a query for t:shader",">",", ","<","run a query for hello",">",", ","<","run a query for 3",">","}"),(0,s.kt)("h3",{id:"string"},"String"),(0,s.kt)("p",null,"String literals can be used as parameters for some functions (such as ",(0,s.kt)("inlineCode",{parentName:"p"},"format"),"). You can specify a string literal using single or double quotes:"),(0,s.kt)("p",null,"\u201chello\u201d or \u2018hello\u2019"),(0,s.kt)("p",null,"The format function taking a format string as a parameter:"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"format{t:texture, '@path (@size)'}")),(0,s.kt)("h2",{id:"property-selectors-and-search-item-values"},"Property selectors and search item values"),(0,s.kt)("p",null,"A selector is an identifier denoted using the ",(0,s.kt)("inlineCode",{parentName:"p"},"@")," prefix. Use selectors to access the property of an item in order to compute, filter, or format. Selectors can map to ",(0,s.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/ScriptReference/SerializedProperty.html"},"serialized")," properties of a UnityEngine.Object or to a custom function to allow access to dynamic data."),(0,s.kt)("p",null,"The base selectors that any Search Items supports are:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"id"),": Unique ID of this item according to its Search Provider."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"value"),": Internal value of an item. By default it is its ID, but functions can override the value of an item."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"label"),": item label as shown in the  ",(0,s.kt)("strong",{parentName:"li"},"Search"),"  window"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"desc")," or ",(0,s.kt)("inlineCode",{parentName:"li"},"description")," : item description (second line of the  ",(0,s.kt)("strong",{parentName:"li"},"Search"),"  window)")),(0,s.kt)("p",null,"Unity also defines generic selectors for a Search Item, for example:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"@name"),": UnityEngine.Object.name"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"@size"),": File size on disk for an asset"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"@path"),": Asset path"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"@extension"),": Asset file extension"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"@provider"),": Search Provider that has yielded this item")),(0,s.kt)("p",null,"To access specific properties of a Search Item in order to perform an operation, use selectors:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"count{t={distinct{select{a:assets, @type}}}}"),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"a:assets, @type")," finds all of the objects name ",(0,s.kt)("inlineCode",{parentName:"li"},"assets")," and then selects the ",(0,s.kt)("inlineCode",{parentName:"li"},"type")," property for those objects."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"distinct")," returns a list of all types that exist."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"t={list of types}")," returns the multiple lists of each asset of each type."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"count")," counts how many assets of each type are in your project."))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"avg{@size,t:shader}"),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"t:shader, @size"),": finds all the shaders and then selects the size property."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"avg"),": computes the average size for all shaders in your project."))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"print{@value, count{t:texture, t:material}}"),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"This will print the count value extracted from the results of the count function in the Console window.")))),(0,s.kt)("p",null,"The ",(0,s.kt)("inlineCode",{parentName:"p"},"@#")," selector finds serialized properties and material properties:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"sort{t:texture, @#height}"),": sorts all textures in order of their height serialized properties.")),(0,s.kt)("h2",{id:"name-search-expressions-alias"},"Name search expressions (alias)"),(0,s.kt)("p",null,"You can name search expressions to make them easier to display in the  ",(0,s.kt)("strong",{parentName:"p"},"Search"),"  window."),(0,s.kt)("p",null,"For example, entering the expression ",(0,s.kt)("inlineCode",{parentName:"p"},"sort{count{t:audio, t:texture}, @value,desc}")," in the  ",(0,s.kt)("strong",{parentName:"p"},"Search"),"  window, it may be difficult to read which count corresponds to which type:"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/search-expression-alias1.png",alt:"search-expression-alias1.png"})),(0,s.kt)("p",null,"Using an alias: ",(0,s.kt)("inlineCode",{parentName:"p"},"sort{count{t:audio as Audio, t:texture as Texture}, desc}")," yields a more readable result:"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/search-expression-alias2.png",alt:"search-expression-alias2.png"})),(0,s.kt)("p",null,"To dynamically generate alias names, use the ",(0,s.kt)("inlineCode",{parentName:"p"},"alias")," function. For example:"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"alias{[1, 2, 3], 'Title value'}")),(0,s.kt)("p",null,"will yield items with these labels:"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"{Title 1, Title 2, Title 3}")),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/search-expression-alias-dynamic-generation.png",alt:"search-expression-alias-dynamic-generation.png"})),(0,s.kt)("h2",{id:"expand-operator"},"Expand operator"),(0,s.kt)("p",null,"The expand operator ",(0,s.kt)("inlineCode",{parentName:"p"},"...")," allows a set of items to be grouped into multiple sets of items instead of just one set."),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"...{expandable expression}")," -",">"," ",(0,s.kt)("inlineCode",{parentName:"p"},"{sub expr 1} {sub expr 2} {sub expr N}")),(0,s.kt)("p",null,"\u793a\u4f8b\uff1a"),(0,s.kt)("p",null,"A small project has ",(0,s.kt)("em",{parentName:"p"},"3 prefabs, 4 textures and 5 shaders"),". The following expression provides a count for all:"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"count{t:[prefab, texture, shader]}")," -",">"," ",(0,s.kt)("inlineCode",{parentName:"p"},"{12}")),(0,s.kt)("p",null,"The result of the search expression ",(0,s.kt)("inlineCode",{parentName:"p"},"t:[prefab, texture, shader]")," is a unified list of 12 items of type prefabs, textures, and shaders. This could also be expressed as: ",(0,s.kt)("inlineCode",{parentName:"p"},"t:prefab or t:texture or t:shader"),"."),(0,s.kt)("p",null,"Use the expand operator to count the number of each type of asset separately:"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"count{...t:[prefab, texture, shader]}")," -",">"," ",(0,s.kt)("inlineCode",{parentName:"p"},"count{t:prefab, t:texture, t:shader}")," -",">"," ",(0,s.kt)("inlineCode",{parentName:"p"},"{3, 4, 5}")),(0,s.kt)("p",null,"The ",(0,s.kt)("a",{parentName:"p",href:"/doc-unity-manual/docs/search-expressions/search-expression-functions-ref"},(0,s.kt)("inlineCode",{parentName:"a"},"groupBy"))," function can be used with the expand operator to return sets of items grouped by a common key."),(0,s.kt)("p",null,"\u793a\u4f8b\uff1a"),(0,s.kt)("p",null,"A project has three types of assets (prefabs, textures, and shaders). For a selector ",(0,s.kt)("inlineCode",{parentName:"p"},"@type")," that returns the type of Search Item, the expression would expand to:"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"count{t:prefab or t:texture or t:shader}")),(0,s.kt)("p",null,"You can use the ",(0,s.kt)("inlineCode",{parentName:"p"},"groupBy")," function to group items by their type and then count each number of items per type:"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"count{...groupBy{t:prefab or t:texture or t:shader, @type}}")),(0,s.kt)("h2",{id:"search-expression-examples"},"Search expression examples"),(0,s.kt)("p",null,"These examples demonstrate how search expressions can be used for complex requests in a project."),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Count prefab usage in scenes and sort by highest usage:"),(0,s.kt)("p",{parentName:"li"},(0,s.kt)("inlineCode",{parentName:"p"},"sort{select{p: t:prefab *.prefab, @path, count{t:scene ref:@path} as count}, @count, desc}"))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Sort and count all asset types"),(0,s.kt)("p",{parentName:"li"},(0,s.kt)("inlineCode",{parentName:"p"},"sort{count{...groupby{a:assets, @type}}, @value, desc}"))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Find the mesh with the most vertices (assuming the @vertices selector is available in the project)."),(0,s.kt)("p",{parentName:"li"},(0,s.kt)("inlineCode",{parentName:"p"},"first{sort{t:mesh, @vertices, desc}}"))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Sort all meshes by their vertex count"),(0,s.kt)("p",{parentName:"li"},(0,s.kt)("inlineCode",{parentName:"p"},"sort{select{h: t:mesh, @path, @vertices}, @vertices, desc}"))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Count the number of vertices for all meshes"),(0,s.kt)("p",{parentName:"li"},(0,s.kt)("inlineCode",{parentName:"p"},"sum{select{h:t:mesh, @vertices}}"))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Find all assets referencing a mesh"),(0,s.kt)("p",{parentName:"li"},(0,s.kt)("inlineCode",{parentName:"p"},"ref=select{p:t:mesh, @path}"))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"List prefab scene references count"),(0,s.kt)("p",{parentName:"li"},(0,s.kt)("inlineCode",{parentName:"p"},'select{p: *.prefab, @path, count{p: a:sceneIndex ref="@path"} as count}')))),(0,s.kt)("h2",{id:"expression-evaluation"},"Expression evaluation"),(0,s.kt)("p",null,"Search expression evaluation is based on the C# ",(0,s.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/dotnet/csharp/iterators"},"iterator")," pattern and uses of the ",(0,s.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/yield"},"yield")," keyword. This ensures that the evaluation is exposed as a fully asynchronous operation and is as non-blocking as possible. It allows each search expression to start its computation before the initial sets of search items are fully computed."),(0,s.kt)("p",null,"By default all search expression evaluation is done in a worker thread in order to not block the Editor. For operations that need to rely on non-thread safe Unity API (like some selector accessors), we have a utility API to queue those operations on the main thread and maintain the pattern of ",(0,s.kt)("em",{parentName:"p"},"yielding")," search items."),(0,s.kt)("h1",{id:"customize-the-search-expression-language"},"Customize the search expression language"),(0,s.kt)("p",null,"The search expression language has been designed to be customizable. APIs to customize all parts of the framework will be available in a future release."))}h.isMDXComponent=!0}}]);