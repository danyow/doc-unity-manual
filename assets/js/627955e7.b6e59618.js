"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[26561],{3905:function(e,r,t){t.d(r,{Zo:function(){return c},kt:function(){return d}});var o=t(67294);function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach((function(r){i(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function a(e,r){if(null==e)return{};var t,o,i=function(e,r){if(null==e)return{};var t,o,i={},n=Object.keys(e);for(o=0;o<n.length;o++)t=n[o],r.indexOf(t)>=0||(i[t]=e[t]);return i}(e,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)t=n[o],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var u=o.createContext({}),s=function(e){var r=o.useContext(u),t=r;return e&&(t="function"==typeof e?e(r):l(l({},r),e)),t},c=function(e){var r=s(e.components);return o.createElement(u.Provider,{value:r},e.children)},m={inlineCode:"code",wrapper:function(e){var r=e.children;return o.createElement(o.Fragment,{},r)}},p=o.forwardRef((function(e,r){var t=e.components,i=e.mdxType,n=e.originalType,u=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),p=s(t),d=i,f=p["".concat(u,".").concat(d)]||p[d]||m[d]||n;return t?o.createElement(f,l(l({ref:r},c),{},{components:t})):o.createElement(f,l({ref:r},c))}));function d(e,r){var t=arguments,i=r&&r.mdxType;if("string"==typeof e||i){var n=t.length,l=new Array(n);l[0]=p;var a={};for(var u in r)hasOwnProperty.call(r,u)&&(a[u]=r[u]);a.originalType=e,a.mdxType="string"==typeof e?e:i,l[1]=a;for(var s=2;s<n;s++)l[s]=t[s];return o.createElement.apply(null,l)}return o.createElement.apply(null,t)}p.displayName="MDXCreateElement"},14853:function(e,r,t){t.r(r),t.d(r,{assets:function(){return c},contentTitle:function(){return u},default:function(){return d},frontMatter:function(){return a},metadata:function(){return s},toc:function(){return m}});var o=t(87462),i=t(63366),n=(t(67294),t(3905)),l=["components"],a={id:"Profiler-creating-custom-modules",title:"Creating Custom Profiler modules",slug:"/profiler-creating-custom-modules"},u="Creating Custom Profiler modules",s={unversionedId:"unity-overview/analysis/profiler/profiler-customizing/profiler-creating-custom-modules/Profiler-creating-custom-modules",id:"unity-overview/analysis/profiler/profiler-customizing/profiler-creating-custom-modules/Profiler-creating-custom-modules",title:"Creating Custom Profiler modules",description:"A custom Profiler module displays performance data from your system in the Profiler window.",source:"@site/docs/unity-overview/analysis/profiler/profiler-customizing/profiler-creating-custom-modules/profiler-creating-custom-modules.md",sourceDirName:"unity-overview/analysis/profiler/profiler-customizing/profiler-creating-custom-modules",slug:"/profiler-creating-custom-modules",permalink:"/doc-unity-manual/docs/profiler-creating-custom-modules",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/unity-overview/analysis/profiler/profiler-customizing/profiler-creating-custom-modules/profiler-creating-custom-modules.md",tags:[],version:"current",frontMatter:{id:"Profiler-creating-custom-modules",title:"Creating Custom Profiler modules",slug:"/profiler-creating-custom-modules"},sidebar:"tutorialSidebar",previous:{title:"Creating custom Profiler counters",permalink:"/doc-unity-manual/docs/profiler-customizing/profiler-creating-custom-counters"},next:{title:"Profiler Module Editor\uff08\u6027\u80fd\u5206\u6790\u5668\u6a21\u5757\u7f16\u8f91\u5668\uff09",permalink:"/doc-unity-manual/docs/profiler-creating-custom-modules/profiler-module-editor"}},c={},m=[{value:"Creating custom Profiler modules using the Profiler Module Editor",id:"creating-custom-profiler-modules-using-the-profiler-module-editor",level:2},{value:"Creating Custom Profiler modules in code",id:"creating-custom-profiler-modules-in-code",level:2},{value:"Displaying a custom Profile module in the Profiler window",id:"displaying-a-custom-profile-module-in-the-profiler-window",level:2}],p={toc:m};function d(e){var r=e.components,t=(0,i.Z)(e,l);return(0,n.kt)("wrapper",(0,o.Z)({},p,t,{components:r,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"creating-custom-profiler-modules"},"Creating Custom Profiler modules"),(0,n.kt)("p",null,"A custom Profiler module displays performance data from your system in the Profiler window."),(0,n.kt)("p",null,"You can create a custom profiler module in one of the following ways:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#use-the-profiler-module-editor"},"Use the Profiler Module Editor"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"#create-a-profiler-module-script"},"Create a ProfilerModule script"),".")),(0,n.kt)("p",null,"Some packages include custom profiler modules that you can use when you install that specific package. For more information, see the ",(0,n.kt)("a",{parentName:"p",href:"/doc-unity-manual/docs/profiler-window#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%99%A8%E6%A8%A1%E5%9D%97"},"Profiler modules list"),"."),(0,n.kt)("p",null,"A custom module displays the counters you specified in code in the Profiler window chart view (A), and the counters appear as a list in the module details panel (B)."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/Profiler_Tank_module.png",alt:"Profiler_Tank_module.png"})),(0,n.kt)("h2",{id:"creating-custom-profiler-modules-using-the-profiler-module-editor"},"Creating custom Profiler modules using the Profiler Module Editor"),(0,n.kt)("p",null,"You can use Unity\u2019s built-in Profiler Module Editor to create a custom Profiler module. For more information, see the Profiler Module Editor documentation section ",(0,n.kt)("a",{parentName:"p",href:"/doc-unity-manual/docs/profiler-creating-custom-modules/profiler-module-editor"},"Creating a custom module"),"."),(0,n.kt)("h2",{id:"creating-custom-profiler-modules-in-code"},"Creating Custom Profiler modules in code"),(0,n.kt)("p",null,"To create a custom Profiler module via code, you must create a new ProfilerModule script and define the module\u2019s properties including the counters it displays, its name, and its icon."),(0,n.kt)("p",null,"To define a custom Profiler module, your script must do the following:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Define a class derived from ",(0,n.kt)("a",{parentName:"li",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/Unity.Profiling.Editor.ProfilerModule.html"},"ProfilerModule")," in your project or package. In the following example, the class is called ",(0,n.kt)("inlineCode",{parentName:"li"},"TankEffectsProfilerModule"),":")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"public class TankEffectsProfilerModule : ProfilerModule\n")),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Assign the ",(0,n.kt)("a",{parentName:"li",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/Unity.Profiling.Editor.ProfilerModuleMetadataAttribute.html"},"ProfilerModuleMetadata")," attribute to this class and specify the module\u2019s display name in the attribute\u2019s argument. In the following example, the display name is \u201cTank Effects\u201d:")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'[ProfilerModuleMetadata("Tank Effects")] \n')),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Implement a constructor that has no parameter, and pass a list of chart counter descriptions to the base constructor. In the following example, the constructor with no parameter is ",(0,n.kt)("inlineCode",{parentName:"li"},"TankEffectsProfilerModule()"),", the list of chart counter descriptors is ",(0,n.kt)("inlineCode",{parentName:"li"},"k_Counters"),", and the base constructor is ",(0,n.kt)("inlineCode",{parentName:"li"},"base"),":")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"static readonly ProfilerCounterDescriptor[] k_Counters = new ProfilerCounterDescriptor[]\n{\n    new ProfilerCounterDescriptor(GameStatistics.TankTrailParticleCountName, GameStatistics.TanksCategory),\n    new ProfilerCounterDescriptor(GameStatistics.ShellExplosionParticleCountName, GameStatistics.TanksCategory),\n    new ProfilerCounterDescriptor(GameStatistics.TankExplosionParticleCountName, GameStatistics.TanksCategory),\n};\n    \npublic TankEffectsProfilerModule() : base(k_Counters) { }\n")),(0,n.kt)("h2",{id:"displaying-a-custom-profile-module-in-the-profiler-window"},"Displaying a custom Profile module in the Profiler window"),(0,n.kt)("p",null,"When you define a custom Profiler module, the Profiler window automatically detects it. To view data in your custom Profiler module in the Profiler window:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Connect the Profiler to your application. For more information, see ",(0,n.kt)("a",{parentName:"li",href:"/doc-unity-manual/docs/profiler/profiler-profiling-applications"},"Profiling your application"),"."),(0,n.kt)("li",{parentName:"ol"},"Run your application.")),(0,n.kt)("p",null,"You can also run the Profiler when your application is in Play mode. However, if you profile an application in Play mode, the Profiler displays data that is not representative of how your application runs when you build it on a hardware device."))}d.isMDXComponent=!0}}]);