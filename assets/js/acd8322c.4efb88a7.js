"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[83075],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,l=e.originalType,p=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),c=s(n),m=i,g=c["".concat(p,".").concat(m)]||c[m]||d[m]||l;return n?a.createElement(g,o(o({ref:t},u),{},{components:n})):a.createElement(g,o({ref:t},u))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=n.length,o=new Array(l);o[0]=c;var r={};for(var p in t)hasOwnProperty.call(t,p)&&(r[p]=t[p]);r.originalType=e,r.mdxType="string"==typeof e?e:i,o[1]=r;for(var s=2;s<l;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},48943:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return p},default:function(){return m},frontMatter:function(){return r},metadata:function(){return s},toc:function(){return d}});var a=n(87462),i=n(63366),l=(n(67294),n(3905)),o=["components"],r={id:"udp-service-interoperability",title:"Using UDP with other services",slug:"/udp-service-interoperability"},p="Using UDP with other services",s={unversionedId:"unity-services/udp/udp-service-interoperability/udp-service-interoperability",id:"unity-services/udp/udp-service-interoperability/udp-service-interoperability",title:"Using UDP with other services",description:"Google Play games services in UDP builds",source:"@site/docs/unity-services/udp/udp-service-interoperability/udp-service-interoperability.md",sourceDirName:"unity-services/udp/udp-service-interoperability",slug:"/udp-service-interoperability",permalink:"/docs/udp-service-interoperability",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/unity-services/udp/udp-service-interoperability/udp-service-interoperability.md",tags:[],version:"current",frontMatter:{id:"udp-service-interoperability",title:"Using UDP with other services",slug:"/udp-service-interoperability"},sidebar:"tutorialSidebar",previous:{title:"\u5728 UDP \u6c99\u76d2\u4e2d\u6d4b\u8bd5\u6e38\u620f",permalink:"/docs/udp/udp-sandbox-testing"},next:{title:"Using Firebase with UDP builds",permalink:"/docs/udp-service-interoperability/udp-firebase"}},u={},d=[{value:"Google Play games services in UDP builds",id:"google-play-games-services-in-udp-builds",level:2},{value:"Overview",id:"overview",level:3},{value:"Configuring Google Play games services for UDP builds",id:"configuring-google-play-games-services-for-udp-builds",level:3},{value:"Creating and linking a Google Play games services project",id:"creating-and-linking-a-google-play-games-services-project",level:4},{value:"Linking UDP apps to your games services",id:"linking-udp-apps-to-your-games-services",level:4},{value:"Using Cloud Build with UDP",id:"using-cloud-build-with-udp",level:2},{value:"\u901a\u8fc7 Cloud Build \u5c06\u6784\u5efa\u7248\u672c\u63a8\u9001\u5230 UDP \u63a7\u5236\u53f0",id:"\u901a\u8fc7-cloud-build-\u5c06\u6784\u5efa\u7248\u672c\u63a8\u9001\u5230-udp-\u63a7\u5236\u53f0",level:2},{value:"\u5728\u7f16\u8f91\u5668\u4e2d\u4f7f\u7528 Cloud Build \u5c06\u6e38\u620f\u90e8\u7f72\u5230 UDP",id:"\u5728\u7f16\u8f91\u5668\u4e2d\u4f7f\u7528-cloud-build-\u5c06\u6e38\u620f\u90e8\u7f72\u5230-udp",level:3},{value:"\u4f7f\u7528 Unity Dashboard \u5c06\u6e38\u620f\u90e8\u7f72\u5230 UDP",id:"\u4f7f\u7528-unity-dashboard-\u5c06\u6e38\u620f\u90e8\u7f72\u5230-udp",level:3},{value:"\u901a\u8fc7 Cloud Build \u8fdb\u884c\u6784\u5efa\u548c\u90e8\u7f72",id:"\u901a\u8fc7-cloud-build-\u8fdb\u884c\u6784\u5efa\u548c\u90e8\u7f72",level:2},{value:"\u670d\u52a1\u4e92\u64cd\u4f5c\u6027",id:"\u670d\u52a1\u4e92\u64cd\u4f5c\u6027",level:2},{value:"How does it work?",id:"how-does-it-work",level:3},{value:"Locating udp.json",id:"locating-udpjson",level:3},{value:"Reading udp.json",id:"reading-udpjson",level:3},{value:"udpStore values",id:"udpstore-values",level:3},{value:"Using udpStore with Remote Config",id:"using-udpstore-with-remote-config",level:3},{value:"\u4f7f\u7528 Unity IAP \u5b9e\u73b0\u7528\u4e8e UDP \u7684 IAP \u5546\u54c1",id:"\u4f7f\u7528-unity-iap-\u5b9e\u73b0\u7528\u4e8e-udp-\u7684-iap-\u5546\u54c1",level:2},{value:"\u67e5\u8be2 IAP \u5e93\u5b58",id:"\u67e5\u8be2-iap-\u5e93\u5b58",level:3},{value:"\u4f7f\u7528 Unity IAP\uff08\u4ee3\u7801\u5b9e\u73b0\uff09",id:"\u4f7f\u7528-unity-iap\u4ee3\u7801\u5b9e\u73b0",level:4},{value:"\u83b7\u53d6\u7f16\u8f91\u5668\u4e2d\u5b9a\u4e49\u7684 IAP \u5546\u54c1",id:"\u83b7\u53d6\u7f16\u8f91\u5668\u4e2d\u5b9a\u4e49\u7684-iap-\u5546\u54c1",level:5},{value:"\u4ece UDP \u63a7\u5236\u53f0\u83b7\u53d6 IAP \u5546\u54c1\u4fe1\u606f",id:"\u4ece-udp-\u63a7\u5236\u53f0\u83b7\u53d6-iap-\u5546\u54c1\u4fe1\u606f",level:5},{value:"\u4ece UDP \u63a7\u5236\u53f0\u83b7\u53d6 IAP \u76ee\u5f55",id:"\u4ece-udp-\u63a7\u5236\u53f0\u83b7\u53d6-iap-\u76ee\u5f55",level:5},{value:"\u4f7f\u7528 Unity IAP \u5305\u586b\u5145 IAP \u76ee\u5f55",id:"\u4f7f\u7528-unity-iap-\u5305\u586b\u5145-iap-\u76ee\u5f55",level:4}],c={toc:d};function m(e){var t=e.components,n=(0,i.Z)(e,o);return(0,l.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"using-udp-with-other-services"},"Using UDP with other services"),(0,l.kt)("h2",{id:"google-play-games-services-in-udp-builds"},"Google Play games services in UDP builds"),(0,l.kt)("h3",{id:"overview"},"Overview"),(0,l.kt)("p",null,"Implementing ",(0,l.kt)("a",{parentName:"p",href:"https://developers.google.com/games/services/console/enabling"},"Google Play games services")," in your Android games lets you leverage Google\u2019s service layer for features such as achievements and leaderboards. If your game implements Google Play game services, additional configuration is required to support the builds that ",(0,l.kt)("a",{parentName:"p",href:"https://unity.com/udp"},"UDP")," creates for different stores."),(0,l.kt)("p",null,"When your game invokes Google Play games services, Google Play games services checks that the following details match the information registered on the Google Play Console:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"The application\u2019s  ",(0,l.kt)("strong",{parentName:"li"},"package name")," "),(0,l.kt)("li",{parentName:"ul"},"The  ",(0,l.kt)("strong",{parentName:"li"},"certificate"),"  the application was signed with")),(0,l.kt)("p",null,"If they don\u2019t match, the player can\u2019t log into the application with Google Play games services."),(0,l.kt)("p",null,"For certain stores that you publish your game to via UDP, UDP adds a store-specific suffix to the package name. Additionally, if you don\u2019t use your own private key to generate the certificate, UDP generates a certificate for each repacked build. These events would cause your certificate and/or package name to no longer match the information on the Google Play Console. This would prevent users from logging into the game with Google Play game services."),(0,l.kt)("p",null,"The following section explains how to resolve this issue."),(0,l.kt)("h3",{id:"configuring-google-play-games-services-for-udp-builds"},"Configuring Google Play games services for UDP builds"),(0,l.kt)("p",null,"This section explains how to link your UDP versions to a Google Play application so that Google Play game services can work on all of them."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"In the Google Play Console, go to the target app."),(0,l.kt)("li",{parentName:"ol"},"Go to  ",(0,l.kt)("strong",{parentName:"li"},"Play Games Services"),"  ",">","  ",(0,l.kt)("strong",{parentName:"li"},"Setup and management"),"  ",">","  ",(0,l.kt)("strong",{parentName:"li"},"Configuration")," .",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"If your Google Play game has Google Play games services implemented, your game will already be linked to a Google Play games services project. In this case:",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"Select  ",(0,l.kt)("strong",{parentName:"li"},"Use an existing Play Games Services project")," ."),(0,l.kt)("li",{parentName:"ol"},"Select your game project and select  ",(0,l.kt)("strong",{parentName:"li"},"Use")," ."),(0,l.kt)("li",{parentName:"ol"},"Follow the steps in ",(0,l.kt)("a",{parentName:"li",href:"#linking-udp-apps-to-your-games-services"},"Link the UDP apps to your game service"),"."))),(0,l.kt)("li",{parentName:"ul"},"If your Google Play game doesn\u2019t have Google Play games services implemented:",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"In the Play Games Services setup page, select  ",(0,l.kt)("strong",{parentName:"li"},"Yes, my game already uses Google APIs"),"  or  ",(0,l.kt)("strong",{parentName:"li"},"No, my game doesn\u2019t use Google APIs")," ."),(0,l.kt)("li",{parentName:"ol"},"Follow the steps in ",(0,l.kt)("a",{parentName:"li",href:"#creating-and-linking-a-google-play-games-services-project"},"Creating and linking a Google Play games services project"),".")))))),(0,l.kt)("h4",{id:"creating-and-linking-a-google-play-games-services-project"},"Creating and linking a Google Play games services project"),(0,l.kt)("p",null,"This section explains how to create a Google Play games services project and link it to a new or existing cloud project."),(0,l.kt)("p",null,"If you selected  ",(0,l.kt)("strong",{parentName:"p"},"Yes, my game already uses Google APIs"),"  in the Play Games Services setup page:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Select a cloud project."),(0,l.kt)("li",{parentName:"ol"},"Select Use to create a new Play Games Services project and link it to your existing cloud project.")),(0,l.kt)("p",null,"If you selected  ",(0,l.kt)("strong",{parentName:"p"},"No, my game doesn\u2019t use Google APIs"),"  in the Play Games Services setup page:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Enter a game name."),(0,l.kt)("li",{parentName:"ol"},"Select Create to create a new Play Games Services project and link it to a new cloud project.")),(0,l.kt)("p",null,"When you create a new Play Games Services project, the  ",(0,l.kt)("strong",{parentName:"p"},"Add credential"),"  link is disabled."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Select  ",(0,l.kt)("strong",{parentName:"li"},"Configure OAuth consent screen")," ."),(0,l.kt)("li",{parentName:"ol"},"In the Play Games Services configuration screen, select Refresh.",(0,l.kt)("br",null),"The Add credential option is now enabled."),(0,l.kt)("li",{parentName:"ol"},"Select  ",(0,l.kt)("strong",{parentName:"li"},"Add credential")," .",(0,l.kt)("br",null),"This opens the Add credential page."),(0,l.kt)("li",{parentName:"ol"},"In the Add credential page:",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"Select  ",(0,l.kt)("strong",{parentName:"li"},"Android"),"  as the  ",(0,l.kt)("strong",{parentName:"li"},"Type")," ."),(0,l.kt)("li",{parentName:"ol"},"Set  ",(0,l.kt)("strong",{parentName:"li"},"Enable anti-piracy"),"  to  ",(0,l.kt)("strong",{parentName:"li"},"Off")," . This lets users access your game if they have installed it from a different app store than Google Play."),(0,l.kt)("li",{parentName:"ol"},"In the Authorization section, select  ",(0,l.kt)("strong",{parentName:"li"},"Create OAuth client")," . This opens a popup."),(0,l.kt)("li",{parentName:"ol"},"Select  ",(0,l.kt)("strong",{parentName:"li"},"Create OAuth Client ID"),"  and use the details from the popup to complete the form.")))),(0,l.kt)("p",null,"When you\u2019ve completed the above steps, your Google Play game is linked to its Google Play games services. The next step is to ",(0,l.kt)("a",{parentName:"p",href:"#linking-udp-apps-to-your-games-services"},"link your UDP builds to the games services"),"."),(0,l.kt)("h4",{id:"linking-udp-apps-to-your-games-services"},"Linking UDP apps to your games services"),(0,l.kt)("p",null,"When you have linked your app to Google Play games services you can link the other (UDP) apps to the games services."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"In the Google Play Console, select  ",(0,l.kt)("strong",{parentName:"li"},"Play Games Services"),"  ",">","  ",(0,l.kt)("strong",{parentName:"li"},"Setup and management"),"  ",">","  ",(0,l.kt)("strong",{parentName:"li"},"Configuration")," .",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"In the Play Games Services configuration page, select  ",(0,l.kt)("strong",{parentName:"li"},"Add credential")," ."))),(0,l.kt)("li",{parentName:"ol"},"In the Add credential page:",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"Select  ",(0,l.kt)("strong",{parentName:"li"},"Android")," ."),(0,l.kt)("li",{parentName:"ol"},"Set  ",(0,l.kt)("strong",{parentName:"li"},"Enable anti-piracy to off")," . This lets users access your game if they have installed it from a different app store than Google Play."),(0,l.kt)("li",{parentName:"ol"},"In the  ",(0,l.kt)("strong",{parentName:"li"},"Authorization"),"  section, select  ",(0,l.kt)("strong",{parentName:"li"},"Create OAuth client")," . This opens a popup."),(0,l.kt)("li",{parentName:"ol"},"Select  ",(0,l.kt)("strong",{parentName:"li"},"Create OAuth Client ID"),"  and use the details from the popup to complete the form."))),(0,l.kt)("li",{parentName:"ol"},"In the Create OAuth client ID form, enter the required details to create an entry for one of your UDP builds.",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"In the  ",(0,l.kt)("strong",{parentName:"li"},"Name"),"  field, name the build after the corresponding store, for example \u201cSamsung version\u201d."),(0,l.kt)("li",{parentName:"ol"},"In the  ",(0,l.kt)("strong",{parentName:"li"},"Package name"),"  field, specify the package name for the build registered with the corresponding store via the UDP console.",(0,l.kt)("br",null),"The store-specific package name is displayed in the UDP console:",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"Go to My Games ",">"," Publish tab."),(0,l.kt)("li",{parentName:"ol"},"Select  ",(0,l.kt)("strong",{parentName:"li"},"Advanced"),"  for the corresponding store.",(0,l.kt)("br",null),"The package name is displayed in the Basic Information section."))),(0,l.kt)("li",{parentName:"ol"},"In the certificate field, use the certificate used for the corresponding UDP store. UDP signs the app with the new certificate after the Repack operation.",(0,l.kt)("br",null),"The store-specific certificate is displayed in the UDP console:",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"Go to My Games ",">"," Publish tab."),(0,l.kt)("li",{parentName:"ol"},"Select  ",(0,l.kt)("strong",{parentName:"li"},"Advanced"),"  for the corresponding store.",(0,l.kt)("br",null),"The certificate is displayed in the Basic Information section.",(0,l.kt)("br",null)," ",(0,l.kt)("strong",{parentName:"li"},"Note")," : You can also download the APK Certificate and get the fingerprint information via the command:",(0,l.kt)("br",null),(0,l.kt)("inlineCode",{parentName:"li"},"openssl x509 -in [downloaded-pem-filepath] -fingerprint -noout")),(0,l.kt)("li",{parentName:"ol"},"Copy the SHA\u20131 from the UDP console into the certificate field."))))),(0,l.kt)("li",{parentName:"ol"},"When you\u2019ve completed the form, select  ",(0,l.kt)("strong",{parentName:"li"},"Create"),"  and return to Google Play Console."),(0,l.kt)("li",{parentName:"ol"},"Select  ",(0,l.kt)("strong",{parentName:"li"},"Refresh OAuth clients")," ."),(0,l.kt)("li",{parentName:"ol"},"Select your new OAuth client.",(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},"Select  ",(0,l.kt)("strong",{parentName:"li"},"Save changes"),"  to save the credential."))),(0,l.kt)("li",{parentName:"ol"},"Repeat the above steps for each store-specific UDP build that you want to link to your Google Play application.")),(0,l.kt)("p",null,"You can view the UDP builds you\u2019ve linked to your Google Play application in the Google Cloud Platform ",">"," Google API & Services dashboard, under Credentials."),(0,l.kt)("p",null,"These steps enable Google Play games services to work successfully on all the UDP store versions that are linked that way, excluding Mi GetApps (whose SDK integrates an old version of Google Mobile Services, which creates conflicts)."),(0,l.kt)("p",null," ",(0,l.kt)("strong",{parentName:"p"},"Note")," : Any changes to Google\u2019s systems could impact the solution described above. For more information on Google\u2019s troubleshooting information, see the ",(0,l.kt)("a",{parentName:"p",href:"https://www.google.com/url?q=https://developers.google.com/games/services/android/troubleshooting&sa=D&ust=1611571996561000&usg=AOvVaw00u3uXWmm9qmGpqo4yuFQX"},"Google documentation"),"."),(0,l.kt)("h2",{id:"using-cloud-build-with-udp"},"Using Cloud Build with UDP"),(0,l.kt)("p",null,"\u53ef\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Manual/UnityCloudBuild.html"},"Cloud Build")," \u5c06\u6e38\u620f\u90e8\u7f72\u5230 UDP \u63a7\u5236\u53f0\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#%E9%80%9A%E8%BF%87-cloud-build-%E5%B0%86%E6%9E%84%E5%BB%BA%E7%89%88%E6%9C%AC%E6%8E%A8%E9%80%81%E5%88%B0-udp-%E6%8E%A7%E5%88%B6%E5%8F%B0"},"\u5c06 APK \u4e0a\u4f20\u5230 Cloud Build"),"\uff0c\u7136\u540e\u4ece\u90a3\u91cc\u90e8\u7f72\u5230 UDP"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#%E9%80%9A%E8%BF%87-cloud-build-%E8%BF%9B%E8%A1%8C%E6%9E%84%E5%BB%BA%E5%92%8C%E9%83%A8%E7%BD%B2"},"\u4f7f\u7528 Cloud Build \u6784\u5efa\u4f60\u7684\u6e38\u620f"),"\uff0c\u7136\u540e\u4ece\u90a3\u91cc\u90e8\u7f72\u5230 UDP")),(0,l.kt)("h2",{id:"\u901a\u8fc7-cloud-build-\u5c06\u6784\u5efa\u7248\u672c\u63a8\u9001\u5230-udp-\u63a7\u5236\u53f0"},"\u901a\u8fc7 Cloud Build \u5c06\u6784\u5efa\u7248\u672c\u63a8\u9001\u5230 UDP \u63a7\u5236\u53f0"),(0,l.kt)("p",null,"This section explains how to use Cloud Build to push your game to UDP. In the Unity Editor, enable Cloud Build in the Project Settings window."),(0,l.kt)("h3",{id:"\u5728\u7f16\u8f91\u5668\u4e2d\u4f7f\u7528-cloud-build-\u5c06\u6e38\u620f\u90e8\u7f72\u5230-udp"},"\u5728\u7f16\u8f91\u5668\u4e2d\u4f7f\u7528 Cloud Build \u5c06\u6e38\u620f\u90e8\u7f72\u5230 UDP"),(0,l.kt)("p",null,"\u8981\u901a\u8fc7 Unity \u7f16\u8f91\u5668\u4e2d\u7684 Cloud Build \u529f\u80fd\u5c06\u6e38\u620f\u90e8\u7f72\u5230 UDP\uff0c\u4f60\u9700\u8981\u4e0a\u4f20 UDP \u6784\u5efa\u7248\u672c\u5e76\u5c06\u5176\u63a8\u9001\u5230 UDP\u3002"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"In the  ",(0,l.kt)("strong",{parentName:"li"},"Cloud Build"),"  tab of the Project Settings window, if you haven\u2019t uploaded any build before, select  ",(0,l.kt)("strong",{parentName:"li"},"Upload Build")," .",(0,l.kt)("br",null)," 1.\u5728  ",(0,l.kt)("strong",{parentName:"li"},"FILE"),"  \u4e2d\uff1a",(0,l.kt)("br",null),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u9009\u62e9 UDP \u6784\u5efa\u7248\u672c\u7684 APK"),(0,l.kt)("li",{parentName:"ul"},"\u5728  ",(0,l.kt)("strong",{parentName:"li"},"LABEL"),"  \u4e2d\u8f93\u5165\u6709\u7528\u7684\u6807\u7b7e"),(0,l.kt)("li",{parentName:"ul"},"\u5c06  ",(0,l.kt)("strong",{parentName:"li"},"PLATFORM"),"  \u5b57\u6bb5\u8bbe\u7f6e\u4e3a Android\u3002",(0,l.kt)("br",null)," 1.\u9009\u62e9  ",(0,l.kt)("strong",{parentName:"li"},"UPLOAD")," \uff0c\u7136\u540e\u7b49\u5f85\u5b8c\u6210\u4e0a\u4f20\u8fc7\u7a0b\u3002"))),(0,l.kt)("li",{parentName:"ol"},"In the  ",(0,l.kt)("strong",{parentName:"li"},"Cloud Build"),"  tab of the Project Settings window, locate the desired build from the build  ",(0,l.kt)("strong",{parentName:"li"},"History"),"  timeline and select  ",(0,l.kt)("strong",{parentName:"li"},"Push to Unity Distribution Portal")," . 1.\u786e\u8ba4\u60f3\u8981\u63a8\u9001\uff0c\u7136\u540e\u786e\u8ba4\u64cd\u4f5c\u5b8c\u6210\u3002",(0,l.kt)("br",null)," ",(0,l.kt)("img",{parentName:"li",src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/UDPUsingCloudBuild_03.png",alt:"UDPUsingCloudBuild_03.png"}))),(0,l.kt)("h3",{id:"\u4f7f\u7528-unity-dashboard-\u5c06\u6e38\u620f\u90e8\u7f72\u5230-udp"},"\u4f7f\u7528 Unity Dashboard \u5c06\u6e38\u620f\u90e8\u7f72\u5230 UDP"),(0,l.kt)("p",null,"\u8981\u901a\u8fc7 Unity Dashboard \u4e2d\u7684 Cloud Build \u529f\u80fd\u5c06\u6e38\u620f\u90e8\u7f72\u5230 UDP\uff0c\u4f60\u9700\u8981\u5c06 UDP \u6784\u5efa\u7248\u672c\u4e0a\u4f20\u5230 Unity Dashboard \u5e76\u4ece\u5176\u4e2d\u63a8\u9001\u5230 UDP\u3002"),(0,l.kt)("p",null,"1.\u5728 ",(0,l.kt)("a",{parentName:"p",href:"https://developer.cloud.unity3d.com/build"},"Unity \u5f00\u53d1\u8005\u63a7\u5236\u9762\u677f (Developer Dashboard)")," \u4e2d\uff0c\u5bfc\u822a\u5230\u9879\u76ee\u7684  ",(0,l.kt)("strong",{parentName:"p"},"Cloud Build"),"  ",">","  ",(0,l.kt)("strong",{parentName:"p"},"History")," \u3002 1.\u9009\u62e9  ",(0,l.kt)("strong",{parentName:"p"},"Upload")," \uff0c\u7136\u540e\u9009\u62e9 APK \u6587\u4ef6\u3002 1.\u5728  ",(0,l.kt)("strong",{parentName:"p"},"Platform"),"  \u5b57\u6bb5\u4e2d\uff0c\u9009\u62e9  ",(0,l.kt)("strong",{parentName:"p"},"Android")," \u3002 1.\u9009\u62e9  ",(0,l.kt)("strong",{parentName:"p"},"Upload")," \u3002 1.\u9009\u62e9\u6784\u5efa\u7248\u672c\u65c1\u8fb9\u7684 More \u83dc\u5355\u4ee5\u5c55\u5f00\u4e0b\u62c9\u83dc\u5355\u3002 1.\u9009\u62e9  ",(0,l.kt)("strong",{parentName:"p"},"Push to Unity Distribution Portal")," \u3002"),(0,l.kt)("h2",{id:"\u901a\u8fc7-cloud-build-\u8fdb\u884c\u6784\u5efa\u548c\u90e8\u7f72"},"\u901a\u8fc7 Cloud Build \u8fdb\u884c\u6784\u5efa\u548c\u90e8\u7f72"),(0,l.kt)("p",null,"\u5982\u679c\u4f7f\u7528\u7684\u662f Unity Teams Advanced\uff0c\u4f60\u53ef\u4ee5",(0,l.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Manual/UnityCloudBuildContinuousIntegration.html"},"\u81ea\u52a8\u751f\u6210\u6784\u5efa\u7248\u672c"),"\u3002"),(0,l.kt)("p",null,"In the Cloud Build tab of the Project Settings window:"),(0,l.kt)("p",null,"1.\u9009\u62e9  ",(0,l.kt)("strong",{parentName:"p"},"Manage Build Targets"),"  ",">","  ",(0,l.kt)("strong",{parentName:"p"},"Add new build target"),"  1.\u5728  ",(0,l.kt)("strong",{parentName:"p"},"TARGET SETUP"),"  \u7a97\u53e3\u4e2d\uff0c\u5c06  ",(0,l.kt)("strong",{parentName:"p"},"PLATFORM"),"  \u5b57\u6bb5\u8bbe\u7f6e\u4e3a Android \u5e76\u8f93\u5165\u6709\u7528\u7684  ",(0,l.kt)("strong",{parentName:"p"},"TARGET LABEL")," \u3002 1.\u9009\u62e9  ",(0,l.kt)("strong",{parentName:"p"},"Next: Save")," \u3002 1.\u9009\u62e9  ",(0,l.kt)("strong",{parentName:"p"},"Start Cloud Build")," \uff0c\u7136\u540e\u9009\u62e9\u521a\u624d\u521b\u5efa\u7684\u76ee\u6807\u6784\u5efa\u7248\u672c\u3002"),(0,l.kt)("p",null,"\u901a\u8fc7 Unity Cloud Build \u5f00\u53d1\u8005\u63a7\u5236\u9762\u677f (Developer Dashboard) \u5c06\u6784\u5efa\u7248\u672c\u76f4\u63a5\u63a8\u9001\u5230 UDP\uff08\u5982\u4e0a\u6240\u793a\uff09\u3002"),(0,l.kt)("h2",{id:"\u670d\u52a1\u4e92\u64cd\u4f5c\u6027"},"\u670d\u52a1\u4e92\u64cd\u4f5c\u6027"),(0,l.kt)("p",null,"UDP \u53ef\u4ee5\u8ba9\u6e38\u620f\u4f7f\u7528\u7684\u5176\u4ed6\u670d\u52a1\u4e86\u89e3\u8be5\u6e38\u620f\u662f\u4ece\u54ea\u4e2a\u5546\u5e97\u4e0b\u8f7d\u7684\u3002"),(0,l.kt)("p",null,"Unity \u670d\u52a1\u4ee5\u53ca\u7b2c\u4e09\u65b9\u670d\u52a1\u6216\u4f60\u81ea\u5df1\u7684\u670d\u52a1\u53ef\u4ee5\u591a\u79cd\u65b9\u5f0f\u4f7f\u7528\u8fd9\u4e00\u4fe1\u606f\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982\uff0c\u5728\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"https://unity.com/remote-config"},"Unity Remote Config")," \u65f6\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u5b9a\u4e49\u7684\u89c4\u5219\uff08\u4f8b\u5982\uff0c\u4ece\u54ea\u4e2a\u5546\u5e97\u4e0b\u8f7d\u7684\u6e38\u620f\uff09\u6765\u8c03\u6574\u6e38\u620f\u8bbe\u7f6e\u3002"),(0,l.kt)("p",null,"\u672c\u8282\u4ecb\u7ecd\u5982\u4f55\u8ba9\u5176\u4ed6\u670d\u52a1\u8bbf\u95ee\u6b64\u4fe1\u606f\uff0c\u5e76\u63d0\u4f9b\u4e86\u4e00\u4e2a",(0,l.kt)("a",{parentName:"p",href:"#using-udp-store-with-remote-config"},"\u793a\u4f8b"),"\u3002"),(0,l.kt)("h3",{id:"how-does-it-work"},"How does it work?"),(0,l.kt)("p",null,"\u5f53\u6e38\u620f\u9996\u6b21\u5728\u73a9\u5bb6\u7684\u8bbe\u5907\u4e0a\u542f\u52a8\u65f6\uff0cUDP \u5c06\u521b\u5efa ",(0,l.kt)("inlineCode",{parentName:"p"},"udp.json")," \u6587\u4ef6\u5e76\u5c06\u5176\u653e\u5165\u6e38\u620f\u7684\u201c\u6301\u4e45\u6570\u636e\u8def\u5f84\u201d(Persistent Data Path) \u4e2d\u3002\u6b64\u6587\u4ef6\u5305\u542b\u7684\u5b57\u6bb5 ",(0,l.kt)("inlineCode",{parentName:"p"},"udpStore")," \u4f1a\u663e\u793a\u6e38\u620f\u662f\u4ece\u54ea\u4e2a\u5546\u5e97\u4e0b\u8f7d\u7684\u3002\u53ef\u83b7\u53d6\u8be5\u4fe1\u606f\u4ee5\u6309\u9884\u671f\u65b9\u5f0f\u4f7f\u7528\u5b83\u3002"),(0,l.kt)("p",null," ",(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f\uff1a")," \u8fd9\u4e0d\u4f1a\u5728\u6e38\u620f\u6e05\u5355\u4e2d\u6dfb\u52a0\u4efb\u4f55\u65b0\u7684\u6743\u9650\u3002"),(0,l.kt)("h3",{id:"locating-udpjson"},"Locating udp.json"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"udp.json")," \u6587\u4ef6\u4fdd\u5b58\u5728\uff1a"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Application.PersistentDataPath + '/Unity' + /Application.CloudProjectID + /udp/udp.json")),(0,l.kt)("p",null,"\u5176\u4e2d\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Application.PersistentDataPath")," \u662f\u6e38\u620f\u7684\u6301\u4e45\u6570\u636e\u8def\u5f84"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Application.CloudProjectID")," \u662f\u6e38\u620f\u7684 Unity \u9879\u76ee ID")),(0,l.kt)("p",null,"\u4ee5\u4e0b\u662f\u4e00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"p"},"udp.json")," \u6587\u4ef6\u8def\u5f84\u793a\u4f8b\uff1a"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"path/storage/emulated/0/Android/data/com.mystudio.mygame/files/Unity/c83d2de2-de74-4b75-83fc-ade948bda064/udp/udp.json")),(0,l.kt)("p",null,"\u5176\u4e2d\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Application.PersistentDataPath"),"\\= ",(0,l.kt)("inlineCode",{parentName:"li"},"path/storage/emulated/0/Android/data/com.mystudio.mygame")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Application.CloudProjectID"),"\\= ",(0,l.kt)("inlineCode",{parentName:"li"},"c83d2de2-de74-4b75-83fc-ade948bda064"))),(0,l.kt)("h3",{id:"reading-udpjson"},"Reading udp.json"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"udp.json")," \u6587\u4ef6\u5305\u542b\u4ee5\u4e0b\u4fe1\u606f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'{"key":"UDP","udpStore":"StoreName","udpClientId":"value_of_udpClientId","CloudProjectId":"value_of_CloudProjectId"}\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"udpStore")," \u5b57\u6bb5\u5305\u542b\u7684\u503c\u5c31\u662f\u4e0b\u8f7d\u6e38\u620f\u7684 UDP \u5546\u5e97\u3002"),(0,l.kt)("p",null,"\u4ee5\u4e0b\u662f\u4e00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"p"},"udp.json")," \u6587\u4ef6\u793a\u4f8b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'{"key":"UDP","udpStore":"Huawei","udpClientId":"icjaB7wmu_q7AOjrSLH8yw","cloudProjectId":"bc2be074-09f3-450f-8e98-a0f79c9746f7"}\n')),(0,l.kt)("p",null,"In this example, the game was downloaded from the HUAWEI AppGallery."),(0,l.kt)("p",null," ",(0,l.kt)("strong",{parentName:"p"},"\u63d0\u793a\uff1a")," \u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"JSONUtility.FromJsonOverwrite")," \u53ef\u5c06\u6587\u4ef6\u5185\u5bb9\u4f5c\u4e3a\u6587\u672c\u8d44\u6e90\u8bfb\u53d6\u3002"),(0,l.kt)("h3",{id:"udpstore-values"},"udpStore values"),(0,l.kt)("p",null,"\u4e0b\u8868\u5217\u51fa\u4e86 UDP \u5546\u5e97\u53ef\u80fd\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"udpStore")," \u503c\u3002"),(0,l.kt)("p",null,"\u8fd9\u4e9b\u503c\u533a\u5206\u5927\u5c0f\u5199\u3002"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u5546\u5e97\uff08UDP \u4e0a\u7684\u901a\u9053\u540d\u79f0\uff09"),(0,l.kt)("th",{parentName:"tr",align:null},"udpStore \u7684\u503c"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"UDP Sandbox\uff08\u9002\u7528\u4e8e\u901a\u7528 UDP \u6784\u5efa\u7248\u672c\uff09"),(0,l.kt)("td",{parentName:"tr",align:null},"UdpSandbox")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ONE store"),(0,l.kt)("td",{parentName:"tr",align:null},"OneStore")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"APPTUTTi"),(0,l.kt)("td",{parentName:"tr",align:null},"Apptutti")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Mi GetApps (Xiaomi)"),(0,l.kt)("td",{parentName:"tr",align:null},"XiaomiStore")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"HUAWEI AppGallery"),(0,l.kt)("td",{parentName:"tr",align:null},"Huawei")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"QooApp Game Store"),(0,l.kt)("td",{parentName:"tr",align:null},"QooApp")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Uptodown"),(0,l.kt)("td",{parentName:"tr",align:null},"Uptodown")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"SHAREit"),(0,l.kt)("td",{parentName:"tr",align:null},"ShareIt")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"JioGames"),(0,l.kt)("td",{parentName:"tr",align:null},"JioGames")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Legion Store"),(0,l.kt)("td",{parentName:"tr",align:null},"Legion")))),(0,l.kt)("h3",{id:"using-udpstore-with-remote-config"},"Using udpStore with Remote Config"),(0,l.kt)("p",null,"\u4f7f\u7528 ",(0,l.kt)("a",{parentName:"p",href:"https://unity.com/remote-config"},"Unity Remote Config")," \u53ef\u4ee5\u5728\u4e0d\u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f\u65b0\u7248\u672c\u7684\u60c5\u51b5\u4e0b\u4f18\u5316\u6e38\u620f\u8bbe\u7f6e\u3002\u5f53\u73a9\u5bb6\u542f\u52a8\u6e38\u620f\u65f6\uff0cRemote Config \u4f1a\u68c0\u6d4b\u7528\u4f5c\u89c4\u5219\u6761\u4ef6\u7684\u4e0a\u4e0b\u6587\u5c5e\u6027\uff08\u57fa\u4e8e Unity\u3001\u5e94\u7528\u7a0b\u5e8f\u3001\u7528\u6237\u6216\u4f60\u5b9a\u4e49\u7684\u81ea\u5b9a\u4e49\u6761\u4ef6\uff09\u3002\u7136\u540e\uff0c\u76f8\u5e94\u670d\u52a1\u4f1a\u6839\u636e\u9002\u7528\u4e8e\u6bcf\u4e2a\u73a9\u5bb6\u7684\u89c4\u5219\u4e3a\u73a9\u5bb6\u8fd4\u56de\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u3002"),(0,l.kt)("p",null,"\u5728\u89c4\u5219\u6761\u4ef6\u4e2d\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"udpStore")," \u4f5c\u4e3a\u5c5e\u6027\uff0c\u5c31\u53ef\u4ee5\u6839\u636e\u6e38\u620f\u662f\u4ece\u54ea\u4e2a UDP \u5546\u5e97\u4e0b\u8f7d\u7684\u6765\u786e\u5b9a\u6e38\u620f\u8bbe\u7f6e\u3002"),(0,l.kt)("p",null,"\u8981\u4f7f\u7528 Remote Config \u5b9e\u73b0 udpStore\uff0c\u8bf7\u9075\u5faa\u4ee5\u4e0b\u6b65\u9aa4\u3002"),(0,l.kt)("p",null,"1.\u4e0b\u8f7d\u5e76\u5b89\u88c5 UDP \u5305\u3002 1.\u4e0b\u8f7d\u5e76\u5b89\u88c5 Unity Remote Config \u5305\u3002\u8bf7\u53c2\u9605 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Packages/com.unity.remote-config@latest/index.html"},"Remote Config \u6587\u6863"),"\u3002 1.\u521b\u5efa\u4e00\u4e2a AppAttributes \u7ed3\u6784\uff0c\u5176\u4e2d\u81f3\u5c11\u5305\u542b\u53c2\u6570\u201cudpStore\u201d\uff1a",(0,l.kt)("br",null)," ",(0,l.kt)("inlineCode",{parentName:"p"},"public struct AppAttributes { public string udpStore; }")," 1.\u5728\u6e38\u620f\u4ee3\u7801\u4e2d\uff0c\u5b9e\u73b0 Remote Config ConfigManager.FetchConfigs \u8c03\u7528\u3002 1.\u8c03\u7528 FetchConfigs \u65f6\uff0c\u521b\u5efa AppAttributes \u7ed3\u6784\u7684\u65b0\u5b9e\u4f8b\uff0c\u4ece\u4ee5\u4e0b\u4f4d\u7f6e\u8bfb\u53d6 UDP \u5546\u5e97\u6570\u636e\u6587\u4ef6\uff1a Application.PersistentDataPath + \u2018/Unity\u2019 + /Application.CloudProjectId + /udp/udp.json \u4f7f\u7528 JSONUtility.FromJsonOverwrite \u53ef\u5c06\u6587\u4ef6\u5185\u5bb9\u4f5c\u4e3a\u6587\u672c\u8d44\u6e90\u8bfb\u53d6\u3002",(0,l.kt)("br",null)," ",(0,l.kt)("inlineCode",{parentName:"p"},'{ string udpFilePath = System.IO.Path.Combine(Application.persistentDataPath, "Unity", Application.cloudProjectId, "udp", "udp.json"); string udpFileContents = System.IO.File.ReadAllText(udpFilePath); var appAttr = JsonUtility.FromJson&lt;AppAttributes&gt;(udpFileContents); Unity.RemoteConfig.ConfigManager.FetchCompleted += ConfigManager_FetchCompleted; Unity.RemoteConfig.ConfigManager.FetchConfigs(null, appAttr); }')," 1.\u786e\u4fdd\u5728 ConfigManager.FetchConfigs \u4e2d\u4f7f\u7528 AppAttributes \u7ed3\u6784\u3002 1. Open the  ",(0,l.kt)("strong",{parentName:"p"},"Remote Config"),"  settings ( ",(0,l.kt)("strong",{parentName:"p"},"Services"),"  ",">","  ",(0,l.kt)("strong",{parentName:"p"},"Remote Config"),"  ",">","  ",(0,l.kt)("strong",{parentName:"p"},"Configure")," ), and create the parameters that you\u2019d want to change based on the UDP store. 1.\u8bbe\u7f6e\u597d\u53c2\u6570\u5e76\u63d2\u5165\u5230\u6e38\u620f\u4ee3\u7801\u4e2d\u540e\uff0c\u8bf7\u5728 Remote Config \u7a97\u53e3\u4e2d\u4e3a\u6bcf\u4e2a\u5546\u5e97\u521b\u5efa\u4e00\u4e2a\u89c4\u5219\u3002 1.\u5728\u6bcf\u4e2a\u89c4\u5219\u7684\u6761\u4ef6\u4e2d\uff0c\u653e\u5165\uff1aapp.udpStore == \u201c","[","storeName","]","\u201d",(0,l.kt)("br",null)," ","*"," \u8bf7\u53c2\u9605 ",(0,l.kt)("a",{parentName:"p",href:"#udp-store-values"},"udpStore \u7684\u503c"),(0,l.kt)("br",null)," ",(0,l.kt)("img",{parentName:"p",src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/UDPServiceInteroperability_01.png",alt:"UDPServiceInteroperability_01.png"})," 1. To enable the setting, select the checkbox next to the name of the rule on the left panel in the Remote Config settings. 1.\u9488\u5bf9\u8bbe\u5907\u6784\u5efa\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u786e\u4fdd\u6b63\u786e\u5e94\u7528\u89c4\u5219\uff0c\u7136\u540e\u53d1\u5e03\u3002"),(0,l.kt)("h2",{id:"\u4f7f\u7528-unity-iap-\u5b9e\u73b0\u7528\u4e8e-udp-\u7684-iap-\u5546\u54c1"},"\u4f7f\u7528 Unity IAP \u5b9e\u73b0\u7528\u4e8e UDP \u7684 IAP \u5546\u54c1"),(0,l.kt)("p",null,"\u5982\u679c\u8981\u4f7f\u7528 Unity IAP \u5b9e\u73b0 UDP\uff0c\u8bf7\u9996\u5148",(0,l.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Manual/UnityIAPSettingUp.html"},"\u8bbe\u7f6e Unity IAP"),"\u3002"),(0,l.kt)("p",null," ",(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f")," \uff1a\u5982\u679c\u9009\u62e9\u4f7f\u7528 Unity IAP \u7248\u672c 1.22.0\u20131.23.5 \u6765\u5b9e\u73b0 UDP\uff08\u800c\u4e0d\u662f\u4f7f\u7528 UDP \u5305\uff09\uff0c\u5219\u4ec5\u901a\u8fc7 Unity IAP \u5b9e\u73b0\u5373\u53ef\u3002"),(0,l.kt)("p",null,"Unity IAP \u81ea\u52a8\u8fdb\u884c\u4ee5\u4e0b\u5904\u7406\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u521d\u59cb\u5316 UDP"),(0,l.kt)("li",{parentName:"ul"},"\u67e5\u8be2\u5546\u5e97\u7684 IAP \u5546\u54c1\u5e93\u5b58"),(0,l.kt)("li",{parentName:"ul"},"\u8bf7\u6c42\u8d2d\u4e70\u67d0\u4e2a\u5546\u54c1"),(0,l.kt)("li",{parentName:"ul"},"\u6d88\u8017\u6240\u8d2d\u4e70\u7684\u5546\u54c1")),(0,l.kt)("p",null,"\u4f46\u662f\uff0c\u4f60\u7684\u6e38\u620f\u5fc5\u987b\u6839\u636e ",(0,l.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Manual/UnityIAP.html"},"Unity IAP \u6587\u6863"),"\u6b63\u786e\u4f7f\u7528 Unity IAP \u7684\u7c7b\u4f3c\u529f\u80fd\uff08\u4f8b\u5982\u521d\u59cb\u5316\u548c\u8d2d\u4e70\uff09\u3002"),(0,l.kt)("p",null,"\u4f7f\u7528 Unity IAP \u5b9e\u73b0\u6e38\u620f\u7684\u5e94\u7528\u5185\u8d2d\u540e\uff0c\u8bf7\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u4f7f\u7528 Unity IAP \u8bbe\u7f6e UDP\u3002"),(0,l.kt)("h3",{id:"\u67e5\u8be2-iap-\u5e93\u5b58"},"\u67e5\u8be2 IAP \u5e93\u5b58"),(0,l.kt)("h4",{id:"\u4f7f\u7528-unity-iap\u4ee3\u7801\u5b9e\u73b0"},"\u4f7f\u7528 Unity IAP\uff08\u4ee3\u7801\u5b9e\u73b0\uff09"),(0,l.kt)("h5",{id:"\u83b7\u53d6\u7f16\u8f91\u5668\u4e2d\u5b9a\u4e49\u7684-iap-\u5546\u54c1"},"\u83b7\u53d6\u7f16\u8f91\u5668\u4e2d\u5b9a\u4e49\u7684 IAP \u5546\u54c1"),(0,l.kt)("p",null,"When fetching the IAP products to pass to the ",(0,l.kt)("inlineCode",{parentName:"p"},"queryInventory")," method, invoke ",(0,l.kt)("inlineCode",{parentName:"p"},"ProductCatalog.LoadDefaultCatalog()"),". This returns the IAP products defined in the Editor\u2019s  ",(0,l.kt)("strong",{parentName:"p"},"IAP Catalog"),"  ( ",(0,l.kt)("strong",{parentName:"p"},"Services"),"  ",">","  ",(0,l.kt)("strong",{parentName:"p"},"Unity IAP"),"  ",">","  ",(0,l.kt)("strong",{parentName:"p"},"IAP Catalog")," )."),(0,l.kt)("p",null,"\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"var catalog = ProductCatalog.LoadDefaultCatalog();\n\nforeach (var product in catalog.allValidProducts)\n{\n   if (product.allStoreIDs.Count &gt; 0)\n   {\n       var ids = new IDs();\n       foreach (var storeID in product.allStoreIDs)\n       {\n           ids.Add(storeID.id, storeID.store);\n       }\n       builder.AddProduct(product.id, product.type, ids);\n   }\n   else\n   {\n       builder.AddProduct(product.id, product.type);\n   }\n}\n")),(0,l.kt)("h5",{id:"\u4ece-udp-\u63a7\u5236\u53f0\u83b7\u53d6-iap-\u5546\u54c1\u4fe1\u606f"},"\u4ece UDP \u63a7\u5236\u53f0\u83b7\u53d6 IAP \u5546\u54c1\u4fe1\u606f"),(0,l.kt)("p",null,"\u5982\u679c\u4f60\u6253\u7b97\u5728 UDP \u63a7\u5236\u53f0\u4e0a\u4fee\u6539\u6e38\u620f\u7684 IAP \u76ee\u5f55\uff0c\u8bf7\u51c6\u5907\u597d\u6e38\u620f\u4ee5\u4fbf\u4ece UDP \u63a7\u5236\u53f0\u83b7\u53d6 IAP \u5546\u54c1\u4fe1\u606f\u3002"),(0,l.kt)("p",null,"\u5728\u83b7\u53d6 IAP \u5546\u54c1\u4ee5\u4fbf\u4f20\u9012\u7ed9 ",(0,l.kt)("inlineCode",{parentName:"p"},"queryInventory")," \u65b9\u6cd5\u65f6\uff0c\u8bf7\u8c03\u7528 builder.AddProduct \u4ee5\u83b7\u53d6 UDP \u63a7\u5236\u53f0\u4e0a\u5b9a\u4e49\u7684\u7279\u5b9a IAP \u5546\u54c1\uff1a"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"builder.AddProduct(product.id, product.type, new IDs{})")),(0,l.kt)("p",null,"\u8981\u663e\u793a\u5e26\u6709\u8d27\u5e01\u683c\u5f0f\u7684\u5546\u54c1\u4ef7\u683c\uff0c\u8bf7\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"productInfo.Value.Price"),"\u3002"),(0,l.kt)("h5",{id:"\u4ece-udp-\u63a7\u5236\u53f0\u83b7\u53d6-iap-\u76ee\u5f55"},"\u4ece UDP \u63a7\u5236\u53f0\u83b7\u53d6 IAP \u76ee\u5f55"),(0,l.kt)("p",null,"\u8981\u83b7\u53d6\u5728 UDP \u63a7\u5236\u53f0\u4e0a\u5b9a\u4e49\u7684\u6240\u6709 IAP \u5546\u54c1\uff0c\u8bf7\u4e0d\u8981\u8c03\u7528\u4efb\u4f55 IAP \u5546\u54c1\u68c0\u7d22\u65b9\u6cd5\u3002\u4f60\u7684\u6e38\u620f\u968f\u540e\u5c06\u4ece UDP \u63a7\u5236\u53f0\u83b7\u53d6\u6574\u4e2a IAP \u76ee\u5f55\u3002"),(0,l.kt)("p",null,"\u6ce8\u610f\uff1a\u5c06 IAP \u5546\u54c1\u7684 CSV \u6587\u4ef6\u4e0a\u4f20\u5230 UDP \u63a7\u5236\u53f0\u4e0a\u4f1a\u5b8c\u5168\u8986\u76d6\u4f60\u7684 IAP \u76ee\u5f55\u3002"),(0,l.kt)("h4",{id:"\u4f7f\u7528-unity-iap-\u5305\u586b\u5145-iap-\u76ee\u5f55"},"\u4f7f\u7528 Unity IAP \u5305\u586b\u5145 IAP \u76ee\u5f55"),(0,l.kt)("p",null,"\u5728 ",(0,l.kt)("a",{parentName:"p",href:"/docs/udp#iap-%E7%9B%AE%E5%BD%95"},"IAP \u76ee\u5f55"),"\u4e2d\u6dfb\u52a0\u548c\u914d\u7f6e UDP \u5e94\u7528\u5185\u8d2d\u3002"),(0,l.kt)("p",null," ",(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f")," \uff1a\u5982\u679c\u672a\u5728\u6e38\u620f\u5ba2\u6237\u7aef\u4e2d\u4f7f\u7528 IAP \u76ee\u5f55\uff08\u4f8b\u5982\uff0c\u5982\u679c\u4ec5\u5728\u6e38\u620f\u670d\u52a1\u5668\u4e0a\u7ef4\u62a4 IAP \u5546\u54c1\uff09\uff0c\u4ecd\u5fc5\u987b",(0,l.kt)("a",{parentName:"p",href:"/docs/udp/udp-implementing-iap#%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84-iap-%E5%95%86%E5%93%81"},"\u5728 UDP \u63a7\u5236\u53f0\u4e0a\u521b\u5efa IAP \u76ee\u5f55"),"\u3002"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"In the Unity Editor, select  ",(0,l.kt)("strong",{parentName:"li"},"Services"),"  ",">","  ",(0,l.kt)("strong",{parentName:"li"},"Unity IAP"),"  ",">","  ",(0,l.kt)("strong",{parentName:"li"},"IAP Catalog")," . 1.\u9009\u62e9  ",(0,l.kt)("strong",{parentName:"li"},"Add Product")," \uff0c\u7136\u540e\u8f93\u5165\u6bcf\u4e2a IAP \u5546\u54c1\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 1.\u5728 Unity Distribution Portal Configuration \u4e0b\u6dfb\u52a0 IAP \u5546\u54c1\u7684\u4ef7\u683c\u3002 ",(0,l.kt)("img",{parentName:"li",src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/UDPGamesWithIAP_09.png",alt:"UDPGamesWithIAP_09.png"})," 1.\u8981\u5c06 IAP \u5546\u54c1\u4fdd\u5b58\u5230 UDP \u63a7\u5236\u53f0\uff0c\u8bf7\u9009\u62e9  ",(0,l.kt)("strong",{parentName:"li"},"Sync to UDP")," \u3002\u5bf9\u4f60\u521b\u5efa\u7684\u6bcf\u4e2a IAP \u5546\u54c1\u6267\u884c\u6b64\u64cd\u4f5c\u3002")),(0,l.kt)("p",null,"\u4e3a\u4e86\u786e\u4fdd\u6b63\u786e\u4fdd\u5b58\u4e86 IAP \u76ee\u5f55\uff0c\u8bf7\u68c0\u67e5 UDP \u63a7\u5236\u53f0\u4e2d\u662f\u5426\u663e\u793a\u4e86\u6240\u6dfb\u52a0\u7684\u5546\u54c1\u3002"))}m.isMDXComponent=!0}}]);