"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[99105],{3905:function(t,e,n){n.d(e,{Zo:function(){return p},kt:function(){return h}});var a=n(67294);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){if(null==t)return{};var n,a,i=function(t,e){if(null==t)return{};var n,a,i={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var s=a.createContext({}),c=function(t){var e=a.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):o(o({},e),t)),n},p=function(t){var e=c(t.components);return a.createElement(s.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},y=a.forwardRef((function(t,e){var n=t.components,i=t.mdxType,r=t.originalType,s=t.parentName,p=l(t,["components","mdxType","originalType","parentName"]),y=c(n),h=i,d=y["".concat(s,".").concat(h)]||y[h]||u[h]||r;return n?a.createElement(d,o(o({ref:e},p),{},{components:n})):a.createElement(d,o({ref:e},p))}));function h(t,e){var n=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var r=n.length,o=new Array(r);o[0]=y;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=t,l.mdxType="string"==typeof t?t:i,o[1]=l;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}y.displayName="MDXCreateElement"},15371:function(t,e,n){n.r(e),n.d(e,{assets:function(){return p},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return u}});var a=n(87462),i=n(63366),r=(n(67294),n(3905)),o=["components"],l={id:"UnityAnalyticsPIPL",title:"Unity Analytics and PIPL",slug:"/unity-analytics/unity-analytics-pipl"},s="Unity Analytics and PIPL",c={unversionedId:"unity-services/unity-analytics/UnityAnalyticsPIPL",id:"unity-services/unity-analytics/UnityAnalyticsPIPL",title:"Unity Analytics and PIPL",description:"China\u2019s National People\u2019s Congress has passed the Personal Information Protection Law (PIPL), to protect the data privacy of Chinese citizens. It is effective starting November 1st, 2021, and requires players in China to provide opt-in consent to their data being processed and opt-in consent to their data being transferred outside of China.",source:"@site/docs/unity-services/unity-analytics/unity-analytics-pipl.md",sourceDirName:"unity-services/unity-analytics",slug:"/unity-analytics/unity-analytics-pipl",permalink:"/docs/unity-analytics/unity-analytics-pipl",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/unity-services/unity-analytics/unity-analytics-pipl.md",tags:[],version:"current",frontMatter:{id:"UnityAnalyticsPIPL",title:"Unity Analytics and PIPL",slug:"/unity-analytics/unity-analytics-pipl"},sidebar:"tutorialSidebar",previous:{title:"Unity Analytics \u6982\u8ff0",permalink:"/docs/unity-analytics/unity-analytics-overview"},next:{title:"Unity Analytics \u539f\u59cb\u6570\u636e\u5bfc\u51fa (Raw Data Export)",permalink:"/docs/unity-analytics/unity-analytics-raw-data-export"}},p={},u=[{value:"Unity Analytics Data Privacy plugin",id:"unity-analytics-data-privacy-plugin",level:2},{value:"Presenting consent flows to the player",id:"presenting-consent-flows-to-the-player",level:2},{value:"Implementing the Unity solution",id:"implementing-the-unity-solution",level:3},{value:"Implementing a custom solution",id:"implementing-a-custom-solution",level:3}],y={toc:u};function h(t){var e=t.components,n=(0,i.Z)(t,o);return(0,r.kt)("wrapper",(0,a.Z)({},y,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"unity-analytics-and-pipl"},"Unity Analytics and PIPL"),(0,r.kt)("p",null,"China\u2019s National People\u2019s Congress has passed the Personal Information Protection Law (",(0,r.kt)("a",{parentName:"p",href:"https://www.adexchanger.com/privacy/your-guide-to-pipl-chinas-new-privacy-law/"},"PIPL"),"), to protect the data privacy of Chinese citizens. It is effective starting November 1st, 2021, and requires players in China to provide opt-in consent to their data being processed and opt-in consent to their data being transferred outside of China."),(0,r.kt)("p",null,"In order to comply with this legislation, Unity must block data collection from players in China until they provide their consent to both opt-ins. This means that from November 1st, 2021, data from players in China will cease to be processed. Analytics reporting and player engagement systems reliant on data will not be available for players in China."),(0,r.kt)("p",null,"The Analytics Data Privacy plugin contains relevant functionality to communicate the player\u2019s consent for both opt-ins. As a developer, you will need to add the Data Privacy plugin to your game along with reference to the Unity Privacy Policy in order to utilize the consent flow. Once the consent flow is in place, data collection will resume for players in China who opt in."),(0,r.kt)("h2",{id:"unity-analytics-data-privacy-plugin"},"Unity Analytics Data Privacy plugin"),(0,r.kt)("p",null,"The Unity Analytics Data Privacy plugin gives your players control over the SDK\u2019s data collection. This plugin is part of the Unity Analytics library package. You can use the Package Manager in the Unity Editor ( ",(0,r.kt)("strong",{parentName:"p"},"Window"),"  ",">","  ",(0,r.kt)("strong",{parentName:"p"},"Package Manager")," ) to double-check that the package is enabled in a project."),(0,r.kt)("p",null,"The plugin does not support the following platforms:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Linux")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Windows Phone")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Tizen")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Apple TV")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Blackberry"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Note")," : For versions of Unity prior to 2018.3, you must use the Unity Analytics Data Privacy asset package from the ",(0,r.kt)("a",{parentName:"p",href:"https://www.assetstore.unity3d.com/#!/content/118922"},"Unity Asset Store"),". The Asset Store version can be used with Unity 4.7, 5.1+, 2017.1+, 2018.1, and 2018.2."))),(0,r.kt)("h2",{id:"presenting-consent-flows-to-the-player"},"Presenting consent flows to the player"),(0,r.kt)("p",null,"The Data Privacy plugin includes a Unity UI button prefab, which you can place in a suitable location of your user interface. When a player clicks this button, it opens the Player Data Privacy page in a web browser where the player can opt in to the following consents:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"1. Consent to collect data for analytics.\n2. Consent to transfer data outside of mainland China.\n")),(0,r.kt)("p",null,"Developers can also provide their own user interfaces and open the Player Data Privacy page using the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Manual/UnityAnalyticsDataPrivacyAPI.html"},"data privacy API"),"."),(0,r.kt)("p",null," ",(0,r.kt)("strong",{parentName:"p"},"Important")," : If a player has a browser pop-up blocker enabled, their browser can prevent the data privacy page from opening. Some browsers note that a page has been blocked, but others provide no notice at all. Consider adding a message in your user interface that warns players that a pop-up blocker might prevent the page from opening."),(0,r.kt)("h3",{id:"implementing-the-unity-solution"},"Implementing the Unity solution"),(0,r.kt)("p",null,"To implement the Data Privacy plugin-provided UI button:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"If you do not already have a ",(0,r.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Manual/UICanvas.html"},"Canvas")," GameObject in your Scene, you will need to add one. Unity automatically adds an ",(0,r.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Manual/script-EventSystem.html"},"EventSystem")," when you add the Canvas.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Drag the  ",(0,r.kt)("strong",{parentName:"p"},"DataPrivacyButton"),"  prefab from the Project window (in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Packages/Analytics Library/DataPrivacy")," folder) to the Canvas GameObject in your Scene.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Adjust the position, graphics, and text of the button as needed.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The button is already connected to the data privacy API, so that when a player located in China clicks on it the player\u2019s personal data management page will open in a web browser."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Note:"),"  The version of the button prefab under the ",(0,r.kt)("inlineCode",{parentName:"p"},"Packages")," folder is read-only. You can make changes to the instance of the button in the Scene hierarchy, but you cannot save those changes back to the original prefab."))),(0,r.kt)("h3",{id:"implementing-a-custom-solution"},"Implementing a custom solution"),(0,r.kt)("p",null,"If you use a custom interface button, you can request the URL of the user\u2019s data opt-in page, then open that URL in a browser or web view:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create a UI component that informs the player of their ability to opt-in to data collection and transfer. Note that the Data Privacy plugin includes an icon in the ",(0,r.kt)("inlineCode",{parentName:"li"},"Packages/Analytics Library/DataPrivacy")," folder. Unity encourages you to use this icon on your data privacy prompt to provide a consistent visual cue for players encountering data privacy controls in Unity games."),(0,r.kt)("li",{parentName:"ol"},"When the player elects to opt in or out, call the ",(0,r.kt)("inlineCode",{parentName:"li"},"DataPrivacy.FetchPrivacyUrl()")," method. This takes an ",(0,r.kt)("inlineCode",{parentName:"li"},"Action&lt;string&gt;")," object that it invokes when the network request completes. You can optionally pass in a second ",(0,r.kt)("inlineCode",{parentName:"li"},"Action&lt;string&gt;")," function to handle cases where the network request fails."),(0,r.kt)("li",{parentName:"ol"},"In your handler for the ",(0,r.kt)("inlineCode",{parentName:"li"},"FetchPrivacyUrl()")," request, use the ",(0,r.kt)("inlineCode",{parentName:"li"},"Application.OpenURL()")," method to open the URL in a browser.")),(0,r.kt)("p",null,"\u4f8b\u5982\uff0c\u4ee5\u4e0b\u811a\u672c\u5c06\u6253\u5f00 Player Data Privacy \u9875\u9762\u6765\u54cd\u5e94\u5bf9\u6e38\u620f\u5bf9\u8c61\u7684\u5355\u51fb\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'using System;\nusing UnityEngine;\nusing UnityEngine.Analytics;\n\npublic class OptOutHandler : MonoBehaviour {\n\n    static void OnFailure(string reason)\n    {\n        Debug.LogWarning(String.Format("Failed to get data privacy page URL: {0}", reason));\n    }\n\n    void OnURLReceived(string url)\n    {\n        Application.OpenURL(url);\n    }\n\n    public void OpenDataURL()\n    {\n        DataPrivacy.FetchPrivacyUrl(OnURLReceived, OnFailure);\n    }\n\n\n    void OnMouseOver(){\n        if(Input.GetMouseButtonUp(0)){\n            OpenDataURL();\n        }\n    }\n}\n')),(0,r.kt)("p",null,"See documentation on the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Manual/UnityAnalyticsDataPrivacyAPI.html"},"Unity Analytics DataPrivacy API")," for more information."))}h.isMDXComponent=!0}}]);