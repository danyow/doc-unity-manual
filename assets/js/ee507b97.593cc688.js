"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[73440],{3905:function(e,t,n){n.d(t,{Zo:function(){return o},kt:function(){return l}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var g=a.createContext({}),p=function(e){var t=a.useContext(g),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},o=function(e){var t=p(e.components);return a.createElement(g.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,g=e.parentName,o=c(e,["components","mdxType","originalType","parentName"]),d=p(n),l=r,m=d["".concat(g,".").concat(l)]||d[l]||u[l]||i;return n?a.createElement(m,s(s({ref:t},o),{},{components:n})):a.createElement(m,s({ref:t},o))}));function l(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=d;var c={};for(var g in t)hasOwnProperty.call(t,g)&&(c[g]=t[g]);c.originalType=e,c.mdxType="string"==typeof e?e:r,s[1]=c;for(var p=2;p<i;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},74644:function(e,t,n){n.r(t),n.d(t,{assets:function(){return o},contentTitle:function(){return g},default:function(){return l},frontMatter:function(){return c},metadata:function(){return p},toc:function(){return u}});var a=n(87462),r=n(63366),i=(n(67294),n(3905)),s=["components"],c={id:"upm-api",title:"\u5305\u7684\u811a\u672c API",slug:"/upm-api"},g="\u5305\u7684\u811a\u672c API",p={unversionedId:"packages-list/packages/upm-api/upm-api",id:"packages-list/packages/upm-api/upm-api",title:"\u5305\u7684\u811a\u672c API",description:"\u60a8\u53ef\u4ee5\u7f16\u5199 C#\u811a\u672c\u4f7f\u7528 Package Manager \u811a\u672c API \u4e0e Package Manager \u8fdb\u884c\u4ea4\u4e92\u3002\u4f8b\u5982\uff0c\u53ef\u80fd\u9700\u8981\u6839\u636e\u76ee\u6807\u673a\u5668\u7684\u5e73\u53f0\u6765\u5b89\u88c5\u7279\u5b9a\u7684\u5305\u6216\u7248\u672c\u3002",source:"@site/docs/packages-list/packages/upm-api/upm-api.md",sourceDirName:"packages-list/packages/upm-api",slug:"/upm-api",permalink:"/doc-unity-manual/docs/upm-api",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/packages-list/packages/upm-api/upm-api.md",tags:[],version:"current",frontMatter:{id:"upm-api",title:"\u5305\u7684\u811a\u672c API",slug:"/upm-api"},sidebar:"tutorialSidebar",previous:{title:"Unity \u7684 Package Manager",permalink:"/doc-unity-manual/docs/packages"},next:{title:"\u8bbf\u95ee\u5305\u8d44\u6e90",permalink:"/doc-unity-manual/docs/upm-api/upm-assets"}},o={},u=[{value:"\u5c06\u5305\u6dfb\u52a0\u5230\u9879\u76ee",id:"\u5c06\u5305\u6dfb\u52a0\u5230\u9879\u76ee",level:2},{value:"\u6d4f\u89c8\u9879\u76ee\u4e2d\u7684\u5305\u5217\u8868",id:"\u6d4f\u89c8\u9879\u76ee\u4e2d\u7684\u5305\u5217\u8868",level:2},{value:"\u5728\u9879\u76ee\u4e2d\u5d4c\u5165\u5305",id:"\u5728\u9879\u76ee\u4e2d\u5d4c\u5165\u5305",level:2},{value:"Package Manager \u4e8b\u4ef6",id:"package-manager-\u4e8b\u4ef6",level:2},{value:"\u4f7f\u7528 registeringPackages \u4e8b\u4ef6\u7684\u793a\u4f8b",id:"\u4f7f\u7528-registeringpackages-\u4e8b\u4ef6\u7684\u793a\u4f8b",level:3},{value:"\u4f7f\u7528 registeredPackages \u4e8b\u4ef6\u7684\u793a\u4f8b",id:"\u4f7f\u7528-registeredpackages-\u4e8b\u4ef6\u7684\u793a\u4f8b",level:3}],d={toc:u};function l(e){var t=e.components,n=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"\u5305\u7684\u811a\u672c-api"},"\u5305\u7684\u811a\u672c API"),(0,i.kt)("p",null,"\u60a8\u53ef\u4ee5\u7f16\u5199 C#\u811a\u672c\u4f7f\u7528 Package Manager \u811a\u672c API \u4e0e Package Manager \u8fdb\u884c\u4ea4\u4e92\u3002\u4f8b\u5982\uff0c\u53ef\u80fd\u9700\u8981\u6839\u636e\u76ee\u6807\u673a\u5668\u7684\u5e73\u53f0\u6765\u5b89\u88c5\u7279\u5b9a\u7684\u5305\u6216\u7248\u672c\u3002"),(0,i.kt)("p",null,"\u7cfb\u7edf\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\u4f9d\u8d56 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Client.html"},"PackageManager.Client")," \u7c7b\uff0c\u53ef\u4f7f\u7528\u8be5\u7c7b\u6765\u67e5\u627e\u5305\u3001\u6d4f\u89c8\u5305\u5217\u8868\u4ee5\u53ca\u901a\u8fc7\u811a\u672c\u5b89\u88c5\u548c\u5378\u8f7d\u5305\u3002"),(0,i.kt)("p",null,"\u53e6\u4e00\u4e2a\u91cd\u8981\u7684\u7c7b\u662f ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.PackageInfo.html"},"PackageManager.PackageInfo"),"\uff0c\u5176\u4e2d\u5305\u542b\u5305\u7684\u72b6\u6001\uff0c\u5305\u62ec\u4ece\u5305\u6e05\u5355\u548c\u6ce8\u518c\u8868\u83b7\u53d6\u7684\u5143\u6570\u636e\u3002\u4f8b\u5982\uff0c\u53ef\u83b7\u53d6\u9002\u7528\u4e8e\u5305\u7684",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.VersionsInfo.html"},"\u7248\u672c\u5217\u8868"),"\uff0c\u6216\u8005\u83b7\u53d6\u5728\u67e5\u627e\u6216\u5b89\u88c5\u5305\u65f6\u53ef\u80fd\u53d1\u751f\u7684",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/Manual/PackageManager.PackageInfo-errors.html"},"\u6240\u6709\u9519\u8bef\u7684\u5217\u8868"),"\u3002"),(0,i.kt)("h2",{id:"\u5c06\u5305\u6dfb\u52a0\u5230\u9879\u76ee"},"\u5c06\u5305\u6dfb\u52a0\u5230\u9879\u76ee"),(0,i.kt)("p",null,"\u4ee5\u4e0b\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Client.html"},"Client")," \u7c7b\u6765\u5b89\u88c5\u5305\u6216\u8005\u5c06\u5305\u6dfb\u52a0\u5230\u9879\u76ee\u4e2d\u3002"),(0,i.kt)("p",null,"\u53ef\u4ee5\u4f7f\u7528 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Client.Add.html"},"Client.Add")," \u6dfb\u52a0\u5305\uff1a\u5728\u8c03\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"Client.Add")," \u65b9\u6cd5\u65f6\uff0c\u60a8\u53ea\u9700\u6307\u5b9a\u5305\u540d\u79f0\u6216\u5177\u6709\u7279\u5b9a\u7248\u672c\u7684\u540d\u79f0\u3002\u4f8b\u5982\uff0c\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},'Client.Add("com.unity.textmeshpro")'),"\uff0c\u5219\u4f1a\u5b89\u88c5\uff08\u6216\u66f4\u65b0\u5230\uff09TextMesh Pro \u5305\u7684\u6700\u65b0\u7248\u672c\uff1b\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},'Client.Add("com.unity.textmeshpro@1.3.0")'),"\uff0c\u5219\u4f1a\u5b89\u88c5 TextMesh Pro \u5305\u7248\u672c 1.3.0\u3002"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Client.Add")," \u65b9\u6cd5\u5c06\u8fd4\u56de ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Requests.AddRequest.html"},"AddRequest")," \u5b9e\u4f8b\uff0c\u53ef\u4ee5\u7528\u6765\u83b7\u53d6\u72b6\u6001\u3001\u4efb\u4f55\u9519\u8bef\u6216 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Requests.Request_1.Result.html"},"Request")," \u54cd\u5e94\uff08\u5305\u542b\u65b0\u6dfb\u52a0\u7684\u5305\u7684 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.PackageInfo.html"},"PackageInfo")," \u4fe1\u606f\uff09\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'using System;\nusing UnityEditor;\nusing UnityEditor.PackageManager.Requests;\nusing UnityEditor.PackageManager;\nusing UnityEngine;\n\nnamespace Unity.Editor.Example {\n   static class AddPackageExample\n   {\n       static AddRequest Request;\n\n       [MenuItem("Window/Add Package Example")]\n       static void Add()\n       {\n           // Add a package to the project\n           Request = Client.Add("com.unity.textmeshpro");\n           EditorApplication.update += Progress;\n       }\n\n       static void Progress()\n       {\n           if (Request.IsCompleted)\n           {\n               if (Request.Status == StatusCode.Success)\n                   Debug.Log("Installed: " + Request.Result.packageId);\n               else if (Request.Status &gt;= StatusCode.Failure)\n                   Debug.Log(Request.Error.message);\n\n               EditorApplication.update -= Progress;\n           }\n       }\n   }\n}\n')),(0,i.kt)("h2",{id:"\u6d4f\u89c8\u9879\u76ee\u4e2d\u7684\u5305\u5217\u8868"},"\u6d4f\u89c8\u9879\u76ee\u4e2d\u7684\u5305\u5217\u8868"),(0,i.kt)("p",null,"\u4ee5\u4e0b\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Client.html"},"Client")," \u7c7b\u6765\u904d\u5386\u9879\u76ee\u4e2d\u7684\u5305\u3002"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Client.List.html"},"Client.List")," \u65b9\u6cd5\u5c06\u8fd4\u56de ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Requests.ListRequest.html"},"ListRequest")," \u5b9e\u4f8b\uff0c\u53ef\u4ee5\u7528\u6765\u83b7\u53d6 List \u64cd\u4f5c\u7684\u72b6\u6001\u3001\u4efb\u4f55\u9519\u8bef\u6216\u8005 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Requests.Request_1.Result.html"},"Request")," \u54cd\u5e94\uff08\u5305\u542b\u60a8\u53ef\u4ee5\u904d\u5386\u7684 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.PackageCollection.html"},"PackageCollection"),"\uff09\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'using System;\nusing UnityEditor;\nusing UnityEditor.PackageManager.Requests;\nusing UnityEditor.PackageManager;\nusing UnityEngine;\n\nnamespace Unity.Editor.Example {\n   static class ListPackageExample\n   {\n       static ListRequest Request;\n\n       [MenuItem("Window/List Package Example")]\n       static void List()\n       {\n           Request = Client.List();    // List packages installed for the project\n           EditorApplication.update += Progress;\n       }\n\n       static void Progress()\n       {\n           if (Request.IsCompleted)\n           {\n               if (Request.Status == StatusCode.Success)\n                   foreach (var package in Request.Result)\n                       Debug.Log("Package name: " + package.name);\n               else if (Request.Status &gt;= StatusCode.Failure)\n                   Debug.Log(Request.Error.message);\n\n               EditorApplication.update -= Progress;\n           }\n       }\n   }\n}\n')),(0,i.kt)("h2",{id:"\u5728\u9879\u76ee\u4e2d\u5d4c\u5165\u5305"},"\u5728\u9879\u76ee\u4e2d\u5d4c\u5165\u5305"),(0,i.kt)("p",null,"\u4ee5\u4e0b\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Client.html"},"Client")," \u7c7b\u6765",(0,i.kt)("a",{parentName:"p",href:"/doc-unity-manual/docs/upm-manifest-prj/upm-embed"},"\u5d4c\u5165"),"\u60a8\u7684\u9879\u76ee\u4e2d\u5df2\u7ecf\u5b89\u88c5\u7684\u67d0\u4e2a\u5305\u3002\u4e3b\u65b9\u6cd5\u662f ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Client.Embed.html"},"Client.Embed")," \u65b9\u6cd5\uff0c\u53ef\u751f\u6210\u5305\u7684\u526f\u672c\u5e76\u5b58\u50a8\u5728\u9879\u76ee\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Packages")," \u6587\u4ef6\u5939\u4e0b\u9762\u3002"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Client.Embed.html"},"Client.Embed")," \u65b9\u6cd5\u5c06\u8fd4\u56de ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Requests.EmbedRequest.html"},"EmbedRequest")," \u5b9e\u4f8b\uff0c\u53ef\u4ee5\u7528\u6765\u83b7\u53d6 Embed \u64cd\u4f5c\u7684\u72b6\u6001\u3001\u4efb\u4f55\u9519\u8bef\u6216 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Requests.Request_1.Result.html"},"Request")," \u54cd\u5e94\uff08\u5305\u542b\u65b0\u5d4c\u5165\u7684\u5305\u7684 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.PackageInfo.html"},"PackageInfo")," \u4fe1\u606f\uff09\u3002"),(0,i.kt)("p",null,"\u6b64\u793a\u4f8b\u8fd8\u4f7f\u7528 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Client.List.html"},"Client.List")," \u65b9\u6cd5\u6765\u8bbf\u95ee\u9879\u76ee\u4e2d\u5f53\u524d\u5b89\u88c5\u7684\u5305\u7684\u96c6\u5408\uff0c\u5e76\u9009\u62e9\u7b2c\u4e00\u4e2a\u65e2\u4e0d\u662f\u5d4c\u5165\u5f0f\u5305\u4e5f\u4e0d\u662f\u5185\u7f6e\u5305\u7684\u5305\u3002"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Client.List.html"},"Client.List")," \u65b9\u6cd5\u5c06\u8fd4\u56de ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Requests.ListRequest.html"},"ListRequest")," \u5b9e\u4f8b\uff0c\u53ef\u4ee5\u7528\u6765\u83b7\u53d6 List \u64cd\u4f5c\u7684\u72b6\u6001\u3001\u4efb\u4f55\u9519\u8bef\u6216\u8005 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Requests.Request_1.Result.html"},"Request")," \u54cd\u5e94\uff08\u5305\u542b\u60a8\u53ef\u4ee5\u904d\u5386\u7684 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.PackageCollection.html"},"PackageCollection"),"\uff09\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'using System;\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEditor;\nusing UnityEditor.PackageManager.Requests;\nusing UnityEditor.PackageManager;\nusing UnityEngine;\n\nnamespace Unity.Editor.Example\n{\n    static class EmbedPackageExample\n    {\n        static String targetPackage;\n        static EmbedRequest Request;\n        static ListRequest LRequest;\n\n        [MenuItem("Window/Embed Package Example")]\n        static void GetPackageName()\n        {\n            // \u9996\u5148\u83b7\u53d6\u4e00\u4e2a\u5df2\u5b89\u88c5\u7684\u5305\u7684\u540d\u79f0\n            LRequest = Client.List();\n            EditorApplication.update += LProgress;\n        }\n\n        static void LProgress()\n        {\n            if (LRequest.IsCompleted)\n            {\n                if (LRequest.Status == StatusCode.Success)\n                {\n                    foreach (var package in LRequest.Result)\n                    {\n                        // \u4ec5\u83b7\u53d6\u9879\u76ee\u4e2d\u5f53\u524d\u5b89\u88c5\u7684\u5305\n                        //\uff08\u65e2\u4e0d\u662f\u5185\u7f6e\u7684\u5305\u4e5f\u4e0d\u662f\u5df2\u5d4c\u5165\u7684\u5305\uff09\n                        if (package.isDirectDependency && package.source\n                            != PackageSource.BuiltIn && package.source\n                            != PackageSource.Embedded)\n                        {\n                            targetPackage = package.name;\n                            break;\n                        }\n                    }\n\n                }\n                else\n                    Debug.Log(LRequest.Error.message);\n\n                EditorApplication.update -= LProgress;\n\n                Embed(targetPackage);\n\n            }\n        }\n\n        static void Embed(string inTarget)\n        {\n            // \u5c06\u5305\u5d4c\u5165\u9879\u76ee\u4e2d\n            Debug.Log("Embed(\'" + inTarget + "\') called");\n            Request = Client.Embed(inTarget);\n            EditorApplication.update += Progress;\n\n        }\n\n        static void Progress()\n        {\n            if (Request.IsCompleted)\n            {\n                if (Request.Status == StatusCode.Success)\n                    Debug.Log("Embedded: " + Request.Result.packageId);\n                else if (Request.Status &gt;= StatusCode.Failure)\n                    Debug.Log(Request.Error.message);\n\n                EditorApplication.update -= Progress;\n            }\n        }\n    }\n}\n')),(0,i.kt)("br",null),(0,i.kt)("h2",{id:"package-manager-\u4e8b\u4ef6"},"Package Manager \u4e8b\u4ef6"),(0,i.kt)("p",null,"\u4f7f\u7528 ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Events.html"},"Events")," \u7c7b\u5411 Package Manager \u6ce8\u518c\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u3002",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/PackageManager.Events.html"},"Events")," \u7c7b\u5305\u542b\u4e24\u4e2a\u60a8\u53ef\u4ee5\u8ba2\u9605\u7684\u4e8b\u4ef6\uff0cPackage Manager \u5728\u4ee5\u4e0b\u65f6\u95f4\u70b9\u5f15\u53d1\uff1a"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Package Manager \u5373\u5c06\u66f4\u6539\u4f9d\u8d56\u9879\u5217\u8868 (",(0,i.kt)("a",{parentName:"em",href:"https://docs.unity3d.com/cn/2022.1/Manual/PackageManager.Events-registeringPackages.html"},"registeringPackages"),")")," Package Manager \u5bfc\u5165\u5e76\u7f16\u8bd1\u66f4\u6539\u7684\u5305\u4f9d\u8d56\u9879\u5217\u8868\u4e4b\u540e (",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/cn/2022.1/Manual/PackageManager.Events-registeredPackages.html"},"registeredPackages"),")"),(0,i.kt)("p",null,"\u4ee5\u4e0b\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u8fd9\u4e24\u4e2a\u4e8b\u4ef6\u3002"),(0,i.kt)("h3",{id:"\u4f7f\u7528-registeringpackages-\u4e8b\u4ef6\u7684\u793a\u4f8b"},"\u4f7f\u7528 registeringPackages \u4e8b\u4ef6\u7684\u793a\u4f8b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'using UnityEditor.PackageManager;\nusing UnityEngine;\n\nnamespace Unity.Editor.Example\n{\n    public class EventSubscribingExample_RegisteringPackages\n    {\n        public EventSubscribingExample_RegisteringPackages()\n        {\n            // \u4f7f\u7528\u52a0\u6cd5\u8d4b\u503c\u8fd0\u7b97\u7b26 (+=) \u8ba2\u9605\u4e8b\u4ef6\u3002\n            // \u6bcf\u5f53\u89e6\u53d1\u4e8b\u4ef6\u65f6\uff0c\u5b83\u90fd\u4f1a\u6267\u884c\u5904\u7406\u7a0b\u5e8f\u4e2d\u7684\u4ee3\u7801\u3002\n            Events.registeringPackages += RegisteringPackagesEventHandler;\n        }\n\n        // \u8be5\u65b9\u6cd5\u5e94\u63a5\u6536 PackageRegistrationEventArgs \u4e8b\u4ef6\u53c2\u6570\u3002\n        void RegisteringPackagesEventHandler(PackageRegistrationEventArgs packageRegistrationEventArgs)\n        {\n            Debug.Log("The list of registered packages is about to change!");\n\n           foreach (var addedPackage in packageRegistrationEventArgs.added)\n            {\n                Debug.Log($"Adding {addedPackage.displayName}");\n            }\n\n            foreach (var removedPackage in packageRegistrationEventArgs.removed)\n            {\n                Debug.Log($"Removing {removedPackage.displayName}");\n            }\n\n            // changedFrom \u548c changedTo \u96c6\u5408\u5305\u542b\u5373\u5c06\u66f4\u65b0\u7684\u5305\u3002\n            // \u4fdd\u8bc1\u4e24\u4e2a\u96c6\u5408\u7684\u5927\u5c0f\u76f8\u540c\uff0c\u7d22\u5f15\u5339\u914d\u76f8\u540c\u7684\u5305\u540d\u79f0\u3002\n            for (int i = 0; i &lt;= packageRegistrationEventArgs.changedFrom.Count; i++)\n            {\n                var oldPackage = packageRegistrationEventArgs.changedFrom[i];\n                var newPackage = packageRegistrationEventArgs.changedTo[i];\n\n                Debug.Log($"Changing ${oldPackage.displayName} version from ${oldPackage.version} to ${newPackage.version}");\n            }\n        }\n    }\n}\n')),(0,i.kt)("h3",{id:"\u4f7f\u7528-registeredpackages-\u4e8b\u4ef6\u7684\u793a\u4f8b"},"\u4f7f\u7528 registeredPackages \u4e8b\u4ef6\u7684\u793a\u4f8b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"using UnityEditor;\nusing UnityEditor.PackageManager;\nusing UnityEngine;\n\nnamespace Unity.Editor.Example\n{\n    public class EventSubscribingExample_RegisteredPackages\n    {\n        // \u5fc5\u987b\u4f7f\u7528 '[InitializeOnLoadMethod]' \u6216 '[InitializeOnLoad]' \u8ba2\u9605\u6b64\u4e8b\u4ef6\u3002\n        [InitializeOnLoadMethod]\n        static void SubscribeToEvent()\n        {\n            // \u8fd9\u4f1a\u5bfc\u81f4\u5728\u7f16\u8f91\u5668\u6ce8\u518c\u65b0\u7684\u5305\u5217\u8868\u540e\u8c03\u7528\u8be5\u65b9\u6cd5\u3002\n            Events.registeredPackages += RegisteredPackagesEventHandler;\n        }\n\n        static void RegisteredPackagesEventHandler(PackageRegistrationEventArgs packageRegistrationEventArgs)\n        {\n            // \u8fd9\u91cc\u6267\u884c\u7684\u4ee3\u7801\u53ef\u4ee5\u5b89\u5168\u5730\u5047\u8bbe\u7f16\u8f91\u5668\u5df2\u7ecf\u5b8c\u6210\u4e86\u65b0\u7684\u5305\u5217\u8868\u7684\u7f16\u8bd1\n            Debug.Log(\"The list of registered packages has changed!\");\n        }\n    }\n}\n")))}l.isMDXComponent=!0}}]);