<!doctype html>
<html class="docs-version-current" lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="alternate" type="application/rss+xml" href="/doc-unity-manual/blog/rss.xml" title="Unity 手册 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/doc-unity-manual/blog/atom.xml" title="Unity 手册 Atom Feed"><title data-rh="true">Scriptable Render Pipeline Batcher | Unity 手册</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://danyow.github.io/doc-unity-manual//doc-unity-manual/docs/optimizing-draw-calls/srpbatcher"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Scriptable Render Pipeline Batcher | Unity 手册"><meta data-rh="true" name="description" content="The Scriptable Render Pipeline (SRP) Batcher is a draw call optimization that significantly improves performance for applications that use an SRP. The SRP Batcher reduces the CPU time Unity requires to prepare and dispatch draw calls for materials that use the same shader variant."><meta data-rh="true" property="og:description" content="The Scriptable Render Pipeline (SRP) Batcher is a draw call optimization that significantly improves performance for applications that use an SRP. The SRP Batcher reduces the CPU time Unity requires to prepare and dispatch draw calls for materials that use the same shader variant."><link data-rh="true" rel="icon" href="/doc-unity-manual/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danyow.github.io/doc-unity-manual//doc-unity-manual/docs/optimizing-draw-calls/srpbatcher"><link data-rh="true" rel="alternate" href="https://danyow.github.io/doc-unity-manual//doc-unity-manual/docs/optimizing-draw-calls/srpbatcher" hreflang="zh"><link data-rh="true" rel="alternate" href="https://danyow.github.io/doc-unity-manual//doc-unity-manual/docs/optimizing-draw-calls/srpbatcher" hreflang="x-default"><link rel="stylesheet" href="/doc-unity-manual/assets/css/styles.3b98a603.css">
<link rel="preload" href="/doc-unity-manual/assets/js/runtime~main.fe6cf380.js" as="script">
<link rel="preload" href="/doc-unity-manual/assets/js/main.53b1625e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doc-unity-manual/"><div class="navbar__logo"><img src="/doc-unity-manual/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/doc-unity-manual/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">My Site</b></a><a class="navbar__item navbar__link navbar__link--active" href="/doc-unity-manual/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/doc-unity-manual/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="切换浅色/暗黑模式（当前为浅色模式）"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc-unity-manual/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc-unity-manual/docs/tutorial-basics/create-a-page">Tutorial - Basics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc-unity-manual/docs/tutorial-extras/manage-docs-versions">Tutorial - Extras</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/animation-section">animation-section</a><button aria-label="打开/收起侧边栏菜单「animation-section」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/asset-store">asset-store</a><button aria-label="打开/收起侧边栏菜单「asset-store」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/asset-workflow">asset-workflow</a><button aria-label="打开/收起侧边栏菜单「asset-workflow」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/audio">audio</a><button aria-label="打开/收起侧边栏菜单「audio」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/creating-environments">creating-environments</a><button aria-label="打开/收起侧边栏菜单「creating-environments」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc-unity-manual/docs/Glossary">术语表</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/doc-unity-manual/docs/graphics">graphics</a><button aria-label="打开/收起侧边栏菜单「graphics」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/cameras-overview">cameras-overview</a><button aria-label="打开/收起侧边栏菜单「cameras-overview」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/graphics-apis">graphics-apis</a><button aria-label="打开/收起侧边栏菜单「graphics-apis」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/graphics-color">graphics-color</a><button aria-label="打开/收起侧边栏菜单「graphics-color」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" tabindex="0" href="/doc-unity-manual/docs/graphics-performance-profiling">graphics-performance-profiling</a><button aria-label="打开/收起侧边栏菜单「graphics-performance-profiling」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/batch-renderer-group">batch-renderer-group</a><button aria-label="打开/收起侧边栏菜单「batch-renderer-group」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/graphics-performance-profiling/frame-debugger">The Frame Debugger window</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" tabindex="0" href="/doc-unity-manual/docs/optimizing-draw-calls">optimizing-draw-calls</a><button aria-label="打开/收起侧边栏菜单「optimizing-draw-calls」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/optimizing-draw-calls/combining-meshes">Manually combining meshes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/draw-call-batching">draw-call-batching</a><button aria-label="打开/收起侧边栏菜单「draw-call-batching」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/gpuinstancing">gpuinstancing</a><button aria-label="打开/收起侧边栏菜单「gpuinstancing」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/doc-unity-manual/docs/optimizing-draw-calls/srpbatcher">Scriptable Render Pipeline Batcher</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/graphics-performance-profiling/optimizing-graphics-performance">Graphics performance fundamentals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/graphics-performance-profiling/rendering-statistics">The Rendering Statistics window</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/lighting-overview">lighting-overview</a><button aria-label="打开/收起侧边栏菜单「lighting-overview」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/materials">materials</a><button aria-label="打开/收起侧边栏菜单「materials」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/mesh">mesh</a><button aria-label="打开/收起侧边栏菜单「mesh」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/models">models</a><button aria-label="打开/收起侧边栏菜单「models」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/render-pipelines">render-pipelines</a><button aria-label="打开/收起侧边栏菜单「render-pipelines」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/shaders">shaders</a><button aria-label="打开/收起侧边栏菜单「shaders」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/sky">sky</a><button aria-label="打开/收起侧边栏菜单「sky」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/textures">textures</a><button aria-label="打开/收起侧边栏菜单「textures」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/visual-effects">visual-effects</a><button aria-label="打开/收起侧边栏菜单「visual-effects」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/input">input</a><button aria-label="打开/收起侧边栏菜单「input」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/legacy-topics">legacy-topics</a><button aria-label="打开/收起侧边栏菜单「legacy-topics」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/navigation">navigation</a><button aria-label="打开/收起侧边栏菜单「navigation」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/open-source-repositories">open-source-repositories</a><button aria-label="打开/收起侧边栏菜单「open-source-repositories」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/packages-list">packages-list</a><button aria-label="打开/收起侧边栏菜单「packages-list」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/physics-section">physics-section</a><button aria-label="打开/收起侧边栏菜单「physics-section」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/platform-specific">platform-specific</a><button aria-label="打开/收起侧边栏菜单「platform-specific」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/scripting-section">scripting-section</a><button aria-label="打开/收起侧边栏菜单「scripting-section」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/search-overview">search-overview</a><button aria-label="打开/收起侧边栏菜单「search-overview」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/uitoolkits">uitoolkits</a><button aria-label="打开/收起侧边栏菜单「uitoolkits」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/unet">unet</a><button aria-label="打开/收起侧边栏菜单「unet」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc-unity-manual/docs/unity-manual">unity-manual</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/unity-overview">unity-overview</a><button aria-label="打开/收起侧边栏菜单「unity-overview」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/unity-services">unity-services</a><button aria-label="打开/收起侧边栏菜单「unity-services」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/unity2d">unity2d</a><button aria-label="打开/收起侧边栏菜单「unity2d」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/video-player">video-player</a><button aria-label="打开/收起侧边栏菜单「video-player」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/xr">xr</a><button aria-label="打开/收起侧边栏菜单「xr」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/doc-unity-manual/">🏠</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/doc-unity-manual/docs/graphics">graphics</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/doc-unity-manual/docs/graphics-performance-profiling">graphics-performance-profiling</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/doc-unity-manual/docs/optimizing-draw-calls">optimizing-draw-calls</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/doc-unity-manual/docs/optimizing-draw-calls/srpbatcher">Scriptable Render Pipeline Batcher</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Scriptable Render Pipeline Batcher</h1><p>The Scriptable Render Pipeline (SRP) Batcher is a <a href="/doc-unity-manual/docs/optimizing-draw-calls">draw call optimization</a> that significantly improves performance for applications that use an SRP. The SRP Batcher reduces the CPU time Unity requires to prepare and dispatch draw calls for materials that use the same shader variant.</p><p><img src="https://docs.unity3d.com/cn/2022.1/uploads/Main/SRPBatcher.png" alt="The Scriptable Render Pipeline (SRP) Batcher reduces the CPU time Unity requires to render scenes with many materials that use the same shader variant."></p><p>The Scriptable Render Pipeline (SRP) Batcher reduces the CPU time Unity requires to render scenes with many materials that use the same shader variant.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="requirements-and-compatibility">Requirements and compatibility<a class="hash-link" href="#requirements-and-compatibility" title="标题的直接链接">​</a></h2><p>This section includes information about the render pipeline compatibility of the SRP Batcher.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="render-pipeline-compatibility">Render pipeline compatibility<a class="hash-link" href="#render-pipeline-compatibility" title="标题的直接链接">​</a></h3><table><thead><tr><th><strong>功能</strong></th><th><strong>内置渲染管线</strong></th><th><strong>通用渲染管线 (URP)</strong></th><th><strong>高清渲染管线 (HDRP)</strong></th><th><strong>Custom Scriptable Render Pipeline (SRP)</strong></th></tr></thead><tbody><tr><td><strong>SRP Batcher</strong></td><td>否</td><td>是</td><td>是</td><td>是</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_mojV" id="gameobject-compatibility">GameObject compatibility<a class="hash-link" href="#gameobject-compatibility" title="标题的直接链接">​</a></h3><p>In any given scene, some GameObjects are compatible with the SRP Batcher, and some aren’t. Compatible GameObjects use the SRP Batcher code path, and non-compatible GameObjects use the standard SRP code path. For more information, see <a href="#srp-batcher-%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">How the SRP Batcher works</a>.</p><p>A GameObject must meet the following requirements to be compatible with the SRP Batcher code path:</p><ul><li>The GameObject must contain either a mesh or a skinned mesh. It can’t be a particle.</li><li>The GameObject mustn’t use <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/MaterialPropertyBlock.html" target="_blank" rel="noopener noreferrer">MaterialPropertyBlocks</a>.</li><li>The shader that the GameObject uses must be compatible with the SRP Batcher. For more information, see <a href="#shader-compatibility">Shader compatibility</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="shader-compatibility">Shader compatibility<a class="hash-link" href="#shader-compatibility" title="标题的直接链接">​</a></h3><p>All lit and unlit shaders in the High Definition Render Pipeline (HDRP) and the Universal Render Pipeline (URP) fit this requirement (except for the particle versions of these shaders).</p><p>For a custom shader to be compatible with the SRP Batcher it must meet the following requirements:</p><ul><li>The shader must declare all built-in engine properties in a single constant buffer named <code>UnityPerDraw</code>. For example, <code>unity_ObjectToWorld</code>, or <code>unity_SHAr</code>.</li><li>The shader must declare all material properties in a single constant buffer named <code>UnityPerMaterial</code>.</li></ul><p>You can check the compatibility status of a shader in the Inspector panel.</p><p><img src="https://docs.unity3d.com/cn/2022.1/uploads/Main/SRP_batcher_shader_compatibility.png" alt="You can check the compatibility of your shaders in the Inspector panel for the specific shader."></p><p>You can check the compatibility of your shaders in the Inspector panel for the specific shader.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="使用-srp-batcher">使用 SRP Batcher<a class="hash-link" href="#使用-srp-batcher" title="标题的直接链接">​</a></h2><p>This section contains information on how to use the SRP Batcher in Unity’s pre-built Scriptable Render Pipelines.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="using-the-srp-batcher-in-urp">Using the SRP Batcher in URP<a class="hash-link" href="#using-the-srp-batcher-in-urp" title="标题的直接链接">​</a></h3><p>要在 URP 中激活 SRP Batcher，请执行以下操作：</p><p>1.在 Project 窗口中选择 <a href="https://docs.unity3d.com/Packages/com.unity.render-pipelines.universal@latest/index.html?subfolder=/manual/universalrp-asset.html" target="_blank" rel="noopener noreferrer">URP 资源</a>。 2. In the Inspector for the URP asset, go to  <strong>Advanced</strong> , and enable  <strong>SRP Batcher</strong> .</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="using-the-srp-batcher-in-hdrp">Using the SRP Batcher in HDRP<a class="hash-link" href="#using-the-srp-batcher-in-hdrp" title="标题的直接链接">​</a></h3><p>When you use HDRP, Unity enables the SRP Batcher by default. Disabling the SRP Batcher is not recommended. However, you can temporarily disable the SRP Batcher for debugging purposes.</p><p>To enable and disable the SRP Batcher at build time using the Editor:</p><p>1.在 Project 窗口中选择 <a href="https://docs.unity3d.com/Packages/com.unity.render-pipelines.high-definition@latest/index.html?subfolder=/manual/HDRP-Asset.html" target="_blank" rel="noopener noreferrer">HDRP 资源</a>。 2. In the Inspector for the asset, enter <a href="/doc-unity-manual/docs/using-the-inspector/inspector-options">Debug mode</a>. In Debug mode, you can see the properties of the HDRP Asset, including the SRP Batcher property. 3. Select  <strong>Enable</strong>   <strong>SRP Batcher</strong>  to enable or disable the SRP Batcher.</p><p>To enable or disable the SRP Batcher at runtime, toggle the following global variable in your C# code:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">GraphicsSettings.useScriptableRenderPipelineBatching = true;</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="srp-batcher-的工作原理">SRP Batcher 的工作原理<a class="hash-link" href="#srp-batcher-的工作原理" title="标题的直接链接">​</a></h2><p>The traditional way to optimize draw calls is to reduce the number of them. Instead, the SRP Batcher reduces render-state changes between draw calls. To do this, the SRP Batcher combines a sequence of <code>bind</code> and <code>draw</code> GPU commands. Each sequence of commands is called an SRP batch.</p><p><img src="https://docs.unity3d.com/cn/2022.1/uploads/Main/SROShaderPass.png" alt="The batching of bind and draw commands reduces the GPU setup between draw calls."></p><p>The batching of bind and draw commands reduces the GPU setup between draw calls.</p><p>To achieve optimal performance for your rendering, each SRP batch should contain as many <code>bind</code> and <code>draw</code> commands as possible. To achieve this, use as few shader variants as possible. You can still use as many different materials with the same shader as you want.</p><p>When Unity detects a new material during the render loop, the CPU collects all properties and binds them to the GPU in constant buffers. The number of GPU buffers depends on how the shader declares its constant buffers.</p><p>The SRP Batcher is a low-level render loop that makes material data persist in GPU memory. If the material content doesn’t change, theSRP Batcher doesn’t make any render-state changes. Instead, the SRP Batcher uses a dedicated code path to update the Unity Engine properties in a large GPU buffer, like this:</p><p><img src="https://docs.unity3d.com/cn/2022.1/uploads/Main/SRP_Batcher_loop.png" alt="The SRP Batcher rendering workflow. The SRP Batcher uses a dedicated code path to update the Unity Engine properties in a large GPU buffer."></p><p>The SRP Batcher rendering workflow. The SRP Batcher uses a dedicated code path to update the Unity Engine properties in a large GPU buffer.</p><p>Here, the CPU only handles the Unity Engine properties, labeled  <strong>Per Object large buffer</strong>  in the above diagram. All materials have persistent constant buffers located in GPU memory, which are ready to use. This speeds up rendering because:</p><ul><li>All material content now persists in GPU memory.</li><li>Dedicated code manages a large per-object GPU constant buffer for all per-object properties.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="intentionally-removing-srp-batcher-compatibility-for-gameobjects">Intentionally removing SRP Batcher compatibility for GameObjects<a class="hash-link" href="#intentionally-removing-srp-batcher-compatibility-for-gameobjects" title="标题的直接链接">​</a></h3><p>In some rare cases, you might want to intentionally make particular GameObjects incompatible with the SRP Batcher. For example, if you want to use <a href="/doc-unity-manual/docs/gpuinstancing">GPU instancing</a>, which isn’t compatible with the SRP Batcher. If you want to render many identical meshes with the exact same material, GPU instancing can be more efficient than the SRP Batcher. To use GPU instancing, you must either:</p><ul><li>Use <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/Graphics.DrawMeshInstanced.html" target="_blank" rel="noopener noreferrer">Graphics.DrawMeshInstanced</a>.</li><li>Manually remove SRP Batcher compatibility and enable GPU instancing for the material.</li></ul><p>There are two ways to remove compatibility with the SRP Batcher from a GameObject:</p><ul><li><p>Make the shader incompatible.</p></li><li><p>Make the renderer incompatible.</p><p><strong>Tip</strong> : If you use GPU instancing instead of the SRP Batcher, use the <a href="#profiler">Profiler</a> to make sure that GPU instancing is more efficient for your application than the SRP Batcher.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_mojV" id="removing-shader-compatibility">Removing shader compatibility<a class="hash-link" href="#removing-shader-compatibility" title="标题的直接链接">​</a></h4><p>You can make both hand-written and Shader Graph shaders incompatible with the SRP Batcher. However, for Shader Graph shaders, if you change and recompile the Shader Graph often, it’s simpler to make the <a href="#removing-renderer-compatibility">renderer incompatible</a> instead.</p><p>To make a Unity shader incompatible with the SRP Batcher, you need to make changes to the shader source file:</p><ol><li>For hand-written shaders, open the shader source file. For Shader Graph shaders, copy the Shader Graph’s compiled shader source code into a new shader source file. Use the new shader source file in your application instead of the Shader Graph.</li><li>Add a new <a href="/doc-unity-manual/docs/sl-shader/sl-properties">material property</a> declaration into the shader’s <code>Properties</code> block. Don’t declare the new material property in the <code>UnityPerMaterial</code> constant buffer.</li></ol><p>The material property doesn’t need to do anything; just having a material property that doesn’t exist in the <code>UnityPerMaterial</code> constant buffer makes the shader incompatible with the SRP Batcher.</p><p> <strong>Warning</strong> : If you use a Shader Graph, be aware that every time you edit and recompile the Shader Graph, you must repeat this process.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="removing-renderer-compatibility">Removing renderer compatibility<a class="hash-link" href="#removing-renderer-compatibility" title="标题的直接链接">​</a></h4><p>You can make individual renderers incompatible with the SRP Batcher. To do this, add a <code>MaterialPropertyBlock</code> to the renderer.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="profiling-the-srp-batcher-in-the-unity-frame-debugger">Profiling the SRP Batcher in the Unity Frame Debugger<a class="hash-link" href="#profiling-the-srp-batcher-in-the-unity-frame-debugger" title="标题的直接链接">​</a></h2><p>You can check the status of SRP batches in the <a href="/doc-unity-manual/docs/graphics-performance-profiling/frame-debugger">Frame Debugger</a> window. Each SRP Batch displays how many draw calls Unity used, which keywords Unity attached to the shader, and the reason why Unity didn’t batch that draw call with the previous one.</p><p>要检查 SRP Batcher 批次的状态，请执行以下操作：</p><ol><li>In the Editor, open the Frame Debugger (menu:  <strong>Window</strong>  <!-- -->&gt;<!-- -->  <strong>Analysis</strong>  <!-- -->&gt;<!-- -->  <strong>Frame Debugger</strong> ).</li><li>In the Frame Debugger, go to  <strong>Render Camera</strong>  <!-- -->&gt;<!-- -->  <strong>Render Opaques</strong> .</li><li>Expand the  <strong>RenderLoopNewBatcher.Draw</strong>  list.</li><li>Select on the  <strong>SRP Batch</strong>  you want to inspect.</li></ol><p>In the example below, the reason is:  <strong>Nodes have different shaders</strong> . This means that the shader for that SRP batch os different to the one in the previous SRP batch. Because the SRP Batcher used a different shader, the SRP Batcher created a new batch. If several SRP batches have a low number of draw calls, it often means the project uses too many shader variants.</p><p><img src="https://docs.unity3d.com/cn/2022.1/uploads/Main/SRP_Batcher_batch_information.png" alt="In the Frame Debugger window, you can find details about individual SRP batches, including why the SRP Batcher created a new SRP batch instead of continuing the existing one."></p><p>In the Frame Debugger window, you can find details about individual SRP batches, including why the SRP Batcher created a new SRP batch instead of continuing the existing one.</p><p>If you write your own Scriptable Render Pipeline, instead of using either the Universal Render Pipeline or the High Definition Render Pipeline, try to write a generic multi-purpose shader with a minimal number of keywords. This is optimal because you can use as many material properties as you want.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/graphics/graphics-performance-profiling/optimizing-draw-calls/srpbatcher.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/doc-unity-manual/docs/gpuinstancing/gpu-instancing-shader"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Creating shaders that support GPU instancing</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/doc-unity-manual/docs/graphics-performance-profiling/optimizing-graphics-performance"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Graphics performance fundamentals</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements-and-compatibility" class="table-of-contents__link toc-highlight">Requirements and compatibility</a><ul><li><a href="#render-pipeline-compatibility" class="table-of-contents__link toc-highlight">Render pipeline compatibility</a></li><li><a href="#gameobject-compatibility" class="table-of-contents__link toc-highlight">GameObject compatibility</a></li><li><a href="#shader-compatibility" class="table-of-contents__link toc-highlight">Shader compatibility</a></li></ul></li><li><a href="#使用-srp-batcher" class="table-of-contents__link toc-highlight">使用 SRP Batcher</a><ul><li><a href="#using-the-srp-batcher-in-urp" class="table-of-contents__link toc-highlight">Using the SRP Batcher in URP</a></li><li><a href="#using-the-srp-batcher-in-hdrp" class="table-of-contents__link toc-highlight">Using the SRP Batcher in HDRP</a></li></ul></li><li><a href="#srp-batcher-的工作原理" class="table-of-contents__link toc-highlight">SRP Batcher 的工作原理</a><ul><li><a href="#intentionally-removing-srp-batcher-compatibility-for-gameobjects" class="table-of-contents__link toc-highlight">Intentionally removing SRP Batcher compatibility for GameObjects</a></li></ul></li><li><a href="#profiling-the-srp-batcher-in-the-unity-frame-debugger" class="table-of-contents__link toc-highlight">Profiling the SRP Batcher in the Unity Frame Debugger</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/doc-unity-manual/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/doc-unity-manual/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/doc-unity-manual/assets/js/runtime~main.fe6cf380.js"></script>
<script src="/doc-unity-manual/assets/js/main.53b1625e.js"></script>
</body>
</html>