<!doctype html>
<html class="docs-version-current" lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Unity 手册 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Unity 手册 Atom Feed"><title data-rh="true">Unity XR 输入 | Unity 手册</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://danyow.github.io/doc-unity-manual//docs/input/xr_input"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Unity XR 输入 | Unity 手册"><meta data-rh="true" name="description" content="Unity 用户手册的本节将介绍 Unity 对于虚拟现实、增强现实和 Windows Mixed Reality 应用程序支持的所有输入设备。本页涵盖以下主题："><meta data-rh="true" property="og:description" content="Unity 用户手册的本节将介绍 Unity 对于虚拟现实、增强现实和 Windows Mixed Reality 应用程序支持的所有输入设备。本页涵盖以下主题："><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://danyow.github.io/doc-unity-manual//docs/input/xr_input"><link data-rh="true" rel="alternate" href="http://danyow.github.io/doc-unity-manual//docs/input/xr_input" hreflang="zh"><link data-rh="true" rel="alternate" href="http://danyow.github.io/doc-unity-manual//docs/input/xr_input" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.3b98a603.css">
<link rel="preload" href="/assets/js/runtime~main.13c240a3.js" as="script">
<link rel="preload" href="/assets/js/main.8f4a8c68.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">My Site</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="切换浅色/暗黑模式（当前为浅色模式）"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/tutorial-basics/create-a-page">Tutorial - Basics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/tutorial-extras/manage-docs-versions">Tutorial - Extras</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/animation-section">animation-section</a><button aria-label="打开/收起侧边栏菜单「animation-section」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/asset-store">asset-store</a><button aria-label="打开/收起侧边栏菜单「asset-store」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/asset-workflow">asset-workflow</a><button aria-label="打开/收起侧边栏菜单「asset-workflow」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/audio">audio</a><button aria-label="打开/收起侧边栏菜单「audio」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/creating-environments">creating-environments</a><button aria-label="打开/收起侧边栏菜单「creating-environments」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Glossary">术语表</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/graphics">graphics</a><button aria-label="打开/收起侧边栏菜单「graphics」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/docs/input">input</a><button aria-label="打开/收起侧边栏菜单「input」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/input/class-input-manager">Input Manager</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/docs/mobile-input">mobile-input</a><button aria-label="打开/收起侧边栏菜单「mobile-input」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/input/xr_input">Unity XR 输入</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/legacy-topics">legacy-topics</a><button aria-label="打开/收起侧边栏菜单「legacy-topics」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/navigation">navigation</a><button aria-label="打开/收起侧边栏菜单「navigation」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/open-source-repositories">open-source-repositories</a><button aria-label="打开/收起侧边栏菜单「open-source-repositories」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/packages-list">packages-list</a><button aria-label="打开/收起侧边栏菜单「packages-list」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/physics-section">physics-section</a><button aria-label="打开/收起侧边栏菜单「physics-section」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/platform-specific">platform-specific</a><button aria-label="打开/收起侧边栏菜单「platform-specific」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/scripting-section">scripting-section</a><button aria-label="打开/收起侧边栏菜单「scripting-section」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/search-overview">search-overview</a><button aria-label="打开/收起侧边栏菜单「search-overview」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/uitoolkits">uitoolkits</a><button aria-label="打开/收起侧边栏菜单「uitoolkits」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/unet">unet</a><button aria-label="打开/收起侧边栏菜单「unet」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/unity-manual">unity-manual</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/unity-overview">unity-overview</a><button aria-label="打开/收起侧边栏菜单「unity-overview」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/unity-services">unity-services</a><button aria-label="打开/收起侧边栏菜单「unity-services」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/unity2d">unity2d</a><button aria-label="打开/收起侧边栏菜单「unity2d」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/video-player">video-player</a><button aria-label="打开/收起侧边栏菜单「video-player」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/xr">xr</a><button aria-label="打开/收起侧边栏菜单「xr」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">🏠</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/input">input</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/input/xr_input">Unity XR 输入</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Unity XR 输入</h1><p>Unity 用户手册的本节将介绍 Unity 对于虚拟现实、增强现实和 Windows Mixed Reality 应用程序支持的所有输入设备。本页涵盖以下主题：</p><ul><li><a href="#xr-%E8%BE%93%E5%85%A5%E6%98%A0%E5%B0%84">XR 输入映射</a></li><li><a href="#%E8%AE%BF%E9%97%AE%E8%BE%93%E5%85%A5%E8%AE%BE%E5%A4%87">访问输入设备</a></li><li><a href="#%E8%AE%BF%E9%97%AE%E8%BE%93%E5%85%A5%E8%AE%BE%E5%A4%87%E4%B8%8A%E7%9A%84%E8%BE%93%E5%85%A5%E5%8A%9F%E8%83%BD">访问输入设备上的输入功能</a></li><li><a href="#%E9%80%9A%E8%BF%87%E6%97%A7%E7%89%88%E8%BE%93%E5%85%A5%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0-xr-%E8%BE%93%E5%85%A5">通过旧版输入系统访问 XR 输入</a></li><li><a href="#%E8%A7%A6%E8%A7%89">触觉</a></li></ul><p>XR 平台具有多种输入功能，您可以在设计用户交互时加以利用。您的应用程序可以使用某些特定数据，这些数据引用位置、旋转、触摸、按钮、游戏杆和手指传感器。但是，在不同平台之间访问这些输入功能可能有很大差别。例如，Vive 和 Oculus Rift 之间的差异很小，但是支持 VR 的桌面平台和 Daydream 等移动平台之间的差异则很大。</p><p>Unity 提供了一个名为 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputFeatureUsage.html" target="_blank" rel="noopener noreferrer">InputFeatureUsage</a> 的 C# 结构，该结构定义了一组标准的物理设备控件（例如按钮和扳机键），以访问任何平台上的用户输入。这些控件可帮助您通过名称识别输入类型。有关每个 <code>InputFeatureUsage</code> 的定义，请参阅 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.CommonUsages.html" target="_blank" rel="noopener noreferrer">XR.Input.CommonUsages</a>。</p><p>每个 <code>InputFeatureUsage</code> 对应一个常见的输入操作或类型。例如，Unity 将名为 <code>trigger</code> 的 <code>InputFeatureUsage</code> 定义为食指控制的单轴输入（无论您使用哪种 XR 平台）。您可以使用 <code>InputFeatureUsage</code> 通过名称来获取 <code>trigger</code> 状态，因此无需为常规 Unity 输入系统设置一个轴（或某些 XR 平台上的按钮）。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="xr-输入映射">XR 输入映射<a class="hash-link" href="#xr-输入映射" title="标题的直接链接">​</a></h2><p>下表列出了标准控制器 <code>InputFeatureUsage</code> 的名称以及它们与常见 XR 系统的控制器之间的映射关系：</p><table><thead><tr><th><strong>InputFeatureUsage</strong></th><th><strong>功能类型</strong></th><th><strong>旧版输入索引</strong> （左控制器/右控制器）</th><th><strong>WMR</strong></th><th><strong>Oculus</strong></th><th><strong>GearVR</strong></th><th><strong>Daydream</strong></th><th><strong>OpenVR (Full)</strong></th><th><strong>Vive</strong></th><th><strong>基于 OpenVR 的 Oculus</strong></th><th><strong>基于 OpenVR 的 WMR</strong></th></tr></thead><tbody><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-primary2DAxis.html" target="_blank" rel="noopener noreferrer">primary2DAxis</a></td><td>2D 轴</td><td>[<!-- -->(1,2)/(4,5)<!-- -->]</td><td>触控板</td><td>游戏杆</td><td>触控板</td><td>触控板</td><td>触控板/游戏杆</td><td>触控板</td><td>游戏杆</td><td>游戏杆</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-trigger.html" target="_blank" rel="noopener noreferrer">trigger</a></td><td>轴</td><td>[<!-- -->9/10<!-- -->]</td><td>触发器</td><td>触发器</td><td>触发器</td><td>触发器</td><td>触发器</td><td>触发器</td><td>触发器</td><td>触发器</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-grip.html" target="_blank" rel="noopener noreferrer">grip</a></td><td>轴</td><td>[<!-- -->11/12<!-- -->]</td><td>握把</td><td>握把</td><td>-&gt; 缓冲键</td><td>握把</td><td>握把</td><td>握把</td><td>握把</td><td>缓冲键</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-secondary2DAxis.html" target="_blank" rel="noopener noreferrer">secondary2DAxis</a></td><td>2D 轴</td><td>[<!-- -->(17,18)/(19,20)<!-- -->]</td><td>游戏杆</td><td>-&gt;</td><td>-&gt;</td><td>-&gt;</td><td>触控板</td><td></td><td></td><td></td></tr><tr><td>secondary2DAxisClick</td><td>按钮</td><td>[<!-- -->18/19<!-- -->]</td><td>游戏杆 - 单击</td><td>-&gt;</td><td>-&gt;</td><td>-&gt;</td><td>-&gt;</td><td></td><td></td><td></td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-primaryButton.html" target="_blank" rel="noopener noreferrer">primaryButton</a></td><td>按钮</td><td>[<!-- -->2/0<!-- -->]</td><td>-&gt; <!-- -->[<!-- -->X/A<!-- -->]<!-- --> - 按压</td><td>-&gt; 应用程序</td><td>主要</td><td>主要（三明治按钮）(1)</td><td>主要 (Y/B)</td><td>菜单</td><td>菜单</td><td></td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-primaryTouch.html" target="_blank" rel="noopener noreferrer">primaryTouch</a></td><td>按钮</td><td>[<!-- -->12/10<!-- -->]</td><td>-&gt; <!-- -->[<!-- -->X/A<!-- -->]<!-- --> - 触控</td><td>-&gt;</td><td>-&gt;</td><td>-&gt;</td><td></td><td></td><td></td><td></td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-secondaryButton.html" target="_blank" rel="noopener noreferrer">secondaryButton</a></td><td>按钮</td><td>[<!-- -->3/1<!-- -->]</td><td>-&gt; <!-- -->[<!-- -->Y/B<!-- -->]<!-- --> - 按压</td><td>-&gt;</td><td>备用</td><td>-&gt; 备用 (X/A)</td><td>-&gt;</td><td></td><td></td><td></td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-secondaryTouch.html" target="_blank" rel="noopener noreferrer">secondaryTouch</a></td><td>按钮</td><td>[<!-- -->13/11<!-- -->]</td><td>-&gt; <!-- -->[<!-- -->Y/B<!-- -->]<!-- --> - 触控</td><td>-&gt;</td><td>-&gt;</td><td>-&gt;</td><td></td><td></td><td></td><td></td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-gripButton.html" target="_blank" rel="noopener noreferrer">gripButton</a></td><td>按钮</td><td>[<!-- -->4/5<!-- -->]</td><td>握把 - 按下</td><td>握把 - 按下</td><td>-&gt;</td><td>握把 - 按下</td><td>握把 - 按下</td><td>握把 - 按下</td><td>握把 - 按下</td><td>缓冲键 - 按下</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-triggerButton.html" target="_blank" rel="noopener noreferrer">triggerButton</a></td><td>按钮</td><td>[<!-- -->14/15<!-- -->]</td><td>触发器 - 按下</td><td>触发器 - 按下</td><td>触发器 - 按下</td><td>触发器 - 按下</td><td>触发器 - 按下</td><td>触发器 - 按下</td><td>触发器 - 触控</td><td>触发器 - 按下</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-menuButton.html" target="_blank" rel="noopener noreferrer">menuButton</a></td><td>按钮</td><td>[<!-- -->6/7<!-- -->]</td><td>菜单</td><td>开始（仅限左控制器）</td><td>-&gt;</td><td>-&gt;</td><td>-&gt;</td><td></td><td></td><td></td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-primary2DAxisClick.html" target="_blank" rel="noopener noreferrer">primary2DAxisClick</a></td><td>按钮</td><td>[<!-- -->8/9<!-- -->]</td><td>触控板 - 单击</td><td>控制杆 - 按下</td><td>触控板 - 按下</td><td>触控板 - 按下</td><td>触控板/游戏杆 - 按下</td><td>触控板 - 按下</td><td>游戏杆 - 按下</td><td>触控板 - 按下</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-primary2DAxisTouch.html" target="_blank" rel="noopener noreferrer">primary2DAxisTouch</a></td><td>按钮</td><td>[<!-- -->16/17<!-- -->]</td><td>触控板 - 触摸</td><td>控制杆 - 触控</td><td>触控板 - 触摸</td><td>触控板 - 触摸</td><td>触控板/游戏杆 - 触控</td><td>触控板 - 触控</td><td>游戏杆 - 触控</td><td>触控板 - 触摸</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-batteryLevel.html" target="_blank" rel="noopener noreferrer">batteryLevel</a></td><td>轴</td><td>-&gt; 电池电量</td><td>-&gt;</td><td>-&gt;</td><td>-&gt;</td><td>-&gt;</td><td></td><td></td><td></td><td></td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.XRDevice-userPresence.html" target="_blank" rel="noopener noreferrer">userPresence</a></td><td>按钮</td><td>-&gt; 用户存在状态</td><td>用户存在状态</td><td>-&gt;</td><td>-&gt;</td><td>-&gt;</td><td></td><td></td><td></td><td></td></tr></tbody></table><p>(1) 三明治按钮是指 Vive 菜单按钮。为了更好地处理跨平台应用程序，此按钮映射到 primaryButton 而不是 menuButton。</p><p>有关每个 <code>InputFeatureUsage</code> 的定义，请参阅 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.CommonUsages.html" target="_blank" rel="noopener noreferrer">XR.Input.CommonUsages</a>。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="访问输入设备">访问输入设备<a class="hash-link" href="#访问输入设备" title="标题的直接链接">​</a></h2><p><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDevice.html" target="_blank" rel="noopener noreferrer">InputDevice</a> 代表任何物理设备，例如控制器、移动电话或头盔。它可以包含有关设备跟踪、按钮、游戏杆和其他输入控件的信息。有关 <code>InputDevice</code> API 的更多信息，请参阅 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDevice.html" target="_blank" rel="noopener noreferrer">InputDevice</a> 文档。</p><p>使用 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDevices.html" target="_blank" rel="noopener noreferrer">XR.InputDevices</a> 类可访问当前连接到 XR 系统的输入设备。要获取所有已连接设备的列表，请使用 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDevices.GetDevices.html" target="_blank" rel="noopener noreferrer">InputDevices.GetDevices</a>：</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">var inputDevices = new List&amp;lt;UnityEngine.XR.InputDevice&amp;gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UnityEngine.XR.InputDevices.GetDevices(inputDevices);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach (var device in inputDevices)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Debug.Log(string.Format(&quot;Device found with name &#x27;{0}&#x27; and role &#x27;{1}&#x27;&quot;, device.name, device.role.ToString()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><p>在 XR 系统断开与输入设备的连接之前，输入设备将跨帧保持有效。使用 <a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.InputDevice-isValid.html" target="_blank" rel="noopener noreferrer">InputDevice.IsValid</a> 属性来确定 <code>InputDevice</code> 是否仍代表激活的控制器。</p><p>您可以通过以下方式访问输入设备：</p><ul><li>特征</li><li>角色</li><li>XR 节点</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="按特征访问输入设备">按特征访问输入设备<a class="hash-link" href="#按特征访问输入设备" title="标题的直接链接">​</a></h3><p>设备特征描述了设备的功能或用途（例如，是否为头戴式）。<a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceCharacteristics.html" target="_blank" rel="noopener noreferrer">InputDeviceCharacteristics</a> 是一系列标志，可以添加到代码中，用于搜索符合特定规格的设备。可以按以下特征筛选设备：</p><table><thead><tr><th><strong>设备</strong></th><th><strong>特征</strong></th></tr></thead><tbody><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceCharacteristics.HeadMounted.html" target="_blank" rel="noopener noreferrer">HeadMounted</a></td><td>设备连接到用户的头部。它具有设备跟踪和眼球中心跟踪功能。此标志最常用于标识头戴式显示器 (HMD)。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceCharacteristics.Camera.html" target="_blank" rel="noopener noreferrer">Camera</a></td><td>设备具有摄像机跟踪功能。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceCharacteristics.HeldInHand.html" target="_blank" rel="noopener noreferrer">HeldInHand</a></td><td>用户将设备握在手中。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceCharacteristics.HandTracking.html" target="_blank" rel="noopener noreferrer">HandTracking</a></td><td>设备代表物理跟踪的手。它具有设备跟踪功能，并且可能包含手和骨骼数据。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceCharacteristics.EyeTracking.html" target="_blank" rel="noopener noreferrer">EyeTracking</a></td><td>设备可以执行眼球跟踪并具有 <a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-eyesData.html" target="_blank" rel="noopener noreferrer">EyesData</a> 功能。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceCharacteristics.TrackedDevice.html" target="_blank" rel="noopener noreferrer">TrackedDevice</a></td><td>可以在 3D 空间中跟踪设备。它具有设备跟踪功能。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceCharacteristics.Controller.html" target="_blank" rel="noopener noreferrer">Controller</a></td><td>设备具有按钮和轴的输入数据，并且可以用作控制器。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceCharacteristics.TrackingReference.html" target="_blank" rel="noopener noreferrer">TrackingReference</a></td><td>设备代表静态跟踪参考对象。它具有设备跟踪功能，但该跟踪数据不应该更改。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceCharacteristics.Left.html" target="_blank" rel="noopener noreferrer">Left</a></td><td>将此特征与 HeldInHand 或 HandTracking 特征组合使用，可以将设备标识为与左手关联。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceCharacteristics.Right.html" target="_blank" rel="noopener noreferrer">Right</a></td><td>将此特征与 HeldInHand 或 HandTracking 特征组合使用，可以将设备标识为与右手关联。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceCharacteristics.Simulated6DOF.html" target="_blank" rel="noopener noreferrer">Simulated6DOF</a></td><td>设备报告 6DOF 数据，但仅具有 3DOF 传感器。Unity 负责模拟位置数据。</td></tr></tbody></table><p>底层 XR SDK 会报告这些特征。您可以使用 <a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.InputDevice-characteristics.html" target="_blank" rel="noopener noreferrer">InputDevice.Characteristics</a> 查找这些特征。设备可以并且通常应该具有多个特征，可以使用位标志来筛选和访问这些特征。</p><p><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDevices.GetDevicesWithCharacteristics.html" target="_blank" rel="noopener noreferrer">InputDevices.GetDevicesWithCharacteristics</a> 提供了一种方法来搜索具有给定特征集的所有设备。例如，您可以使用以下代码搜索系统中可用的 Left、HeldInHand、Controller InputDevices：</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">var leftHandedControllers = new List&amp;lt;UnityEngine.XR.InputDevice&amp;gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var desiredCharacteristics = UnityEngine.XR.InputDeviceCharacteristics.HeldInHand | UnityEngine.XR.InputDeviceCharacteristics.Left | UnityEngine.XR.InputDeviceCharacteristics.Controller;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UnityEngine.XR.InputDevices.GetDevicesWithCharacteristics(desiredCharacteristics, leftHandedControllers);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach (var device in leftHandedControllers)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Debug.Log(string.Format(&quot;Device name &#x27;{0}&#x27; has characteristics &#x27;{1}&#x27;&quot;, device.name, device.characteristics.ToString()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><p>此函数找到的设备至少包含指定的特征，但可能也包含其他特征。例如，要查找惯用左手的控制器，您只能查找 InputDeviceCharacteristic.Left，而不能查找 InputDeviceCharacteristic.Controller。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="按角色访问输入设备">按角色访问输入设备<a class="hash-link" href="#按角色访问输入设备" title="标题的直接链接">​</a></h3><p>设备角色描述输入设备的一般功能。请使用 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceRole.html" target="_blank" rel="noopener noreferrer">InputDeviceRole</a> 枚举来指定设备角色。定义的角色有：</p><table><thead><tr><th><strong>角色</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceRole.GameController.html" target="_blank" rel="noopener noreferrer">GameController</a></td><td>游戏主机风格的游戏控制器。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceRole.Generic.html" target="_blank" rel="noopener noreferrer">Generic</a></td><td>代表核心 XR 设备的设备，例如头戴式显示器或移动设备。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceRole.HardwareTracker.html" target="_blank" rel="noopener noreferrer">HardwareTracker</a></td><td>跟踪设备。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceRole.LeftHanded.html" target="_blank" rel="noopener noreferrer">LeftHanded</a></td><td>与用户左手关联的设备。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceRole.RightHanded.html" target="_blank" rel="noopener noreferrer">RightHanded</a></td><td>与用户右手关联的设备。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceRole.TrackingReference.html" target="_blank" rel="noopener noreferrer">TrackingReference</a></td><td>跟踪其他设备的设备，例如 Oculus 跟踪摄像机。</td></tr></tbody></table><p>底层 XR SDK 会报告这些角色，但是不同的提供商可能会以不同的方式组织他们的设备角色。此外，用户可以换手，因此角色分配结果可能与用户握住输入设备的手不匹配。例如，用户必须将 Daydream 控制器设置为惯用右手或左手，但可以选择将控制器放在另一只手中。</p><p><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDevices.GetDevicesWithRole.html" target="_blank" rel="noopener noreferrer">GetDevicesWithRole</a> 提供具有特定 <code>InputDeviceRole</code> 的所有设备的列表。例如，您可以使用 <code>InputDeviceRole.GameController</code> 获取任何已连接的 <code>GameController</code> 设备：</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">var gameControllers = new List&amp;lt;UnityEngine.XR.InputDevice&amp;gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UnityEngine.XR.InputDevices.GetDevicesWithRole(UnityEngine.XR.InputDeviceRole.GameController, gameControllers);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach (var device in gameControllers)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Debug.Log(string.Format(&quot;Device name &#x27;{0}&#x27; has role &#x27;{1}&#x27;&quot;, device.name, device.role.ToString()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="按-xr-节点访问输入设备">按 XR 节点访问输入设备<a class="hash-link" href="#按-xr-节点访问输入设备" title="标题的直接链接">​</a></h3><p>XR 节点表示 XR 系统中的物理参考点（例如，用户的头部位置、他们的左右手或诸如 Oculus 摄像机之类的跟踪参考）。</p><p><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRNode.html" target="_blank" rel="noopener noreferrer">XRNode</a> 枚举定义了以下节点：</p><table><thead><tr><th><strong>XR 节点</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRNode.CenterEye.html" target="_blank" rel="noopener noreferrer">CenterEye</a></td><td>用户的两个瞳孔之间的中点。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRNode.GameController.html" target="_blank" rel="noopener noreferrer">GameController</a></td><td>游戏主机风格的游戏控制器。您的应用程序可以有多个游戏控制器设备。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRNode.HardwareTracker.html" target="_blank" rel="noopener noreferrer">HardwareTracker</a></td><td>硬件跟踪设备，通常连接到用户或物理项。可以存在多个硬件跟踪器节点。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRNode.Head.html" target="_blank" rel="noopener noreferrer">Head</a></td><td>由 XR 系统计算出的用户头部的中心点。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRNode.LeftEye.html" target="_blank" rel="noopener noreferrer">LeftEye</a></td><td>用户的左眼。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRNode.LeftHand.html" target="_blank" rel="noopener noreferrer">LeftHand</a></td><td>用户的左手。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRNode.RightEye.html" target="_blank" rel="noopener noreferrer">RightEye</a></td><td>用户的右眼。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRNode.RightHand.html" target="_blank" rel="noopener noreferrer">RightHand</a></td><td>用户的右手。</td></tr><tr><td><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRNode.TrackingReference.html" target="_blank" rel="noopener noreferrer">TrackingReference</a></td><td>跟踪参考点，例如 Oculus 摄像机。可以存在多个跟踪参考节点。</td></tr></tbody></table><p>请使用 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDevices.GetDevicesAtXRNode.html" target="_blank" rel="noopener noreferrer">InputDevices.GetDevicesAtXRNode</a> 来获取与特定 <code>XRNode</code> 关联的设备列表。下面的示例演示了如何获取惯用左手的控制器：</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">var leftHandDevices = new List&amp;lt;UnityEngine.XR.InputDevice&amp;gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UnityEngine.XR.InputDevices.GetDevicesAtXRNode(UnityEngine.XR.XRNode.LeftHand, leftHandDevices);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if(leftHandDevices.Count == 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UnityEngine.XR.InputDevice device = leftHandDevices[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Debug.Log(string.Format(&quot;Device name &#x27;{0}&#x27; with role &#x27;{1}&#x27;&quot;, device.name, device.role.ToString()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else if(leftHandDevices.Count &amp;gt; 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Debug.Log(&quot;Found more than one left hand!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="监听设备连接和断开连接">监听设备连接和断开连接<a class="hash-link" href="#监听设备连接和断开连接" title="标题的直接链接">​</a></h3><p>输入设备在各帧之间是一致的，但是可以随时连接或断开连接。为避免反复检查设备是否已连接到平台，请使用 <a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.InputDevices-deviceConnected.html" target="_blank" rel="noopener noreferrer">InputDevices.deviceConnected</a> 和 <a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.InputDevices-deviceDisconnected.html" target="_blank" rel="noopener noreferrer">InputDevices.deviceDisconnected</a> 在设备连接或断开连接时通知您的应用程序。这些还为您提供了有关新连接的输入设备的参考。</p><p>由于您可以在多个帧上保留这些引用，因此设备可能会断开连接，或者不再可用。要检查设备的输入是否仍然可用，请使用 <a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.InputDevice-isValid.html" target="_blank" rel="noopener noreferrer">InputDevice.isValid</a>。访问输入设备的脚本在尝试使用该设备之前，应在每个帧的开头进行此检查。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="访问输入设备上的输入功能">访问输入设备上的输入功能<a class="hash-link" href="#访问输入设备上的输入功能" title="标题的直接链接">​</a></h2><p>您可以从特定的 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDevice.html" target="_blank" rel="noopener noreferrer">InputDevice</a> 读取输入功能，例如扳机键按钮的状态。例如，要读取右扳机键的状态，请按照下列步骤操作：</p><p>1.使用 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceRole.RightHanded.html" target="_blank" rel="noopener noreferrer">InputDeviceRole.RightHanded</a> 或 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRNode.RightHand.html" target="_blank" rel="noopener noreferrer">XRNode.RightHand</a> 获取惯用右手设备的实例。 2.有了正确的设备后，请使用 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDevice.TryGetFeatureValue.html" target="_blank" rel="noopener noreferrer">InputDevice.TryGetFeatureValue</a> 方法访问当前状态。</p><p><code>TryGetFeatureValue()</code> 尝试访问功能的当前值，并根据情况返回不同的值：</p><ul><li>如果成功获取指定的功能值，则返回 true</li><li>如果当前设备不支持指定的功能，或者该设备无效（即控制器不再处于激活状态），则返回 false</li></ul><p>要获取特定的按钮、触摸输入或游戏杆轴值，请使用 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.CommonUsages.html" target="_blank" rel="noopener noreferrer">CommonUsages</a> 类。<code>CommonUsages</code> 包括 <a href="#xr-%E8%BE%93%E5%85%A5%E6%98%A0%E5%B0%84">XR 输入映射表</a>中的每个 <code>InputFeatureUsage</code>，以及诸如位置和旋转之类的跟踪功能。以下代码示例使用 <a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-triggerButton.html" target="_blank" rel="noopener noreferrer">CommonUsages.triggerButton</a> 来检测用户当前是否在特定 <code>InputDevice</code> 实例上按下扳机键按钮：</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">bool triggerValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (device.TryGetFeatureValue(UnityEngine.XR.CommonUsages.triggerButton, out triggerValue) &amp;&amp; triggerValue)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Debug.Log(&quot;Trigger button is pressed.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><p>您也可以使用 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDevice.TryGetFeatureUsages.html" target="_blank" rel="noopener noreferrer">InputDevice.TryGetFeatureUsages</a> 方法来获取设备提供的每个 <code>InputFeatureUsage</code> 的列表。此函数返回 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputFeatureUsage.html" target="_blank" rel="noopener noreferrer">InputFeatureUsage</a> 项的列表，这些项包含描述该功能的类型和名称属性。下面的示例枚举了一个给定输入设备提供的所有布尔值功能：</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">var inputFeatures = new List&amp;lt;UnityEngine.XR.InputFeatureUsage&amp;gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (device.TryGetFeatureUsages(inputFeatures))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    foreach (var feature in inputFeatures)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (feature.type == typeof(bool))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            bool featureValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (device.TryGetFeatureValue(feature.As&amp;lt;bool&amp;gt;(), out featureValue))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Debug.Log(string.Format(&quot;Bool feature {0}&#x27;s value is {1}&quot;, feature.name, featureValue.ToString()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="primarybutton-的示例">primaryButton 的示例<a class="hash-link" href="#primarybutton-的示例" title="标题的直接链接">​</a></h3><p>不同的控制器配置提供对不同功能的访问。例如，您可能在一个系统上有多个控制器，在不同系统上有不同的控制器，或者在具有不同 SDK 的同一控制器上有不同的按钮。这种多样性造成了支持各种 XR 系统的输入变得更加复杂。Unity <code>InputFeatureUsage</code> API 可帮助您获得与平台无关的输入。</p><p>以下示例将访问名为 <code>primaryButton</code> 的<code>InputFeatureUsage</code>，无论是由哪个控制器或输入设备提供。该示例包括一个类，该类在可用设备连接后扫描可用设备的 <code>primaryButton</code>。该类监视任何已连接设备上的功能值，如果值更改，则该类将调度 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/Events.UnityEvent.html" target="_blank" rel="noopener noreferrer">UnityEvent</a>。</p><p>要使用该类，请将该类作为组件添加到场景中的任何游戏对象。例如：</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">using System.Collections.Generic;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine.Events;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine.XR;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[System.Serializable]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PrimaryButtonEvent : UnityEvent&amp;lt;bool&amp;gt; { }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PrimaryButtonWatcher : MonoBehaviour</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public PrimaryButtonEvent primaryButtonPress;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private bool lastButtonState = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private List&amp;lt;InputDevice&amp;gt; devicesWithPrimaryButton;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void Awake()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (primaryButtonPress == null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            primaryButtonPress = new PrimaryButtonEvent();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        devicesWithPrimaryButton = new List&amp;lt;InputDevice&amp;gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void OnEnable()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&amp;lt;InputDevice&amp;gt; allDevices = new List&amp;lt;InputDevice&amp;gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        InputDevices.GetDevices(allDevices);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foreach(InputDevice device in allDevices)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            InputDevices_deviceConnected(device);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        InputDevices.deviceConnected += InputDevices_deviceConnected;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        InputDevices.deviceDisconnected += InputDevices_deviceDisconnected;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void OnDisable()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        InputDevices.deviceConnected -= InputDevices_deviceConnected;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        InputDevices.deviceDisconnected -= InputDevices_deviceDisconnected;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        devicesWithPrimaryButton.Clear();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void InputDevices_deviceConnected(InputDevice device)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool discardedValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (device.TryGetFeatureValue(CommonUsages.primaryButton, out discardedValue))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            devicesWithPrimaryButton.Add(device); // 添加任何具有主按钮的设备。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void InputDevices_deviceDisconnected(InputDevice device)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (devicesWithPrimaryButton.Contains(device))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            devicesWithPrimaryButton.Remove(device);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Update()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool tempState = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        foreach (var device in devicesWithPrimaryButton)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            bool primaryButtonState = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            tempState = device.TryGetFeatureValue(CommonUsages.primaryButton, out primaryButtonState) // 确实获得了值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &amp;&amp; primaryButtonState // 我们获得的值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        || tempState; // 来自其他控制器的累计结果</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (tempState != lastButtonState) // 自上一帧以来按钮状态已更改</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            primaryButtonPress.Invoke(tempState);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            lastButtonState = tempState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><p>以下 <code>PrimaryReactor</code> 类使用 <code>PrimaryButtonWatcher</code> 来检测您何时按下主按钮，然后为了响应按下操作而旋转其父级游戏对象。要使用该类，请将该类添加到可见的游戏对象（例如立方体），然后将 <code>PrimaryButtonWatcher</code> 引用拖到  <strong>Watcher</strong>  属性上。</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">using System.Collections;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PrimaryReactor : MonoBehaviour</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public PrimaryButtonWatcher watcher;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public bool IsPressed = false; // 用于在 Unity Inspector 窗口中显示按钮状态</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Vector3 rotationAngle = new Vector3(45, 45, 45);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public float rotationDuration = 0.25f; // 秒</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Quaternion offRotation;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Quaternion onRotation;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Coroutine rotator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Start()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        watcher.primaryButtonPress.AddListener(onPrimaryButtonEvent);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        offRotation = this.transform.rotation;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        onRotation = Quaternion.Euler(rotationAngle) * offRotation;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void onPrimaryButtonEvent(bool pressed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IsPressed = pressed;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (rotator != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            StopCoroutine(rotator);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (pressed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            rotator = StartCoroutine(AnimateRotation(this.transform.rotation, onRotation));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            rotator = StartCoroutine(AnimateRotation(this.transform.rotation, offRotation));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private IEnumerator AnimateRotation(Quaternion fromRotation, Quaternion toRotation)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        float t = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (t &amp;lt; rotationDuration)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            transform.rotation = Quaternion.Lerp(fromRotation, toRotation, t / rotationDuration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            t += Time.deltaTime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            yield return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="访问手部跟踪数据">访问手部跟踪数据<a class="hash-link" href="#访问手部跟踪数据" title="标题的直接链接">​</a></h3><p>InputDevices 支持手部跟踪设备。手部跟踪设备始终：</p><ul><li>具有 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDeviceCharacteristics.HandTracking.html" target="_blank" rel="noopener noreferrer">HandTracking</a> 特征</li><li>包含 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.Hand.html" target="_blank" rel="noopener noreferrer">Hand</a> 类型的 <a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-handData.html" target="_blank" rel="noopener noreferrer">CommonUsages.HandData</a> 用途</li></ul><p>手部跟踪数据由一个 Hand 对象以及一系列（最多 21个）Bone 输入功能组成。每个 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.Bone.html" target="_blank" rel="noopener noreferrer">Bone</a> 都有一个位置和方向，以及对层级视图中其父级和任何子级骨骼的引用。Hand 对象可以获取根骨骼，也可以获取每根手指的骨骼列表。</p><p>当 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.Hand.TryGetRootBone.html" target="_blank" rel="noopener noreferrer">Hand.TryGetRootBone</a> 取得根骨骼时，将获取表示位于腕部上方的骨骼的对象。您还可以获取代表每根手指的骨骼的列表。调用 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/Hand.TryGetFingerBones.html" target="_blank" rel="noopener noreferrer">Hand.TryGetFingerBones</a> 将返回一个列表，其中包含代表该手指的骨骼（从指关节到指尖）。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="访问眼球跟踪数据">访问眼球跟踪数据<a class="hash-link" href="#访问眼球跟踪数据" title="标题的直接链接">​</a></h3><p>输入设备支持眼球跟踪设备以及手部跟踪设备。眼球跟踪包括左眼和右眼位置、用户在 3D 空间中正在注视的位置以及每只眼睛眨眼的次数。数据类型为 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.Eyes.html" target="_blank" rel="noopener noreferrer">Eyes</a>。要从设备中获取该数据，请使用 <a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.CommonUsages-eyesData.html" target="_blank" rel="noopener noreferrer">CommonUsages.eyesData</a>。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="xrinputsubsystem-和-inputdevice-关联">XRInputSubsystem 和 InputDevice 关联<a class="hash-link" href="#xrinputsubsystem-和-inputdevice-关联" title="标题的直接链接">​</a></h3><p>Unity 提供了两个输入系统：旧版输入系统和 2019.2 中引入的 <a href="https://forum.unity.com/threads/xr-plugins-and-subsystems.693463/" target="_blank" rel="noopener noreferrer">XR 插件架构</a>。在新设置中，每个 InputDevice 都与一个 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRInputSubsystem.html" target="_blank" rel="noopener noreferrer">XRInputSubsystem</a> 关联。这些子系统对象控制与任何特定输入设备都无关联的全局输入行为（例如，管理跟踪原点或将跟踪的设备重新居中）。</p><p>每个 InputDevice 都包含对其关联子系统的引用。如果设备来自集成平台，则此引用为 null。还可以使用 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/SubsystemManager.GetInstances.html" target="_blank" rel="noopener noreferrer">SubsystemManager.GetInstances<!-- -->&lt;<!-- -->XRInputSubsystem<!-- -->&gt;</a> 获得所有激活的 XRInputSubsystem 对象，每个 XRInputSubsystem 都可以使用 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRInputSubsystem.TryGetInputDevices.html" target="_blank" rel="noopener noreferrer">XRInputSubsystem.TryGetInputDevices</a> 获取其设备。</p><p>您可以使用输入子系统通过 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRInputSubsystem.html" target="_blank" rel="noopener noreferrer">UnityEngine.XR.XRInputSubsystem</a> 将设备重新居中。“重新居中”可将 HMD 的当前位置设置为所有设备的新原点。对于无法重新居中的设备，或者如果平台不支持重新居中，则返回 false。</p><p>要获取跟踪边界，请使用 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRInputSubsystem.TryGetBoundaryPoints.html" target="_blank" rel="noopener noreferrer">TryGetBoundaryPoints</a>。这包含一系列顺时针排序的 3D 点，其中 y 值位于地面，它们标记出用户指定的“安全区域”以放置内容和交互。您可以使用 <a href="https://docs.unity3d.com/cn/2022.1/Manual/XR.XRInputSubsystem-boundaryChanged.html" target="_blank" rel="noopener noreferrer">XRInputSubsystem.boundaryChanged</a> 来监听此边界的变化。</p><p>XRInputSubsystem 还负责跟踪原点模式，该模式提供了跟踪世界原点的上下文。Unity 支持以下跟踪原点模式：</p><ul><li><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.TrackingOriginModeFlags.Device.html" target="_blank" rel="noopener noreferrer">设备</a>：原点的位置在主显示设备（通常是 HMD 或手机）的第一个已知位置。</li><li><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.TrackingOriginModeFlags.Floor.html" target="_blank" rel="noopener noreferrer">地面</a>：原点的位置在地面上的已知位置。</li><li><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.TrackingOriginModeFlags.TrackingReference.html" target="_blank" rel="noopener noreferrer">跟踪参考</a>：原点的位置在设置了 TrackingReference 特征的 InputDevice 上。</li><li><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.TrackingOriginModeFlags.Unknown.html" target="_blank" rel="noopener noreferrer">未知</a>：跟踪原点的类型未知。这可能是由于系统故障或缺少跟踪原点模式支持所致。</li></ul><p>您可以使用三种 API 来管理跟踪原点模式：</p><ul><li><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRInputSubsystem.TrySetTrackingOriginMode.html" target="_blank" rel="noopener noreferrer">XRInputSubsystem.TrySetTrackingOriginMode</a> 设置跟踪原点模式</li><li><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRInputSubsystem.GetTrackingOriginMode.html" target="_blank" rel="noopener noreferrer">XRInputSubystem.GetTrackingOriginMode</a> 获取跟踪原点模式</li><li><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.XRInputSubsystem.GetSupportedTrackingOriginModes.html" target="_blank" rel="noopener noreferrer">XRInputSubsystem.GetSupportedTrackingOriginModes</a> 获取 SDK 支持的所有跟踪原点模式</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="通过旧版输入系统实现-xr-输入">通过旧版输入系统实现 XR 输入<a class="hash-link" href="#通过旧版输入系统实现-xr-输入" title="标题的直接链接">​</a></h2><p>您仍然可以使用包含 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/Input.html" target="_blank" rel="noopener noreferrer">Input</a> 和 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputTracking.html" target="_blank" rel="noopener noreferrer">XR.InputTracking</a> 的旧版输入系统来获取 XR 输入功能。为此，请使用此页面上的 <a href="#xr-%E8%BE%93%E5%85%A5%E6%98%A0%E5%B0%84">XR 输入映射表</a>中的相应旧输入索引。在  <strong>Player Settings</strong>  的  <strong>Input</strong>  部分（菜单： <strong>Edit</strong>  <!-- -->&gt;<!-- -->  <strong>Project Settings</strong>  <!-- -->&gt;<!-- -->  <strong>Input</strong> ），创建一个轴映射，从而为平台设备功能添加从输入名称到轴索引的适当映射。要获取按钮或轴的值，请使用 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/Input.GetAxis.html" target="_blank" rel="noopener noreferrer">Input.GetAxis</a> 或 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/Input.GetButton.html" target="_blank" rel="noopener noreferrer">Input.GetButton</a> 并传入现在映射的轴或按钮的名称。</p><p>有关如何使用按钮和游戏杆轴的更多信息，请参阅 <a href="/docs/input/class-input-manager">InputManager</a> 文档。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="触觉">触觉<a class="hash-link" href="#触觉" title="标题的直接链接">​</a></h2><p>您可以将触觉事件发送到 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/XR.InputDevice.html" target="_blank" rel="noopener noreferrer">InputDevice</a>。触觉呈脉冲形式，具有振幅和持续时间。</p><p>并非所有平台都支持所有类型的触觉，但您可以查询设备的触觉功能。以下示例获取右手的输入设备，检查设备是否具有触觉功能，然后在有触觉功能的情况下再现脉冲：</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">List&amp;lt;UnityEngine.XR.InputDevice&amp;gt; devices = new List&amp;lt;UnityEngine.XR.InputDevice&amp;gt;(); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UnityEngine.XR.InputDevices.GetDevicesWithRole(UnityEngine.XR.InputDeviceRole.RightHanded, devices);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach (var device in devices)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UnityEngine.XR.HapticCapabilities capabilities;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (device.TryGetHapticCapabilities(out capabilities))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (capabilities.supportsImpulse)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                uint channel = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float amplitude = 0.5f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                float duration = 1.0f;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                device.SendHapticImpulse(channel, amplitude, duration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><hr><ul><li>在 <a href="https://docs.unity3d.com/Documentation/Manual/30_search.html?q=newin20192" target="_blank" rel="noopener noreferrer">2019.2</a> 中更新了 XR 输入映射表并更新了代码示例</li><li><a href="https://docs.unity3d.com/Documentation/Manual/30_search.html?q=newin20191" target="_blank" rel="noopener noreferrer">2019.1</a> 中新增的功能和行为 NewIn20191,NewIn20192</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/input/xr_input.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/mobile-input/mobile-keyboard"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">移动键盘</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/legacy-topics"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">旧版主题</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#xr-输入映射" class="table-of-contents__link toc-highlight">XR 输入映射</a></li><li><a href="#访问输入设备" class="table-of-contents__link toc-highlight">访问输入设备</a><ul><li><a href="#按特征访问输入设备" class="table-of-contents__link toc-highlight">按特征访问输入设备</a></li><li><a href="#按角色访问输入设备" class="table-of-contents__link toc-highlight">按角色访问输入设备</a></li><li><a href="#按-xr-节点访问输入设备" class="table-of-contents__link toc-highlight">按 XR 节点访问输入设备</a></li><li><a href="#监听设备连接和断开连接" class="table-of-contents__link toc-highlight">监听设备连接和断开连接</a></li></ul></li><li><a href="#访问输入设备上的输入功能" class="table-of-contents__link toc-highlight">访问输入设备上的输入功能</a><ul><li><a href="#primarybutton-的示例" class="table-of-contents__link toc-highlight">primaryButton 的示例</a></li><li><a href="#访问手部跟踪数据" class="table-of-contents__link toc-highlight">访问手部跟踪数据</a></li><li><a href="#访问眼球跟踪数据" class="table-of-contents__link toc-highlight">访问眼球跟踪数据</a></li><li><a href="#xrinputsubsystem-和-inputdevice-关联" class="table-of-contents__link toc-highlight">XRInputSubsystem 和 InputDevice 关联</a></li></ul></li><li><a href="#通过旧版输入系统实现-xr-输入" class="table-of-contents__link toc-highlight">通过旧版输入系统实现 XR 输入</a></li><li><a href="#触觉" class="table-of-contents__link toc-highlight">触觉</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.13c240a3.js"></script>
<script src="/assets/js/main.8f4a8c68.js"></script>
</body>
</html>