<!doctype html>
<html class="docs-version-current" lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="alternate" type="application/rss+xml" href="/doc-unity-manual/blog/rss.xml" title="Unity 手册 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/doc-unity-manual/blog/atom.xml" title="Unity 手册 Atom Feed"><title data-rh="true">脚本限制 | Unity 手册</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://danyow.github.io/doc-unity-manual//doc-unity-manual/docs/scripting-backends/scripting-restrictions"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="脚本限制 | Unity 手册"><meta data-rh="true" name="description" content="Unity 在支持的所有平台之间提供通用的脚本 API 和体验。但是，有些平台存在固有的限制。为帮助您了解这些限制，下表描述了每个平台和脚本后端适用的限制："><meta data-rh="true" property="og:description" content="Unity 在支持的所有平台之间提供通用的脚本 API 和体验。但是，有些平台存在固有的限制。为帮助您了解这些限制，下表描述了每个平台和脚本后端适用的限制："><link data-rh="true" rel="icon" href="/doc-unity-manual/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danyow.github.io/doc-unity-manual//doc-unity-manual/docs/scripting-backends/scripting-restrictions"><link data-rh="true" rel="alternate" href="https://danyow.github.io/doc-unity-manual//doc-unity-manual/docs/scripting-backends/scripting-restrictions" hreflang="zh"><link data-rh="true" rel="alternate" href="https://danyow.github.io/doc-unity-manual//doc-unity-manual/docs/scripting-backends/scripting-restrictions" hreflang="x-default"><link rel="stylesheet" href="/doc-unity-manual/assets/css/styles.3b98a603.css">
<link rel="preload" href="/doc-unity-manual/assets/js/runtime~main.fe6cf380.js" as="script">
<link rel="preload" href="/doc-unity-manual/assets/js/main.53b1625e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doc-unity-manual/"><div class="navbar__logo"><img src="/doc-unity-manual/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/doc-unity-manual/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">My Site</b></a><a class="navbar__item navbar__link navbar__link--active" href="/doc-unity-manual/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/doc-unity-manual/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="切换浅色/暗黑模式（当前为浅色模式）"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc-unity-manual/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc-unity-manual/docs/tutorial-basics/create-a-page">Tutorial - Basics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc-unity-manual/docs/tutorial-extras/manage-docs-versions">Tutorial - Extras</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/animation-section">animation-section</a><button aria-label="打开/收起侧边栏菜单「animation-section」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/asset-store">asset-store</a><button aria-label="打开/收起侧边栏菜单「asset-store」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/asset-workflow">asset-workflow</a><button aria-label="打开/收起侧边栏菜单「asset-workflow」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/audio">audio</a><button aria-label="打开/收起侧边栏菜单「audio」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/creating-environments">creating-environments</a><button aria-label="打开/收起侧边栏菜单「creating-environments」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc-unity-manual/docs/Glossary">术语表</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/graphics">graphics</a><button aria-label="打开/收起侧边栏菜单「graphics」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/input">input</a><button aria-label="打开/收起侧边栏菜单「input」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/legacy-topics">legacy-topics</a><button aria-label="打开/收起侧边栏菜单「legacy-topics」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/navigation">navigation</a><button aria-label="打开/收起侧边栏菜单「navigation」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/open-source-repositories">open-source-repositories</a><button aria-label="打开/收起侧边栏菜单「open-source-repositories」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/packages-list">packages-list</a><button aria-label="打开/收起侧边栏菜单「packages-list」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/physics-section">physics-section</a><button aria-label="打开/收起侧边栏菜单「physics-section」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/platform-specific">platform-specific</a><button aria-label="打开/收起侧边栏菜单「platform-specific」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/doc-unity-manual/docs/scripting-section">scripting-section</a><button aria-label="打开/收起侧边栏菜单「scripting-section」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/job-system">job-system</a><button aria-label="打开/收起侧边栏菜单「job-system」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/plugins">plugins</a><button aria-label="打开/收起侧边栏菜单「plugins」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/scripting-concepts">scripting-concepts</a><button aria-label="打开/收起侧边栏菜单「scripting-concepts」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/scripting-important-classes">scripting-important-classes</a><button aria-label="打开/收起侧边栏菜单「scripting-important-classes」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/scripting-setting-up">scripting-setting-up</a><button aria-label="打开/收起侧边栏菜单「scripting-setting-up」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" tabindex="0" href="/doc-unity-manual/docs/unity-architecture">unity-architecture</a><button aria-label="打开/收起侧边栏菜单「unity-architecture」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/code-reloading-editor">code-reloading-editor</a><button aria-label="打开/收起侧边栏菜单「code-reloading-editor」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/overview-of-dot-net-in-unity">overview-of-dot-net-in-unity</a><button aria-label="打开/收起侧边栏菜单「overview-of-dot-net-in-unity」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/script-compilation">script-compilation</a><button aria-label="打开/收起侧边栏菜单「script-compilation」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/script-serialization">script-serialization</a><button aria-label="打开/收起侧边栏菜单「script-serialization」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" tabindex="0" href="/doc-unity-manual/docs/scripting-backends">scripting-backends</a><button aria-label="打开/收起侧边栏菜单「scripting-backends」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/il2cpp">il2cpp</a><button aria-label="打开/收起侧边栏菜单「il2cpp」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/scripting-backends/managed-code-stripping">托管代码剥离</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/scripting-backends/mono">Mono overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/doc-unity-manual/docs/scripting-backends/scripting-restrictions">脚本限制</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/doc-unity-manual/docs/scripting-backends/unity-linker">The Unity linker</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/search-overview">search-overview</a><button aria-label="打开/收起侧边栏菜单「search-overview」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/uitoolkits">uitoolkits</a><button aria-label="打开/收起侧边栏菜单「uitoolkits」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/unet">unet</a><button aria-label="打开/收起侧边栏菜单「unet」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc-unity-manual/docs/unity-manual">unity-manual</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/unity-overview">unity-overview</a><button aria-label="打开/收起侧边栏菜单「unity-overview」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/unity-services">unity-services</a><button aria-label="打开/收起侧边栏菜单「unity-services」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/unity2d">unity2d</a><button aria-label="打开/收起侧边栏菜单「unity2d」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/video-player">video-player</a><button aria-label="打开/收起侧边栏菜单「video-player」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/doc-unity-manual/docs/xr">xr</a><button aria-label="打开/收起侧边栏菜单「xr」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/doc-unity-manual/">🏠</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/doc-unity-manual/docs/scripting-section">scripting-section</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/doc-unity-manual/docs/unity-architecture">unity-architecture</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/doc-unity-manual/docs/scripting-backends">scripting-backends</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/doc-unity-manual/docs/scripting-backends/scripting-restrictions">脚本限制</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>脚本限制</h1><p>Unity 在支持的所有平台之间提供通用的脚本 API 和体验。但是，有些平台存在固有的限制。为帮助您了解这些限制，下表描述了每个平台和脚本后端适用的限制：</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="net-4x-等效脚本运行时">.NET 4.x 等效脚本运行时<a class="hash-link" href="#net-4x-等效脚本运行时" title="标题的直接链接">​</a></h2><table><thead><tr><th><strong>平台（脚本后端）</strong></th><th><strong>提前编译</strong></th><th><strong>无线程</strong></th><th><strong>.NET Core 类库子集</strong></th></tr></thead><tbody><tr><td>Android (IL2CPP)</td><td>✔</td><td>-&gt;</td><td></td></tr><tr><td>Android (Mono)</td><td>-&gt;</td><td></td><td></td></tr><tr><td>iOS (IL2CPP)</td><td>✔</td><td>-&gt;</td><td></td></tr><tr><td>独立平台 (IL2CPP)</td><td>✔</td><td>-&gt;</td><td></td></tr><tr><td>独立平台 (Mono)</td><td>-&gt;</td><td></td><td></td></tr><tr><td>通用 Windows 平台 (IL2CPP)</td><td>✔</td><td>-&gt;</td><td></td></tr><tr><td>通用 Windows 平台 (.NET)</td><td>-&gt;</td><td>✔</td><td></td></tr><tr><td>WebGL (IL2CPP)</td><td>✔</td><td>✔</td><td></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="提前编译">提前编译<a class="hash-link" href="#提前编译" title="标题的直接链接">​</a></h2><p>有些平台不允许生成运行时代码。因此，任何依赖于在目标设备上即时 (JIT) 编译的托管代码都将失败。相反，必须提前 (AOT) 编译所有托管代码。通常，这种区别并不重要，但在少数特定情况下，AOT 平台需要额外注意。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="systemreflectionemit">System.Reflection.Emit<a class="hash-link" href="#systemreflectionemit" title="标题的直接链接">​</a></h3><p>AOT 平台无法实现 <code>System.Reflection.Emit</code> 命名空间中的任何方法。<code>System.Reflection</code> 的其余部分是可接受的，只要编译器可以推断通过反射使用的代码需要在运行时存在。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="序列化">序列化<a class="hash-link" href="#序列化" title="标题的直接链接">​</a></h3><p>AOT platforms might encounter issues with serialization and deserialization because of the use of reflection. If a type or method is only used via reflection as part of serialization or deserialization, the AOT compiler cannot detect that it needs to generate the code needs for the type or method.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="通用虚拟方法">通用虚拟方法<a class="hash-link" href="#通用虚拟方法" title="标题的直接链接">​</a></h3><p>如果使用泛型方法，编译器必须做一些额外的工作，才能将您编写的代码扩展到设备上执行的代码。例如，对于具有 <code>int</code> 或 <code>double</code> 类型的 <code>List</code>，需要不同代码。如果使用虚拟方法，在运行时而不是编译时确定行为，存在虚拟方法时，编译器可在不完全明显的地方轻松地要求从源代码生成运行时代码。</p><p>以下代码示例在 JIT 平台上完全按预期工作（向控制台输出一次“Message value: Zero”）：</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AOTProblemExample : MonoBehaviour, IReceiver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public enum AnyEnum </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Zero,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        One,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Start() </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 微妙的触发器：管理器的类型*必须*是</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // IManager（而不是 Manager）才能触发 AOT 问题。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IManager manager = new Manager();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        manager.SendMessage(this, AnyEnum.Zero);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void OnMessage&amp;lt;T&amp;gt;(T value) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Debug.LogFormat(&quot;Message value: {0}&quot;, value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Manager : IManager </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void SendMessage&amp;lt;T&amp;gt;(IReceiver target, T value) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        target.OnMessage(value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface IReceiver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void OnMessage&amp;lt;T&amp;gt;(T value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public interface IManager </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void SendMessage&amp;lt;T&amp;gt;(IReceiver target, T value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><p>但是，使用 IL2CPP 脚本后端在 AOT 平台上执行此代码时，发生以下异常：</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">ExecutionEngineException: Attempting to call method &#x27;AOTProblemExample::OnMessage&amp;lt;AOTProblemExample+AnyEnum&amp;gt;&#x27; for which no ahead of time (AOT) code was generated.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  at Manager.SendMessage[T] (IReceiver target, .T value) [0x00000] in &amp;lt;filename unknown&amp;gt;:0 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  at AOTProblemExample.Start () [0x00000] in &amp;lt;filename unknown&amp;gt;:0</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><p>同样，Mono 脚本后端提供以下类似的异常：</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">  ExecutionEngineException: Attempting to JIT compile method &#x27;Manager:SendMessage&amp;lt;AOTProblemExample/AnyEnum&amp;gt; (IReceiver,AOTProblemExample/AnyEnum)&#x27; while running with --aot-only.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at AOTProblemExample.Start () [0x00000] in &amp;lt;filename unknown&amp;gt;:0</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><p>AOT 编译器不会意识到自己应该为 <code>T</code> 为 <code>AnyEnum</code> 的泛型方法 <code>OnMessage</code> 生成代码，它会继续往下，跳过该方法。调用该方法时，运行时无法找到要执行的正确代码，因此返回此错误消息。</p><p>要解决像这样的 AOT 问题，可以强制编译器生成适当的代码。为此，可以向 <code>AOTProblemExample</code> 类添加以下示例方法：</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">public void UsedOnlyForAOTCodeGeneration() </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // IL2CPP 只需要这一行。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OnMessage(AnyEnum.Zero);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //Mono 也需要这一行。请注意，我们</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 直接在 Manager 而不是 IManager 接口上调用。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    new Manager().SendMessage(null, AnyEnum.Zero);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //包含一个异常，这样我们就可以确定是否调用过该方法。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    throw new InvalidOperationException(&quot;This method is used for AOT code generation only.Do not call it at runtime.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><p>当编译器遇到 <code>T</code> 为 <code>AnyEnum</code> 的 <code>OnMessage</code> 的显式调用时，它会生成运行时执行的正确代码。不需要调用 <code>UsedOnlyForAOTCodeGeneration</code> 方法；该方法的存在只是为了让编译器看到而已。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="从原生代码调用托管方法">从原生代码调用托管方法<a class="hash-link" href="#从原生代码调用托管方法" title="标题的直接链接">​</a></h3><p>需要编组到 C 函数指针以便可以从原生代码调用的托管方法会在 AOT 平台上有一些限制：</p><ul><li>托管方法必须是静态方法</li><li>托管方法必须具有 <code>[MonoPInvokeCallback]</code> 属性</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="无线程">无线程<a class="hash-link" href="#无线程" title="标题的直接链接">​</a></h2><p>有些平台不支持使用线程，因此任何使用 <code>System.Threading</code> 命名空间的托管代码都将在运行时失败。此外，.NET 类库的某些部分存在对线程的隐式依赖。一个常用的例子是 <code>System.Timers.Timer</code> 类，它依赖于对线程的支持。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="异常过滤器">异常过滤器<a class="hash-link" href="#异常过滤器" title="标题的直接链接">​</a></h2><p>IL2CPP 不支持 C# 异常过滤器。应该将依赖于异常过滤器的代码修改为正确的 <code>catch</code> 块。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="typedreference">TypedReference<a class="hash-link" href="#typedreference" title="标题的直接链接">​</a></h2><p>IL2CPP 不支持 <code>System.TypedReference</code> 类型和 <code>__makeref</code> C# 关键字。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="marshalas-和-fieldoffset-属性">MarshalAs 和 FieldOffset 属性<a class="hash-link" href="#marshalas-和-fieldoffset-属性" title="标题的直接链接">​</a></h2><p>IL2CPP 不支持在运行时反射 <code>MarhsalAs</code> 和 <code>FieldOffset</code> 属性。它在编译时支持这些属性。应正确使用它们以进行正确的<a href="https://docs.microsoft.com/en-us/dotnet/framework/interop/marshaling-data-with-platform-invoke" target="_blank" rel="noopener noreferrer">平台调用编组</a>。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="动态关键字">动态关键字<a class="hash-link" href="#动态关键字" title="标题的直接链接">​</a></h2><p>IL2CPP 不支持 C# <code>dynamic</code> 关键字。此关键字需要 JIT 编译，而 IL2CPP 无法实现。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="marshalprelink">Marshal.Prelink<a class="hash-link" href="#marshalprelink" title="标题的直接链接">​</a></h2><p>IL2CPP does not support the <code>Marshal.Prelink</code> or <code>Marshal.PrelinkAll</code> API methods.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/scripting-section/unity-architecture/scripting-backends/scripting-restrictions.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/doc-unity-manual/docs/scripting-backends/mono"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Mono overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/doc-unity-manual/docs/scripting-backends/unity-linker"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">The Unity linker</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#net-4x-等效脚本运行时" class="table-of-contents__link toc-highlight">.NET 4.x 等效脚本运行时</a></li><li><a href="#提前编译" class="table-of-contents__link toc-highlight">提前编译</a><ul><li><a href="#systemreflectionemit" class="table-of-contents__link toc-highlight">System.Reflection.Emit</a></li><li><a href="#序列化" class="table-of-contents__link toc-highlight">序列化</a></li><li><a href="#通用虚拟方法" class="table-of-contents__link toc-highlight">通用虚拟方法</a></li><li><a href="#从原生代码调用托管方法" class="table-of-contents__link toc-highlight">从原生代码调用托管方法</a></li></ul></li><li><a href="#无线程" class="table-of-contents__link toc-highlight">无线程</a></li><li><a href="#异常过滤器" class="table-of-contents__link toc-highlight">异常过滤器</a></li><li><a href="#typedreference" class="table-of-contents__link toc-highlight">TypedReference</a></li><li><a href="#marshalas-和-fieldoffset-属性" class="table-of-contents__link toc-highlight">MarshalAs 和 FieldOffset 属性</a></li><li><a href="#动态关键字" class="table-of-contents__link toc-highlight">动态关键字</a></li><li><a href="#marshalprelink" class="table-of-contents__link toc-highlight">Marshal.Prelink</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/doc-unity-manual/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/doc-unity-manual/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/doc-unity-manual/assets/js/runtime~main.fe6cf380.js"></script>
<script src="/doc-unity-manual/assets/js/main.53b1625e.js"></script>
</body>
</html>