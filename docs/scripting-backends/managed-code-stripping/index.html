<!doctype html>
<html class="docs-version-current" lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Unity 手册 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Unity 手册 Atom Feed"><title data-rh="true">托管代码剥离 | Unity 手册</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://danyow.github.io/doc-unity-manual//docs/scripting-backends/managed-code-stripping"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="托管代码剥离 | Unity 手册"><meta data-rh="true" name="description" content="During the build process, Unity removes unused or unreachable code through a process called managed code stripping, which can significantly decrease your application’s final size. Managed code stripping removes code from managed assemblies, including assemblies built from the C# scripts in your project, assemblies that are part of packages and plugins, and assemblies in .NET Framework."><meta data-rh="true" property="og:description" content="During the build process, Unity removes unused or unreachable code through a process called managed code stripping, which can significantly decrease your application’s final size. Managed code stripping removes code from managed assemblies, including assemblies built from the C# scripts in your project, assemblies that are part of packages and plugins, and assemblies in .NET Framework."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://danyow.github.io/doc-unity-manual//docs/scripting-backends/managed-code-stripping"><link data-rh="true" rel="alternate" href="http://danyow.github.io/doc-unity-manual//docs/scripting-backends/managed-code-stripping" hreflang="zh"><link data-rh="true" rel="alternate" href="http://danyow.github.io/doc-unity-manual//docs/scripting-backends/managed-code-stripping" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.3b98a603.css">
<link rel="preload" href="/assets/js/runtime~main.13c240a3.js" as="script">
<link rel="preload" href="/assets/js/main.8f4a8c68.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">My Site</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="切换浅色/暗黑模式（当前为浅色模式）"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/tutorial-basics/create-a-page">Tutorial - Basics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/tutorial-extras/manage-docs-versions">Tutorial - Extras</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/animation-section">animation-section</a><button aria-label="打开/收起侧边栏菜单「animation-section」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/asset-store">asset-store</a><button aria-label="打开/收起侧边栏菜单「asset-store」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/asset-workflow">asset-workflow</a><button aria-label="打开/收起侧边栏菜单「asset-workflow」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/audio">audio</a><button aria-label="打开/收起侧边栏菜单「audio」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/creating-environments">creating-environments</a><button aria-label="打开/收起侧边栏菜单「creating-environments」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Glossary">术语表</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/graphics">graphics</a><button aria-label="打开/收起侧边栏菜单「graphics」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/input">input</a><button aria-label="打开/收起侧边栏菜单「input」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/legacy-topics">legacy-topics</a><button aria-label="打开/收起侧边栏菜单「legacy-topics」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/navigation">navigation</a><button aria-label="打开/收起侧边栏菜单「navigation」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/open-source-repositories">open-source-repositories</a><button aria-label="打开/收起侧边栏菜单「open-source-repositories」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/packages-list">packages-list</a><button aria-label="打开/收起侧边栏菜单「packages-list」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/physics-section">physics-section</a><button aria-label="打开/收起侧边栏菜单「physics-section」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/platform-specific">platform-specific</a><button aria-label="打开/收起侧边栏菜单「platform-specific」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/docs/scripting-section">scripting-section</a><button aria-label="打开/收起侧边栏菜单「scripting-section」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/docs/job-system">job-system</a><button aria-label="打开/收起侧边栏菜单「job-system」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/docs/plugins">plugins</a><button aria-label="打开/收起侧边栏菜单「plugins」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/docs/scripting-concepts">scripting-concepts</a><button aria-label="打开/收起侧边栏菜单「scripting-concepts」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/docs/scripting-important-classes">scripting-important-classes</a><button aria-label="打开/收起侧边栏菜单「scripting-important-classes」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/docs/scripting-setting-up">scripting-setting-up</a><button aria-label="打开/收起侧边栏菜单「scripting-setting-up」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" tabindex="0" href="/docs/unity-architecture">unity-architecture</a><button aria-label="打开/收起侧边栏菜单「unity-architecture」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/docs/code-reloading-editor">code-reloading-editor</a><button aria-label="打开/收起侧边栏菜单「code-reloading-editor」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/docs/overview-of-dot-net-in-unity">overview-of-dot-net-in-unity</a><button aria-label="打开/收起侧边栏菜单「overview-of-dot-net-in-unity」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/docs/script-compilation">script-compilation</a><button aria-label="打开/收起侧边栏菜单「script-compilation」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/docs/script-serialization">script-serialization</a><button aria-label="打开/收起侧边栏菜单「script-serialization」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" tabindex="0" href="/docs/scripting-backends">scripting-backends</a><button aria-label="打开/收起侧边栏菜单「scripting-backends」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0" href="/docs/il2cpp">il2cpp</a><button aria-label="打开/收起侧边栏菜单「il2cpp」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/scripting-backends/managed-code-stripping">托管代码剥离</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/scripting-backends/mono">Mono overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/scripting-backends/scripting-restrictions">脚本限制</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/scripting-backends/unity-linker">The Unity linker</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/search-overview">search-overview</a><button aria-label="打开/收起侧边栏菜单「search-overview」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/uitoolkits">uitoolkits</a><button aria-label="打开/收起侧边栏菜单「uitoolkits」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/unet">unet</a><button aria-label="打开/收起侧边栏菜单「unet」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/unity-manual">unity-manual</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/unity-overview">unity-overview</a><button aria-label="打开/收起侧边栏菜单「unity-overview」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/unity-services">unity-services</a><button aria-label="打开/收起侧边栏菜单「unity-services」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/unity2d">unity2d</a><button aria-label="打开/收起侧边栏菜单「unity2d」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/video-player">video-player</a><button aria-label="打开/收起侧边栏菜单「video-player」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/xr">xr</a><button aria-label="打开/收起侧边栏菜单「xr」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">🏠</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/scripting-section">scripting-section</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/unity-architecture">unity-architecture</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/scripting-backends">scripting-backends</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/scripting-backends/managed-code-stripping">托管代码剥离</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>托管代码剥离</h1><p>During the build process, Unity removes unused or unreachable code through a process called managed code stripping, which can significantly decrease your application’s final size. Managed code stripping removes code from managed assemblies, including assemblies built from the C# scripts in your project, assemblies that are part of packages and plugins, and assemblies in .NET Framework.</p><p>Unity uses a tool called the Unity linker to perform a static analysis of the code in your project’s assemblies. The static analysis identifies any classes, portions of classes, functions, or portions of functions that can’t be reached during execution. This analysis only includes code that exists at build time because runtime generated code doesn’t exist when Unity performs the static analysis.</p><p>You can configure the level of code stripping Unity performs for your project using the  <strong>Managed Stripping Level</strong>  setting. To prevent Unity removing specific parts of your code, use annotations to indicate which parts of your code base the Unity linker should preserve. For more information, see <a href="#unity-linker">Unity linker</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="configure-managed-code-stripping">Configure managed code stripping<a class="hash-link" href="#configure-managed-code-stripping" title="标题的直接链接">​</a></h2><p><img src="https://docs.unity3d.com/cn/2022.1/uploads/Main/managed-code-stripping-level.png" alt="The Managed Stripping Level property"></p><p>The Managed Stripping Level property</p><p>The  <strong>Managed Stripping Level</strong>  property determines the set of rules that the Unity linker follows when it analyzes and strips your application’s code. As you increase the setting from  <strong>Minimal</strong>  to  <strong>High</strong> , the rules enable the linker to search through more assemblies for unreachable code. The Unity linker removes more code at the higher settings which reduces the final size of your build, though the expanded search means that each build takes longer to produce.</p><p>To change the  <strong>Managed Stripping Level</strong>  property:</p><ol><li>Go to  <strong>Edit</strong>  <!-- -->&gt;<!-- -->  <strong>Project Settings</strong>  <!-- -->&gt;<!-- -->  <strong>Player</strong> .</li><li>In Other Settings, navigate to the Optimization heading.</li><li>Set the  <strong>Managed Stripping Level</strong>  property to the desired value.</li></ol><table><thead><tr><th><strong>属性：</strong></th><th><strong>功能：</strong></th></tr></thead><tbody><tr><td><strong>Disabled</strong></td><td>Unity doesn’t remove any code.<br><br>This setting is visible only and is the default setting if you use the Mono scripting backend.</td></tr><tr><td><strong>Minimal</strong></td><td>Unity searches only the UnityEngine and the .NET class libraries for unused code. Unity doesn’t remove any user-written code. This setting is the least likely to cause any unexpected runtime behavior.<br><br>This setting is useful for projects where usability is of higher priority than build size.This is the default setting if you use the IL2CPP scripting backend.</td></tr><tr><td><strong>Low</strong></td><td>Unity searches some user-written assemblies and all UnityEngine and .NET class libraries for unused code. This setting applies a set of rules that removes some unused code but minimizes the likelihood of unintended consequences, such as changes in behavior of runtime code that uses reflection.</td></tr><tr><td><strong>Medium</strong></td><td>Unity partially searches all assemblies to find unreachable code. This setting applies a set of rules that strips more types of code patterns to reduce the build size. Although Unity doesn’t strip all possible unreachable code, this setting does increase the risk of undesirable or unexpected behavior changes.</td></tr><tr><td><strong>High</strong></td><td>Unity performs an extensive search of all assemblies to find unreachable code. At this setting, Unity prioritizes size reduction more than code stability and removes as much code as possible.<br><br>This search can take much longer than for lower stripping levels. Use this setting only for projects where a compact build size is extremely important. Test your application thoroughly and make careful use of <!-- -->[<!-- -->Preserve<!-- -->]<!-- --> attributes and link.xml files to ensure that the Unity linker doesn’t strip vital code.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="preserve-code-using-annotations">Preserve code using annotations<a class="hash-link" href="#preserve-code-using-annotations" title="标题的直接链接">​</a></h2><p>You can use annotations to prevent the Unity linker from stripping specific sections of your code. This is helpful if your application produces runtime code which doesn’t exist when Unity performs the static analysis; for example, through <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/reflection" target="_blank" rel="noopener noreferrer">reflection</a>. Annotations either provide general guidance to the Unity linker about which code patterns it shouldn’t strip, or instructions not to strip a specific, defined section of code.</p><p>There are two broad approaches you can use to annotate your code to preserve it from the managed code stripping process:</p><ul><li>Root annotations identify parts of your code as roots. The Unity linker doesn’t strip any code that is marked as a root. Root annotations are less complicated to use but can also lead to the Unity linker preserving some code that it should strip.</li><li>Dependency annotations define the connections between code elements. Dependency annotations can reduce the amount of over preservation of code compared to root annotations.</li></ul><p>Each of these techniques provides more control over the amount of code that the Unity linker strips at higher stripping levels and reduces the chance of vital code being stripped. Annotations are especially useful when your code references other code through reflection, because the Unity linker can’t always detect uses of reflection.</p><p>Preserve code that uses reflection or generates other code at runtime to significantly reduce the likelihood of unexpected behavior when your application is executed. For examples of reflection patterns that the Unity linker can recognize, see the <a href="https://github.com/Unity-Technologies/linker/tree/unity-master/test/Mono.Linker.Tests.Cases/Reflection" target="_blank" rel="noopener noreferrer">Unity Intermediate Language Linker reflection test suite</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="root-annotations">Root annotations<a class="hash-link" href="#root-annotations" title="标题的直接链接">​</a></h2><p>Root annotations force the Unity linker to treat code elements as roots, which aren’t stripped in the code stripping process. There are two types of root annotations you can use, depending on whether you need to preserve individual types with their constructors or assemblies:</p><ul><li><a href="#annotate-roots-using-the-preserve-attribute">Preserve Attribute</a>: Annotates individual types as roots to preserve them.</li><li><a href="#annotate-roots-using-a-link-xml-file">Link.xml</a>: Annotates assemblies and any types or other code entities within those assemblies as roots to preserve them.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="annotate-roots-using-the-preserve-attribute">Annotate roots using the Preserve attribute<a class="hash-link" href="#annotate-roots-using-the-preserve-attribute" title="标题的直接链接">​</a></h3><p>Use the <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/Scripting.html" target="_blank" rel="noopener noreferrer">Preserve</a> attribute to individually exclude specific sections of your code from the Unity linker’s static analysis. To annotate a piece of code with this attribute, add <code>[Preserve]</code> immediately before the first part of the code you want to preserve. The following list describes what entities the Unity linker preserves when you annotate different code elements with the <code>[Preserve]</code> attribute:</p><ul><li><strong>Assembly</strong> : Preserves all types that are used and defined in the assembly. To assign the <code>[Preserve]</code> attribute to an assembly, place the attribute declaration in any C# file included in the assembly, before any namespace declarations.</li><li><strong>Type</strong> : Preserves a class or type and its default constructor.</li><li><strong>Method</strong> : Preserves the method, the type that declares the method, the type the method returns, and the types of all of its arguments.</li><li><strong>Property</strong> : Preserves the property, the type that declares the property, the value type of the property, and methods that get and set the property value.</li><li><strong>Field</strong> : Preserves the field, the field type, and the type that declares the field.</li><li><strong>Event</strong> : Preserves the event, the type that declares the event, type, the type the event returns, the <code>[add]</code> accessor, and the <code>[remove]</code> accessor.</li><li><strong>Delegate</strong> : Preserves the delegate type and all methods that the delegate invokes.</li></ul><p>Use the <code>[Preserve]</code> attribute when you want to preserve both a type and its default constructor. If you want to keep one or the other but not both, use a link.xml file.</p><p>You can define the <code>[Preserve]</code> attribute in any assembly and in any namespace. You can use the UnityEngine.Scripting.PreserveAttribute class, create a subclass of UnityEngine.Scripting.PreserveAttribute, or create your own <a href="https://docs.unity3d.com/ScriptReference/PreserveAttribute.html" target="_blank" rel="noopener noreferrer">PreserveAttribute</a> class. For example:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">class Foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Preserve]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void PreservedMethod(){}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="annotate-roots-using-a-link-xml-file">Annotate roots using a Link XML file<a class="hash-link" href="#annotate-roots-using-a-link-xml-file" title="标题的直接链接">​</a></h3><p>You can include a .xml file entitled link.xml in your project to preserve a list of specific assemblies or parts of assemblies. The link.xml file must be present in the <code>Assets</code> folder or a subdirectory of the <code>Assets</code> folder in your project and must include the <code>&amp;lt;linker&amp;gt;</code> tag in the file. The Unity linker treats any assembly, type, or member preserved in a link.xml file as a root type.</p><p>You can use any number of link.xml files in your project. As a result, you can provide separate preservation declarations for each plugin. You can’t include a link.xml file in a package, but you can reference package assemblies from non-package link.xml files.</p><p>The following examples illustrate the different ways that you can declare the root types of a project’s assemblies using a link.xml file:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;linker&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;!--Preserve types and members in an assembly--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;assembly fullname=&quot;AssemblyName&quot;&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;!--Preserve an entire type--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type fullname=&quot;AssemblyName.MethodName&quot; preserve=&quot;all&quot;/&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;!--No &quot;preserve&quot; attribute and no members specified means preserve all members--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type fullname=&quot;AssemblyName.MethodName&quot;/&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;!--Preserve all fields on a type--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type fullname=&quot;AssemblyName.MethodName&quot; preserve=&quot;fields&quot;/&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;!--Preserve all fields on a type--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type fullname=&quot;AssemblyName.MethodName&quot; preserve=&quot;methods&quot;/&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;!--Preserve the type only--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type fullname=&quot;AssemblyName.MethodName&quot; preserve=&quot;nothing&quot;/&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;!--Preserving only specific members of a type--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type fullname=&quot;AssemblyName.MethodName&quot;&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Fields--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;field signature=&quot;System.Int32 FieldName&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Preserve a field by name rather than signature--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;field name=&quot;FieldName&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Methods--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;method signature=&quot;System.Void MethodName()&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Preserve a method with parameters--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;method signature=&quot;System.Void MethodName(System.Int32,System.String)&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Preserve a method by name rather than signature--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;method name=&quot;MethodName&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Properties--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Preserve a property, it&#x27;s backing field (if present), </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          getter, and setter methods--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;property signature=&quot;System.Int32 PropertyName&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;property signature=&quot;System.Int32 PropertyName&quot; accessors=&quot;all&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Preserve a property, it&#x27;s backing field (if present), and getter method--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;property signature=&quot;System.Int32 PropertyName&quot; accessors=&quot;get&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Preserve a property, it&#x27;s backing field (if present), and setter method--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;property signature=&quot;System.Int32 PropertyName&quot; accessors=&quot;set&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Preserve a property by name rather than signature--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;property name=&quot;PropertyName&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Events--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Preserve an event, it&#x27;s backing field (if present), add, and remove methods--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;event signature=&quot;System.EventHandler EventName&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Preserve an event by name rather than signature--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;event name=&quot;EventName&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;/type&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;/assembly&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;/linker&amp;gt;</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><p>The next example shows how you can declare entire assemblies:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;!--Preserve an entire assembly--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;assembly fullname=&quot;AssemblyName&quot; preserve=&quot;all&quot;/&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;!--No &quot;preserve&quot; attribute and no types specified means preserve all--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;assembly fullname=&quot;AssemblyName&quot;/&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;!--Fully qualified assembly name--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;assembly fullname=&quot;AssemblyName, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null&quot;&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type fullname=&quot;AssemblyName.Foo&quot; preserve=&quot;all&quot;/&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;/assembly&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;!--Force an assembly to be processed for roots but don’t explicitly preserve anything in particular. Useful when the assembly isn&#x27;t referenced.--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;assembly fullname=&quot;AssemblyName&quot; preserve=&quot;nothing&quot;/&amp;gt;</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><p>This example shows how to preserve either nested or generic types:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;!--Examples with generics--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type fullname=&quot;AssemblyName.G`1&quot;&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Preserve a field with generics in the signature--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;field signature=&quot;System.Collections.Generic.List`1&amp;lt;System.Int32&amp;gt; FieldName&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;field signature=&quot;System.Collections.Generic.List`1&amp;lt;T&amp;gt; FieldName&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Preserve a method with generics in the signature--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;method signature=&quot;System.Void MethodName(System.Collections.Generic.List`1&amp;lt;System.Int32&amp;gt;)&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;!--Preserve an event with generics in the signature--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &amp;lt;event signature=&quot;System.EventHandler`1&amp;lt;System.EventArgs&amp;gt; EventName&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;/type&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;!--Preserve a nested type--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type fullname=&quot;AssemblyName.H/Nested&quot; preserve=&quot;all&quot;/&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;!--Preserve all fields of a type if the type is used.  If the type isn&#x27;t used, it will be removed--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type fullname=&quot;AssemblyName.I&quot; preserve=&quot;fields&quot; required=&quot;0&quot;/&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;!--Preserve all methods of a type if the type is used. If the type isn&#x27;t used, it will be removed--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type fullname=&quot;AssemblyName.J&quot; preserve=&quot;methods&quot; required=&quot;0&quot;/&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;!--Preserve all types in a namespace--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type fullname=&quot;AssemblyName.SomeNamespace*&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;!--Preserve all types with a common prefix in their name--&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type fullname=&quot;Prefix*&quot; /&amp;gt;</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="additional-assembly-xml-attributes">Additional Assembly XML attributes<a class="hash-link" href="#additional-assembly-xml-attributes" title="标题的直接链接">​</a></h3><p>The <code>&amp;lt;assembly&amp;gt;</code> element of the link.xml file has three special-purpose attributes that you can enable for more control over the annotations.</p><ul><li><code>ignoreIfMissing</code>: Use this attribute if you need to declare preservations for an assembly that doesn’t exist during all Player builds.</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;linker&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;assembly fullname=&quot;Foo&quot; ignoreIfMissing=&quot;1&quot;&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type name=&quot;TypeName&quot;/&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;/assembly&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;/linker&amp;gt;</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><ul><li><code>ignoreIfUnreferenced:</code> In some cases, you might want to preserve entities in an assembly only when that assembly is referenced by another assembly. Use this attribute to preserve the entities in an assembly only when at least one type is referenced in an assembly.</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;linker&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;assembly fullname=&quot;Bar&quot; ignoreIfUnreferenced=&quot;1&quot;&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type name=&quot;TypeName&quot;/&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;/assembly&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;/linker&amp;gt;</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><ul><li><code>windowsruntime:</code> When you define preservations for a Windows Runtime Metadata (.winmd) assembly, you must add the <code>windowsruntime</code> attribute to the <code>&amp;lt;assembly&amp;gt;</code> element in the link.xml file:</li></ul><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;linker&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;assembly fullname=&quot;Windows&quot; windowsruntime=&quot;true&quot;&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;type name=&quot;TypeName&quot;/&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &amp;lt;/assembly&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;/linker&amp;gt;</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" class="copyButton_wuS7 clean-btn">复制</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="dependency-annotations">Dependency annotations<a class="hash-link" href="#dependency-annotations" title="标题的直接链接">​</a></h2><p>Dependency annotations define dependencies between various code elements. These annotations are useful for preserving code patterns that the Unity linker can’t statically analyze, such as reflection. These annotations also ensure that these code elements aren’t erroneously preserved when no root element uses them. There are two methods you can use to change how the Unity linker processes code elements:</p><ul><li><a href="#annotation-attributes">Annotation attributes</a>: these attributes indicate that the Unity linker should preserve a particular code pattern, such as any type that derives from the annotated type.</li><li><a href="#always-link-assembly-%E5%B1%9E%E6%80%A7">AlwaysLinkAssemblyAttribute</a>: use this attribute to indicate that the Unity linker should process an assembly even if it’s not referenced by any other assemblies in your Project.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="annotation-attributes">Annotation attributes<a class="hash-link" href="#annotation-attributes" title="标题的直接链接">​</a></h3><p>The <code>[Preserve]</code> attribute is useful for situations when an API is always needed. Other attributes can be useful for more general preservations. For example, you can preserve all types that implement a particular interface by annotating the interface with the <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/Scripting.RequireImplementorsAttribute.html" target="_blank" rel="noopener noreferrer">RequireImplementorsAttribute</a>.</p><p>To annotate specific coding patterns, use one or more of the following attributes:</p><ul><li><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/Scripting.RequireImplementorsAttribute.html" target="_blank" rel="noopener noreferrer">RequireImplementorsAttribute</a>: marks all types that implement this interface as dependencies.</li><li><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/scripting.RequireDerivedAttribute.html" target="_blank" rel="noopener noreferrer">RequireDerivedAttribute</a>: marks all types that derive from this type as dependencies.</li><li><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/scripting.RequiredInterfaceAttribute.html" target="_blank" rel="noopener noreferrer">RequiredInterfaceAttribute</a>: marks interface implementations on types as dependencies.</li><li><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/scripting.RequiredMemberAttribute.html" target="_blank" rel="noopener noreferrer">RequiredMemberAttribute</a>: marks all members of a type as dependencies.</li><li><a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/scripting.html" target="_blank" rel="noopener noreferrer">RequireAttributeUsagesAttribute</a>: marks custom attributes as dependencies.</li></ul><p>You can combine these attributes in various ways to more precisely control how the Unity linker preserves your code.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="alwayslinkassembly-属性">AlwaysLinkAssembly 属性<a class="hash-link" href="#alwayslinkassembly-属性" title="标题的直接链接">​</a></h3><p>The <code>[assembly: UnityEngine.Scripting.AlwaysLinkAssembly]</code> attribute forces the Unity linker to search an assembly regardless of whether or not the assembly is referenced by another assembly that is included in the build. You can apply the <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/scripting.AlwaysLinkAssemblyAttribute.html" target="_blank" rel="noopener noreferrer">AlwaysLinkAssembly</a> attribute only to an assembly.</p><p>The attribute doesn’t directly preserve code within the assembly. Instead, this attribute instructs the Unity linker to apply the root marking rules to the assembly. If no code elements match the root marking rules for the assembly, the Unity linker still removes the assembly from the build.</p><p>Use this attribute on precompiled or package assemblies that contain one or more methods with the <code>[RuntimeInitializeOnLoadMethod]</code> attribute, but which might not contain types used directly or indirectly in any Scenes in a project.</p><p>If an assembly defines <code>[assembly: AlwaysLinkAssembly]</code> and is also referenced by another assembly included in the build, the attribute has no effect on the output.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/scripting-section/unity-architecture/scripting-backends/managed-code-stripping.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/il2cpp/linux-il2cppcrosscompiler"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Linux IL2CPP 交叉编译器</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/scripting-backends/mono"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Mono overview</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configure-managed-code-stripping" class="table-of-contents__link toc-highlight">Configure managed code stripping</a></li><li><a href="#preserve-code-using-annotations" class="table-of-contents__link toc-highlight">Preserve code using annotations</a></li><li><a href="#root-annotations" class="table-of-contents__link toc-highlight">Root annotations</a><ul><li><a href="#annotate-roots-using-the-preserve-attribute" class="table-of-contents__link toc-highlight">Annotate roots using the Preserve attribute</a></li><li><a href="#annotate-roots-using-a-link-xml-file" class="table-of-contents__link toc-highlight">Annotate roots using a Link XML file</a></li><li><a href="#additional-assembly-xml-attributes" class="table-of-contents__link toc-highlight">Additional Assembly XML attributes</a></li></ul></li><li><a href="#dependency-annotations" class="table-of-contents__link toc-highlight">Dependency annotations</a><ul><li><a href="#annotation-attributes" class="table-of-contents__link toc-highlight">Annotation attributes</a></li><li><a href="#alwayslinkassembly-属性" class="table-of-contents__link toc-highlight">AlwaysLinkAssembly 属性</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.13c240a3.js"></script>
<script src="/assets/js/main.8f4a8c68.js"></script>
</body>
</html>